import{u as A,a as j,j as e,m as y,R as W,A as G,P as X,O as Y,C as q,T as J}from"./ui-qyH4TQhP.js";import{r as o}from"./vendor-Duk_Y8N0.js";import{S as R}from"./SkeletonLoader-C6FHfKAz.js";import{T as g}from"./TouchFeedback-BRUDPQK4.js";import{s as S,T as Q}from"./index-CvbB95hQ.js";import{R as N,L as Z,C as E,X as F,Y as T,T as w,a as ee,P as se,b as te,c as ae,B as V,d as M}from"./charts-BkQPTqVa.js";const re=({children:d,leftAction:i,rightAction:a,threshold:s=80,className:c=""})=>{const x=A(0),r=j(x,[-s,0,s],[a?.color||"#ef4444","#ffffff",i?.color||"#10b981"]),n=(t,h)=>{const m=h.offset.x;m>s&&i?(i.onTrigger(),x.set(0)):(m<-s&&a&&a.onTrigger(),x.set(0))};return e.jsxs("div",{className:`relative overflow-hidden ${c}`,children:[e.jsxs("div",{className:"absolute inset-0 flex justify-between items-center px-6",children:[i&&e.jsxs(y.div,{className:"flex items-center gap-2 text-white font-semibold",style:{opacity:j(x,[0,s],[0,1])},children:[i.icon&&e.jsx("span",{children:i.icon}),e.jsx("span",{children:i.label})]}),a&&e.jsxs(y.div,{className:"flex items-center gap-2 text-white font-semibold ml-auto",style:{opacity:j(x,[-s,0],[1,0])},children:[e.jsx("span",{children:a.label}),a.icon&&e.jsx("span",{children:a.icon})]})]}),e.jsx(y.div,{drag:"x",dragConstraints:{left:a?-s*1.5:0,right:i?s*1.5:0},dragElastic:.1,onDragEnd:n,style:{x,backgroundColor:r},className:"relative z-10 bg-white dark:bg-gray-800 touch-pan-y",children:d})]})},le=({children:d,onRefresh:i,threshold:a=80,className:s=""})=>{const[c,x]=o.useState(!1),r=A(0),n=o.useRef(null),t=j(r,[0,a],[0,1]),h=j(r,[0,a],[0,180]),m=async(f,p)=>{if(p.offset.y>a&&!c){x(!0);try{await i()}finally{x(!1),r.set(0)}}else r.set(0)},k=(f,p)=>{const u=n.current;u&&u.scrollTop===0&&p.offset.y>0&&r.set(Math.min(p.offset.y,a*1.5))};return e.jsxs("div",{ref:n,className:`relative overflow-auto ${s}`,children:[e.jsx(y.div,{className:"absolute top-0 left-0 right-0 flex items-center justify-center py-4 z-10",style:{opacity:t,height:j(r,[0,a],[0,60])},children:e.jsx(y.div,{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full",style:{rotate:c?void 0:h},animate:c?{rotate:360}:{},transition:{repeat:c?1/0:0,duration:1,ease:"linear"}})}),e.jsx(y.div,{drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.1,onDrag:k,onDragEnd:m,style:{y:r},className:"touch-pan-x",children:d})]})},ie=({isOpen:d,onClose:i,title:a,children:s,showHandle:c=!0,className:x=""})=>e.jsx(W,{open:d,onOpenChange:r=>!r&&i(),children:e.jsx(G,{children:d&&e.jsxs(X,{forceMount:!0,children:[e.jsx(Y,{asChild:!0,children:e.jsx(y.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}})}),e.jsx(q,{asChild:!0,children:e.jsxs(y.div,{className:`
                  fixed bottom-0 left-0 right-0 z-50
                  bg-white dark:bg-gray-800
                  rounded-t-3xl shadow-2xl
                  max-h-[90vh] overflow-hidden
                  ${x}
                `,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:300,damping:30},drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.2,onDragEnd:(r,n)=>{n.offset.y>100&&i()},children:[c&&e.jsx("div",{className:"flex justify-center pt-3 pb-2",children:e.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),a&&e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx(J,{className:"text-xl font-bold text-gray-900 dark:text-white",children:a})}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)] p-6",children:s})]})})]})})}),ne="https://usar-ics212.pdarleyjr.workers.dev",_=`${ne}/api`;function de({formId:d}){const[i,a]=o.useState(!0),[s,c]=o.useState(null);o.useEffect(()=>{x()},[d]);const x=async()=>{try{const n=await fetch(`${_}/ics212/forms/${d}`);if(!n.ok)throw new Error("Failed to fetch form");const t=await n.json();c(t.form)}catch(n){console.error("Error fetching form detail:",n),S({message:"Failed to load form details",type:"error"})}finally{a(!1)}},r=()=>{s?.pdf_url&&window.open(s.pdf_url,"_blank")};return i?e.jsx("div",{className:"p-4 space-y-4",children:e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"})]})}):s?e.jsxs("div",{className:"space-y-4 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white",children:s.vehicle_id_no}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.incident_name}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${s.release_decision==="hold"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}`,children:s.release_decision==="hold"?"üî¥ HOLD":"üü¢ RELEASED"})})]}),s.pdf_url&&e.jsxs("div",{className:"px-4",children:[e.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-900",children:e.jsx("iframe",{src:s.pdf_url,className:"w-full",style:{height:"400px"},title:"PDF Preview"})}),e.jsx(g,{children:e.jsx("button",{onClick:r,className:"w-full mt-2 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"üì• Download PDF"})})]}),e.jsxs("div",{className:"px-4 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Inspection Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Inspector:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:s.inspector_name_print})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Date:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:s.inspector_date})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Time:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:s.inspector_time})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Vehicle Type:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:s.vehicle_type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"License:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:s.vehicle_license_no})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Agency/Unit:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:s.agency_reg_unit})]})]}),s.additional_comments&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Comments:"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:s.additional_comments})]}),s.github_issue_number&&e.jsx(g,{children:e.jsxs("a",{href:`https://github.com/pdarleyjr/mbfd-checkout-system/issues/${s.github_issue_number}`,target:"_blank",rel:"noopener noreferrer",className:"block w-full py-2 px-4 bg-gray-100 dark:bg-gray-700 text-blue-600 dark:text-blue-400 rounded-lg text-center font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:["View GitHub Issue #",s.github_issue_number," ‚Üí"]})})]})]}):e.jsx("div",{className:"p-4 text-center",children:e.jsx("p",{className:"text-red-500",children:"Form not found"})})}function oe(){const[d,i]=o.useState([]),[a,s]=o.useState(!0),[c,x]=o.useState(1),[r,n]=o.useState(1),[t,h]=o.useState(""),[m,k]=o.useState("all"),[f,p]=o.useState(""),[u,B]=o.useState(""),[C,$]=o.useState(null),D=o.useCallback(async(l=1,v=!1)=>{v||s(!0);try{const b=new URLSearchParams({page:l.toString(),limit:"20",sortBy:"date",sortOrder:"desc"});t&&b.set("search",t),m!=="all"&&b.set("status",m),f&&b.set("from",f),u&&b.set("to",u);const P=await fetch(`${_}/ics212/forms?${b}`);if(!P.ok)throw new Error("Failed to fetch forms");const L=await P.json();i(v?U=>[...U,...L.forms]:L.forms),n(L.pages),x(l)}catch(b){console.error("Error fetching forms:",b),S({message:"Failed to load forms",type:"error"})}finally{s(!1)}},[t,m,f,u]);o.useEffect(()=>{D(1,!1)},[t,m,f,u]);const z=async()=>{await D(1,!1)},H=()=>{c<r&&!a&&D(c+1,!0)},O=async l=>{if(!l.pdf_url){S({message:"PDF not available",type:"error"});return}window.open(l.pdf_url,"_blank")},I=l=>{$(l)},K=l=>l==="hold"?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"üî¥ HOLD"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"üü¢ RELEASED"});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 space-y-4",children:[e.jsx("div",{children:e.jsx("input",{type:"search",placeholder:"Search by vehicle ID, incident, or inspector...",value:t,onChange:l=>h(l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(g,{children:e.jsx("button",{onClick:()=>k("all"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${m==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"All"})}),e.jsx(g,{children:e.jsx("button",{onClick:()=>k("hold"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${m==="hold"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"HOLD"})}),e.jsx(g,{children:e.jsx("button",{onClick:()=>k("release"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${m==="release"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"RELEASED"})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"From Date"}),e.jsx("input",{type:"date",value:f,onChange:l=>p(l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"To Date"}),e.jsx("input",{type:"date",value:u,onChange:l=>B(l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]})]}),!a&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",d.length," form",d.length!==1?"s":""]}),e.jsx(le,{onRefresh:z,children:e.jsxs("div",{className:"space-y-3",children:[a&&c===1?Array.from({length:5}).map((l,v)=>e.jsx(R,{type:"card"},v)):d.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No forms found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search or filter criteria"})]}):d.map(l=>e.jsx(re,{leftAction:{label:"View",color:"#3b82f6",onTrigger:()=>I(l.form_id)},rightAction:{label:"Download",color:"#10b981",onTrigger:()=>O(l)},children:e.jsx(g,{children:e.jsx("div",{onClick:()=>I(l.form_id),className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:l.vehicle_id_no}),K(l.release_decision)]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 truncate",children:l.incident_name}),e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["üîç ",l.inspector_name_print]}),e.jsxs("span",{children:["üìÖ ",new Date(l.inspector_date).toLocaleDateString()]}),l.pass_count!==void 0&&l.fail_count!==void 0&&e.jsxs("span",{children:["‚úÖ ",l.pass_count," / ‚ùå ",l.fail_count]})]})]}),e.jsx("svg",{className:"w-5 h-5 text-gray-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})})},l.id)),c<r&&!a&&e.jsx(g,{children:e.jsx("button",{onClick:H,className:"w-full py-3 bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 rounded-lg shadow-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Load More"})}),a&&c>1&&e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})}),C&&e.jsx(ie,{isOpen:!!C,onClose:()=>$(null),title:"Form Details",children:e.jsx(de,{formId:C})}),e.jsx(Q,{})]})}function ce(){const[d,i]=o.useState(!0),[a,s]=o.useState(null);o.useEffect(()=>{c();const r=setInterval(c,6e4);return()=>clearInterval(r)},[]);const c=async()=>{try{const r=await fetch(`${_}/ics212/analytics`);if(!r.ok)throw new Error("Failed to fetch analytics");const n=await r.json();s(n)}catch(r){console.error("Error fetching analytics:",r)}finally{i(!1)}};if(d)return e.jsx("div",{className:"space-y-4",children:Array.from({length:4}).map((r,n)=>e.jsx(R,{type:"card"},n))});if(!a)return e.jsx("div",{className:"text-center text-red-500 p-4",children:"Failed to load analytics"});const x=[{name:"HOLD",value:Math.round(a.holdRate),color:"#ef4444"},{name:"RELEASED",value:Math.round(a.releaseRate),color:"#10b981"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Forms"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:a.totalForms})]}),e.jsx("div",{className:"text-4xl",children:"üìã"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"This Month"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:a.formsThisMonth})]}),e.jsx("div",{className:"text-4xl",children:"üìÖ"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"HOLD Rate"}),e.jsxs("p",{className:"text-3xl font-bold text-red-600 dark:text-red-400 mt-1",children:[a.holdRate.toFixed(1),"%"]})]}),e.jsx("div",{className:"text-4xl",children:"üî¥"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"RELEASED Rate"}),e.jsxs("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-1",children:[a.releaseRate.toFixed(1),"%"]})]}),e.jsx("div",{className:"text-4xl",children:"üü¢"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Forms Per Day (Last 30 Days)"}),e.jsx(N,{width:"100%",height:300,children:e.jsxs(Z,{data:a.formsPerDay,children:[e.jsx(E,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(F,{dataKey:"date",stroke:"#9ca3af",tick:{fontSize:12}}),e.jsx(T,{stroke:"#9ca3af"}),e.jsx(w,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),e.jsx(ee,{type:"monotone",dataKey:"count",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",r:4}})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Release Decisions"}),e.jsx(N,{width:"100%",height:300,children:e.jsxs(se,{children:[e.jsx(te,{data:x,cx:"50%",cy:"50%",labelLine:!1,label:({name:r,value:n})=>`${r}: ${n}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:x.map((r,n)=>e.jsx(ae,{fill:r.color},`cell-${n}`))}),e.jsx(w,{})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top 10 Vehicles by Inspection Count"}),e.jsx(N,{width:"100%",height:300,children:e.jsxs(V,{data:a.topVehicles.slice(0,10),children:[e.jsx(E,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(F,{dataKey:"vehicleId",stroke:"#9ca3af",angle:-45,textAnchor:"end",height:80,tick:{fontSize:10}}),e.jsx(T,{stroke:"#9ca3af"}),e.jsx(w,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),e.jsx(M,{dataKey:"count",fill:"#3b82f6"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top Safety Item Failures"}),e.jsx(N,{width:"100%",height:300,children:e.jsxs(V,{data:a.safetyItemFailures.slice(0,8),layout:"vertical",children:[e.jsx(E,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(F,{type:"number",stroke:"#9ca3af"}),e.jsx(T,{type:"category",dataKey:"item",stroke:"#9ca3af",width:150,tick:{fontSize:10}}),e.jsx(w,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),e.jsx(M,{dataKey:"count",fill:"#ef4444"})]})})]})]})]})}function xe(){const[d,i]=o.useState([]),[a,s]=o.useState(!0),[c,x]=o.useState("");o.useEffect(()=>{r()},[]);const r=async()=>{try{const t=await fetch(`${_}/vehicles`);if(!t.ok)throw new Error("Failed to fetch vehicles");const h=await t.json();i(h.vehicles||[])}catch(t){console.error("Error fetching vehicles:",t),S({message:"Failed to load vehicles",type:"error"})}finally{s(!1)}},n=d.filter(t=>{const h=c.toLowerCase();return t.regUnit?.toLowerCase().includes(h)||t.vehicleMake?.toLowerCase().includes(h)||t.vehicleModel?.toLowerCase().includes(h)||t.licenseNumber?.toLowerCase().includes(h)});return a?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((t,h)=>e.jsx(R,{type:"card"},h))}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:e.jsx("input",{type:"search",placeholder:"Search vehicles by name, make, model, or license plate...",value:c,onChange:t=>x(t.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",n.length," vehicle",n.length!==1?"s":""]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.length===0?e.jsxs("div",{className:"col-span-full bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No vehicles found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try a different search term"})]}):n.map(t=>e.jsx(g,{children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"text-4xl",children:t.vehicleType?.toLowerCase().includes("truck")?"üöõ":"üöó"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:t.regUnit}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.vehicleMake," ",t.vehicleModel]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[t.licenseNumber&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"License:"}),e.jsx("span",{children:t.licenseNumber})]}),t.vehicleType&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Type:"}),e.jsx("span",{children:t.vehicleType})]}),t.vehicleStatus&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Status:"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${t.vehicleStatus==="Active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:t.vehicleStatus})]})]}),t.notes&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 line-clamp-2",children:t.notes})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx(g,{children:e.jsx("a",{href:`/?vehicle=${encodeURIComponent(t.regUnit)}`,className:"block w-full py-2 px-4 bg-blue-600 text-white rounded-lg text-center text-sm font-medium hover:bg-blue-700 transition-colors",children:"üìã New Inspection"})})})]})},t.id))})]})}function be(){const[d,i]=o.useState("list");return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("header",{className:"sticky top-0 z-50 bg-white dark:bg-gray-800 shadow-md",children:[e.jsx("div",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-8 h-8 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"ICS-212 Admin"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Vehicle Safety Inspections"})]})]})}),e.jsxs("nav",{className:"flex border-t border-gray-200 dark:border-gray-700",children:[e.jsx(g,{children:e.jsx("button",{onClick:()=>i("list"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${d==="list"?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üìã"}),e.jsx("span",{className:"hidden sm:inline",children:"Forms"})]})})}),e.jsx(g,{children:e.jsx("button",{onClick:()=>i("analytics"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${d==="analytics"?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üìä"}),e.jsx("span",{className:"hidden sm:inline",children:"Analytics"})]})})}),e.jsx(g,{children:e.jsx("button",{onClick:()=>i("vehicles"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${d==="vehicles"?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üöó"}),e.jsx("span",{className:"hidden sm:inline",children:"Vehicles"})]})})})]})]}),e.jsx("main",{className:"p-4 pb-20 md:p-6 lg:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[d==="list"&&e.jsx(oe,{}),d==="analytics"&&e.jsx(ce,{}),d==="vehicles"&&e.jsx(xe,{})]})})]})}export{be as ICS212AdminDashboard};
//# sourceMappingURL=ICS212AdminDashboard-CfVDpIxo.js.map
