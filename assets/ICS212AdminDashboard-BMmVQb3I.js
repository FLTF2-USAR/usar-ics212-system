import{u as Gt,a as Ee,j as t,m as Y,R as Xt,A as bt,P as Jt,O as Qt,C as Zt,T as er}from"./ui-CK6awmVK.js";import{r as o,h as k,a as Ar,R as Tt,u as Or}from"./vendor-DtipCrYl.js";import{S as Fe}from"./SkeletonLoader-D0j6PFQw.js";import{T as E}from"./TouchFeedback-jmoWXbnW.js";import{c as tr,s as A,z as lt}from"./index-nfgbkyrW.js";import{A as G,a as vt,X as jt,T as _t,P as Lr}from"./config-BBejfgFd.js";import{C as It,a as Mr,S as Vr}from"./square-pen-CCawx5RX.js";import{w as Ur,R as Se,B as ze,C as _e,X as Ie,Y as De,T as Ce,L as Hr,a as Pe,P as Br,b as zr,c as Wr,d as Kr,e as Yr}from"./charts-CXHUXBrL.js";import{M as rr,S as Dt,R as Pt}from"./send-Cl4MZITm.js";import{T as ar,S as qr}from"./trash-2-BTwIzd_Q.js";import{H as Gr}from"./house-BPTgb1yT.js";const Xr=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],Jr=tr("cloud-download",Xr);const Qr=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Zr=tr("pen",Qr),ea=({children:e,leftAction:r,rightAction:a,threshold:s=80,className:n=""})=>{const l=Gt(0),c=Ee(l,[-s,0,s],[a?.color||"#ef4444","#ffffff",r?.color||"#10b981"]),d=(i,m)=>{const g=m.offset.x;g>s&&r?(r.onTrigger(),l.set(0)):(g<-s&&a&&a.onTrigger(),l.set(0))};return t.jsxs("div",{className:`relative overflow-hidden ${n}`,children:[t.jsxs("div",{className:"absolute inset-0 flex justify-between items-center px-6",children:[r&&t.jsxs(Y.div,{className:"flex items-center gap-2 text-white font-semibold",style:{opacity:Ee(l,[0,s],[0,1])},children:[r.icon&&t.jsx("span",{children:r.icon}),t.jsx("span",{children:r.label})]}),a&&t.jsxs(Y.div,{className:"flex items-center gap-2 text-white font-semibold ml-auto",style:{opacity:Ee(l,[-s,0],[1,0])},children:[t.jsx("span",{children:a.label}),a.icon&&t.jsx("span",{children:a.icon})]})]}),t.jsx(Y.div,{drag:"x",dragConstraints:{left:a?-s*1.5:0,right:r?s*1.5:0},dragElastic:.1,onDragEnd:d,style:{x:l,backgroundColor:c},className:"relative z-10 bg-white dark:bg-gray-800 touch-pan-y",children:e})]})},ta=({children:e,onRefresh:r,threshold:a=80,className:s=""})=>{const[n,l]=o.useState(!1),c=Gt(0),d=o.useRef(null),i=Ee(c,[0,a],[0,1]),m=Ee(c,[0,a],[0,180]),g=async(u,p)=>{if(p.offset.y>a&&!n){l(!0);try{await r()}finally{l(!1),c.set(0)}}else c.set(0)},y=(u,p)=>{const h=d.current;h&&h.scrollTop===0&&p.offset.y>0&&c.set(Math.min(p.offset.y,a*1.5))};return t.jsxs("div",{ref:d,className:`relative overflow-auto ${s}`,children:[t.jsx(Y.div,{className:"absolute top-0 left-0 right-0 flex items-center justify-center py-4 z-10",style:{opacity:i,height:Ee(c,[0,a],[0,60])},children:t.jsx(Y.div,{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full",style:{rotate:n?void 0:m},animate:n?{rotate:360}:{},transition:{repeat:n?1/0:0,duration:1,ease:"linear"}})}),t.jsx(Y.div,{drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.1,onDrag:y,onDragEnd:g,style:{y:c},className:"touch-pan-x",children:e})]})},Rt=({isOpen:e,onClose:r,title:a,children:s,showHandle:n=!0,className:l=""})=>t.jsx(Xt,{open:e,onOpenChange:c=>!c&&r(),children:t.jsx(bt,{children:e&&t.jsxs(Jt,{forceMount:!0,children:[t.jsx(Qt,{asChild:!0,children:t.jsx(Y.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}})}),t.jsx(Zt,{asChild:!0,children:t.jsxs(Y.div,{className:`
                  fixed bottom-0 left-0 right-0 z-50
                  bg-white dark:bg-gray-800
                  rounded-t-3xl shadow-2xl
                  max-h-[90vh] overflow-hidden
                  ${l}
                `,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:300,damping:30},drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.2,onDragEnd:(c,d)=>{d.offset.y>100&&r()},children:[n&&t.jsx("div",{className:"flex justify-center pt-3 pb-2",children:t.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),a&&t.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:t.jsx(er,{className:"text-xl font-bold text-gray-900 dark:text-white",children:a})}),t.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)] p-6",children:s})]})})]})})});function ra({formId:e}){const[r,a]=o.useState(!0),[s,n]=o.useState(null);o.useEffect(()=>{l()},[e]);const l=async()=>{try{const d=await fetch(`${G}/ics212/forms/${e}`);if(!d.ok)throw new Error("Failed to fetch form");const i=await d.json();n(i.form)}catch(d){console.error("Error fetching form detail:",d),A({message:"Failed to load form details",type:"error"})}finally{a(!1)}},c=()=>{s?.pdf_url&&window.open(s.pdf_url,"_blank")};return r?t.jsx("div",{className:"p-4 space-y-4",children:t.jsxs("div",{className:"animate-pulse space-y-3",children:[t.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),t.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"})]})}):s?t.jsxs("div",{className:"space-y-4 max-h-[80vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 p-4 border-b border-gray-200 dark:border-gray-700",children:[t.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white",children:s.vehicle_id_no}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.incident_name}),t.jsx("div",{className:"mt-2",children:t.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${s.release_decision==="hold"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}`,children:s.release_decision==="hold"?"ðŸ”´ HOLD":"ðŸŸ¢ RELEASED"})})]}),s.pdf_url&&t.jsxs("div",{className:"px-4",children:[t.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-900",children:t.jsx("iframe",{src:s.pdf_url,className:"w-full",style:{height:"400px"},title:"PDF Preview"})}),t.jsx(E,{children:t.jsx("button",{onClick:c,className:"w-full mt-2 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"ðŸ“¥ Download PDF"})})]}),t.jsxs("div",{className:"px-4 space-y-3",children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Inspection Details"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Inspector:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:s.inspector_name_print})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Date:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:s.inspector_date})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Time:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:s.inspector_time})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Vehicle Type:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:s.vehicle_type})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"License:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:s.vehicle_license_no})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Agency/Unit:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:s.agency_reg_unit})]})]}),s.additional_comments&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Comments:"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:s.additional_comments})]}),s.github_issue_number&&t.jsx(E,{children:t.jsxs("a",{href:`https://github.com/pdarleyjr/mbfd-checkout-system/issues/${s.github_issue_number}`,target:"_blank",rel:"noopener noreferrer",className:"block w-full py-2 px-4 bg-gray-100 dark:bg-gray-700 text-blue-600 dark:text-blue-400 rounded-lg text-center font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:["View GitHub Issue #",s.github_issue_number," â†’"]})})]})]}):t.jsx("div",{className:"p-4 text-center",children:t.jsx("p",{className:"text-red-500",children:"Form not found"})})}function aa({formId:e}){const[r,a]=o.useState(null),[s,n]=o.useState(!0),[l,c]=o.useState(null);o.useEffect(()=>{d()},[e]);const d=async()=>{n(!0),c(null);try{const g=await fetch(vt.ics218FormById(e));if(!g.ok)throw new Error("Failed to fetch form details");const y=await g.json();a(y.form)}catch(g){console.error("Error fetching ICS 218 form details:",g),c(g instanceof Error?g.message:"Unknown error")}finally{n(!1)}},i=()=>{r?.pdf_url&&window.open(r.pdf_url,"_blank")},m=()=>{r?.github_issue_url&&window.open(r.github_issue_url,"_blank")};return s?t.jsxs("div",{className:"space-y-4 p-4",children:[t.jsx(Fe,{type:"card"}),t.jsx(Fe,{type:"card"}),t.jsx(Fe,{type:"card"})]}):l||!r?t.jsx("div",{className:"p-4",children:t.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:t.jsx("p",{className:"text-red-800 dark:text-red-200",children:l||"Form not found"})})}):t.jsxs("div",{className:"space-y-6 p-4 max-h-[70vh] overflow-y-auto",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"ICS 218 - Support Vehicle/Equipment Log"}),t.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"ICS 218"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Incident Name:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:r.incident_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Incident Number:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:r.incident_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Date Prepared:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:new Date(r.date_prepared).toLocaleDateString()})]}),t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Time Prepared:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:r.time_prepared})]}),t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Vehicle Category:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:r.vehicle_category})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Vehicles (",r.vehicles.length,")"]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full text-sm",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Classification"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Make/Type"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"License ID"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Agency"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Operator"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Assignment"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.vehicles.map(g=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[t.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:g.classification}),t.jsxs("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:[g.make," ",g.category_kind_type]}),t.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:g.vehicle_license_id}),t.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:g.agency_owner}),t.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:g.operator_name_contact}),t.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:g.incident_assignment})]},g.id))})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Prepared By"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Name:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:r.prepared_by_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Position/Title:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:r.prepared_by_position})]}),t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Signature Date/Time:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:new Date(r.signature_timestamp).toLocaleString()})]})]}),r.signature_data&&t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300 block mb-2",children:"Signature:"}),t.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-2 bg-white dark:bg-gray-900 inline-block",children:t.jsx("img",{src:r.signature_data,alt:"Signature",className:"max-w-xs h-20"})})]})]}),t.jsxs("div",{className:"flex gap-3",children:[r.pdf_url&&t.jsxs("button",{onClick:i,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download PDF"]}),r.github_issue_url&&t.jsxs("button",{onClick:m,className:"flex-1 px-4 py-3 bg-gray-800 text-white rounded-lg font-semibold hover:bg-gray-900 transition-colors flex items-center justify-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"View GitHub Issue"]})]}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["Form ID: ",r.id," | Submitted: ",new Date(r.created_at).toLocaleString()]})]})}function sa({isOpen:e,onClose:r,submission:a,onSave:s}){const[n,l]=o.useState(null),[c,d]=o.useState(!1);o.useEffect(()=>{if(a&&e){const u=typeof a.inspection_items=="string"?JSON.parse(a.inspection_items):a.inspection_items||[];l({...a,inspection_items:u})}},[a,e]);const i=o.useMemo(()=>n?.inspection_items?n.inspection_items.some(p=>p.isSafetyItem&&p.status==="fail")?"hold":"release":n?.release_decision||"release",[n?.inspection_items]),m=(u,p)=>{l(h=>({...h,[u]:p}))},g=(u,p)=>{l(h=>({...h,inspection_items:h.inspection_items.map(b=>b.itemNumber===u?{...b,status:p}:b)}))},y=async()=>{if(!(!n||!a?.form_id)){d(!0);try{const u={incident_name:n.incident_name,inspector_date:n.inspector_date,inspector_time:n.inspector_time,order_no:n.order_no,vehicle_type:n.vehicle_type,vehicle_license_no:n.vehicle_license_no,agency_reg_unit:n.agency_reg_unit,vehicle_id_no:n.vehicle_id_no,inspection_items:JSON.stringify(n.inspection_items),additional_comments:n.additional_comments,release_decision:i,inspector_name_print:n.inspector_name_print},p=await fetch(`${G}/ics212/forms/${a.form_id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!p.ok){const h=await p.json();throw new Error(h.error||"Failed to update submission")}A({message:"Submission updated successfully",type:"success"}),s(),r()}catch(u){console.error("Error updating submission:",u),A({message:u instanceof Error?u.message:"Failed to update submission",type:"error"})}finally{d(!1)}}};return n?t.jsx(Xt,{open:e,onOpenChange:u=>!u&&r(),children:t.jsx(bt,{children:e&&t.jsxs(Jt,{forceMount:!0,children:[t.jsx(Qt,{asChild:!0,children:t.jsx(Y.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}})}),t.jsx(Zt,{asChild:!0,children:t.jsxs(Y.div,{className:"fixed inset-0 md:inset-auto md:left-1/2 md:top-1/2 md:-translate-x-1/2 md:-translate-y-1/2 z-50 w-full md:w-full md:max-w-4xl bg-white dark:bg-gray-800 md:rounded-lg shadow-xl overflow-hidden flex flex-col md:max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},children:[t.jsxs("div",{className:"flex-shrink-0 px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between bg-white dark:bg-gray-800",children:[t.jsx(er,{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Edit ICS-212 Submission"}),t.jsx(E,{children:t.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:c,children:t.jsx(jt,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:`
                      p-4 rounded-xl border-2 flex items-center gap-3
                      ${i==="hold"?"bg-red-50 border-red-500 dark:bg-red-900/20 dark:border-red-700":"bg-green-50 border-green-500 dark:bg-green-900/20 dark:border-green-700"}
                    `,children:[i==="hold"?t.jsx(_t,{className:"w-6 h-6 text-red-600 dark:text-red-400"}):t.jsx(It,{className:"w-6 h-6 text-green-600 dark:text-green-400"}),t.jsxs("div",{children:[t.jsx("p",{className:`font-bold text-lg ${i==="hold"?"text-red-900 dark:text-red-100":"text-green-900 dark:text-green-100"}`,children:i==="hold"?"ðŸ”´ HOLD FOR REPAIRS":"ðŸŸ¢ RELEASED"}),i==="hold"&&t.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Safety Item â€“ Do Not Release Until Repaired"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Incident Information"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Incident Name *"}),t.jsx("input",{type:"text",value:n.incident_name||"",onChange:u=>m("incident_name",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date *"}),t.jsx("input",{type:"date",value:n.inspector_date||"",onChange:u=>m("inspector_date",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Time *"}),t.jsx("input",{type:"time",value:n.inspector_time||"",onChange:u=>m("inspector_time",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Order Number"}),t.jsx("input",{type:"text",value:n.order_no||"",onChange:u=>m("order_no",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Vehicle Information"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Vehicle Type *"}),t.jsx("input",{type:"text",value:n.vehicle_type||"",onChange:u=>m("vehicle_type",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"License Number *"}),t.jsx("input",{type:"text",value:n.vehicle_license_no||"",onChange:u=>m("vehicle_license_no",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Agency Reg/Unit *"}),t.jsx("input",{type:"text",value:n.agency_reg_unit||"",onChange:u=>m("agency_reg_unit",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Vehicle ID"}),t.jsx("input",{type:"text",value:n.vehicle_id_no||"",onChange:u=>m("vehicle_id_no",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Inspection Items"}),t.jsx("div",{className:"space-y-3",children:n.inspection_items?.map(u=>t.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:t.jsxs("div",{className:"flex items-start gap-3",children:[u.isSafetyItem&&t.jsx(_t,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-1"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"mb-3",children:[t.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white",children:[u.itemNumber,". ",u.description]}),u.reference&&t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:u.reference})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(E,{children:t.jsxs("button",{type:"button",onClick:()=>g(u.itemNumber,"pass"),className:`
                                        flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg
                                        font-medium transition-all border-2
                                        ${u.status==="pass"?"bg-green-500 text-white border-green-600 shadow-md":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600"}
                                      `,children:[t.jsx(It,{className:"w-4 h-4"}),"Pass"]})}),t.jsx(E,{children:t.jsxs("button",{type:"button",onClick:()=>g(u.itemNumber,"fail"),className:`
                                        flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg
                                        font-medium transition-all border-2
                                        ${u.status==="fail"?"bg-red-500 text-white border-red-600 shadow-md":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600"}
                                      `,children:[t.jsx(Mr,{className:"w-4 h-4"}),"Fail"]})}),t.jsx(E,{children:t.jsx("button",{type:"button",onClick:()=>g(u.itemNumber,"n/a"),className:`
                                        flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg
                                        font-medium transition-all border-2
                                        ${u.status==="n/a"?"bg-gray-400 text-white border-gray-500 shadow-md":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600"}
                                      `,children:"N/A"})})]})]})]})},u.itemNumber))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Additional Comments"}),t.jsx("textarea",{value:n.additional_comments||"",onChange:u=>m("additional_comments",u.target.value),rows:4,placeholder:"Any additional notes or observations...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white resize-none"})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Inspector Information"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Inspector Name *"}),t.jsx("input",{type:"text",value:n.inspector_name_print||"",onChange:u=>m("inspector_name_print",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),n.inspector_signature&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Inspector Signature (Read-only)"}),t.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-900",children:t.jsx("img",{src:n.inspector_signature,alt:"Inspector Signature",className:"max-w-xs h-auto"})})]})]})]})]})}),t.jsxs("div",{className:"flex-shrink-0 px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3 bg-white dark:bg-gray-800",children:[t.jsx(E,{children:t.jsx("button",{onClick:r,className:"px-6 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 font-medium transition-colors",disabled:c,children:"Cancel"})}),t.jsx(E,{children:t.jsxs("button",{onClick:y,className:"px-6 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:c,children:[c&&t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c?"Saving...":"Save Changes"]})})]})]})})]})})}):null}var na=Object.defineProperty,la=(e,r,a)=>r in e?na(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,it=(e,r,a)=>(la(e,typeof r!="symbol"?r+"":r,a),a);let ia=class{constructor(){it(this,"current",this.detect()),it(this,"handoffState","pending"),it(this,"currentId",0)}set(r){this.current!==r&&(this.handoffState="pending",this.currentId=0,this.current=r)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},te=new ia;function Ue(e){var r;return te.isServer?null:e==null?document:(r=e?.ownerDocument)!=null?r:document}function mt(e){var r,a;return te.isServer?null:e==null?document:(a=(r=e?.getRootNode)==null?void 0:r.call(e))!=null?a:document}function sr(e){var r,a;return(a=(r=mt(e))==null?void 0:r.activeElement)!=null?a:null}function oa(e){return sr(e)===e}function Xe(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(r=>setTimeout(()=>{throw r}))}function ce(){let e=[],r={addEventListener(a,s,n,l){return a.addEventListener(s,n,l),r.add(()=>a.removeEventListener(s,n,l))},requestAnimationFrame(...a){let s=requestAnimationFrame(...a);return r.add(()=>cancelAnimationFrame(s))},nextFrame(...a){return r.requestAnimationFrame(()=>r.requestAnimationFrame(...a))},setTimeout(...a){let s=setTimeout(...a);return r.add(()=>clearTimeout(s))},microTask(...a){let s={current:!0};return Xe(()=>{s.current&&a[0]()}),r.add(()=>{s.current=!1})},style(a,s,n){let l=a.style.getPropertyValue(s);return Object.assign(a.style,{[s]:n}),this.add(()=>{Object.assign(a.style,{[s]:l})})},group(a){let s=ce();return a(s),this.add(()=>s.dispose())},add(a){return e.includes(a)||e.push(a),()=>{let s=e.indexOf(a);if(s>=0)for(let n of e.splice(s,1))n()}},dispose(){for(let a of e.splice(0))a()}};return r}function Je(){let[e]=o.useState(ce);return o.useEffect(()=>()=>e.dispose(),[e]),e}let H=(e,r)=>{te.isServer?o.useEffect(e,r):o.useLayoutEffect(e,r)};function je(e){let r=o.useRef(e);return H(()=>{r.current=e},[e]),r}let $=function(e){let r=je(e);return k.useCallback((...a)=>r.current(...a),[r])};function He(e){return o.useMemo(()=>e,Object.values(e))}let da=o.createContext(void 0);function ca(){return o.useContext(da)}function gt(...e){return Array.from(new Set(e.flatMap(r=>typeof r=="string"?r.split(" "):[]))).filter(Boolean).join(" ")}function de(e,r,...a){if(e in r){let n=r[e];return typeof n=="function"?n(...a):n}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(r).map(n=>`"${n}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,de),s}var Ye=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Ye||{}),me=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(me||{});function q(){let e=ma();return o.useCallback(r=>ua({mergeRefs:e,...r}),[e])}function ua({ourProps:e,theirProps:r,slot:a,defaultTag:s,features:n,visible:l=!0,name:c,mergeRefs:d}){d=d??ga;let i=nr(r,e);if(l)return We(i,a,s,c,d);let m=n??0;if(m&2){let{static:g=!1,...y}=i;if(g)return We(y,a,s,c,d)}if(m&1){let{unmount:g=!0,...y}=i;return de(g?0:1,{0(){return null},1(){return We({...y,hidden:!0,style:{display:"none"}},a,s,c,d)}})}return We(i,a,s,c,d)}function We(e,r={},a,s,n){let{as:l=a,children:c,refName:d="ref",...i}=ot(e,["unmount","static"]),m=e.ref!==void 0?{[d]:e.ref}:{},g=typeof c=="function"?c(r):c;"className"in i&&i.className&&typeof i.className=="function"&&(i.className=i.className(r)),i["aria-labelledby"]&&i["aria-labelledby"]===i.id&&(i["aria-labelledby"]=void 0);let y={};if(r){let u=!1,p=[];for(let[h,b]of Object.entries(r))typeof b=="boolean"&&(u=!0),b===!0&&p.push(h.replace(/([A-Z])/g,v=>`-${v.toLowerCase()}`));if(u){y["data-headlessui-state"]=p.join(" ");for(let h of p)y[`data-${h}`]=""}}if(Le(l)&&(Object.keys(pe(i)).length>0||Object.keys(pe(y)).length>0))if(!o.isValidElement(g)||Array.isArray(g)&&g.length>1||xa(g)){if(Object.keys(pe(i)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(pe(i)).concat(Object.keys(pe(y))).map(u=>`  - ${u}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(u=>`  - ${u}`).join(`
`)].join(`
`))}else{let u=g.props,p=u?.className,h=typeof p=="function"?(...w)=>gt(p(...w),i.className):gt(p,i.className),b=h?{className:h}:{},v=nr(g.props,pe(ot(i,["ref"])));for(let w in y)w in v&&delete y[w];return o.cloneElement(g,Object.assign({},v,y,m,{ref:n(ha(g),m.ref)},b))}return o.createElement(l,Object.assign({},ot(i,["ref"]),!Le(l)&&m,!Le(l)&&y),g)}function ma(){let e=o.useRef([]),r=o.useCallback(a=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(a):s.current=a)},[]);return(...a)=>{if(!a.every(s=>s==null))return e.current=a,r}}function ga(...e){return e.every(r=>r==null)?void 0:r=>{for(let a of e)a!=null&&(typeof a=="function"?a(r):a.current=r)}}function nr(...e){if(e.length===0)return{};if(e.length===1)return e[0];let r={},a={};for(let s of e)for(let n in s)n.startsWith("on")&&typeof s[n]=="function"?(a[n]!=null||(a[n]=[]),a[n].push(s[n])):r[n]=s[n];if(r.disabled||r["aria-disabled"])for(let s in a)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(s)&&(a[s]=[n=>{var l;return(l=n?.preventDefault)==null?void 0:l.call(n)}]);for(let s in a)Object.assign(r,{[s](n,...l){let c=a[s];for(let d of c){if((n instanceof Event||n?.nativeEvent instanceof Event)&&n.defaultPrevented)return;d(n,...l)}}});return r}function B(e){var r;return Object.assign(o.forwardRef(e),{displayName:(r=e.displayName)!=null?r:e.name})}function pe(e){let r=Object.assign({},e);for(let a in r)r[a]===void 0&&delete r[a];return r}function ot(e,r=[]){let a=Object.assign({},e);for(let s of r)s in a&&delete a[s];return a}function ha(e){return k.version.split(".")[0]>="19"?e.props.ref:e.ref}function Le(e){return e===o.Fragment||e===Symbol.for("react.fragment")}function xa(e){return Le(e.type)}let fa="span";var qe=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(qe||{});function pa(e,r){var a;let{features:s=1,...n}=e,l={ref:r,"aria-hidden":(s&2)===2?!0:(a=n["aria-hidden"])!=null?a:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return q()({ourProps:l,theirProps:n,slot:{},defaultTag:fa,name:"Hidden"})}let ht=B(pa);function ya(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function he(e){return ya(e)&&"tagName"in e}function ve(e){return he(e)&&"accessKey"in e}function ge(e){return he(e)&&"tabIndex"in e}function ba(e){return he(e)&&"style"in e}function va(e){return ve(e)&&e.nodeName==="IFRAME"}function ja(e){return ve(e)&&e.nodeName==="INPUT"}let lr=Symbol();function ka(e,r=!0){return Object.assign(e,{[lr]:r})}function re(...e){let r=o.useRef(e);o.useEffect(()=>{r.current=e},[e]);let a=$(s=>{for(let n of r.current)n!=null&&(typeof n=="function"?n(s):n.current=s)});return e.every(s=>s==null||s?.[lr])?void 0:a}let kt=o.createContext(null);kt.displayName="DescriptionContext";function ir(){let e=o.useContext(kt);if(e===null){let r=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(r,ir),r}return e}function wa(){let[e,r]=o.useState([]);return[e.length>0?e.join(" "):void 0,o.useMemo(()=>function(a){let s=$(l=>(r(c=>[...c,l]),()=>r(c=>{let d=c.slice(),i=d.indexOf(l);return i!==-1&&d.splice(i,1),d}))),n=o.useMemo(()=>({register:s,slot:a.slot,name:a.name,props:a.props,value:a.value}),[s,a.slot,a.name,a.props,a.value]);return k.createElement(kt.Provider,{value:n},a.children)},[r])]}let Na="p";function Sa(e,r){let a=o.useId(),s=ca(),{id:n=`headlessui-description-${a}`,...l}=e,c=ir(),d=re(r);H(()=>c.register(n),[n,c.register]);let i=He({...c.slot,disabled:s||!1}),m={ref:d,...c.props,id:n};return q()({ourProps:m,theirProps:l,slot:i,defaultTag:Na,name:c.name||"Description"})}let Ca=B(Sa),Ea=Object.assign(Ca,{});var or=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(or||{});let Fa=o.createContext(()=>{});function $a({value:e,children:r}){return k.createElement(Fa.Provider,{value:e},r)}let dr=class extends Map{constructor(r){super(),this.factory=r}get(r){let a=super.get(r);return a===void 0&&(a=this.factory(r),this.set(r,a)),a}};var Ta=Object.defineProperty,_a=(e,r,a)=>r in e?Ta(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,Ia=(e,r,a)=>(_a(e,r+"",a),a),cr=(e,r,a)=>{if(!r.has(e))throw TypeError("Cannot "+a)},K=(e,r,a)=>(cr(e,r,"read from private field"),a?a.call(e):r.get(e)),dt=(e,r,a)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,a)},At=(e,r,a,s)=>(cr(e,r,"write to private field"),r.set(e,a),a),ee,Re,Ae;let Da=class{constructor(r){dt(this,ee,{}),dt(this,Re,new dr(()=>new Set)),dt(this,Ae,new Set),Ia(this,"disposables",ce()),At(this,ee,r),te.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return K(this,ee)}subscribe(r,a){if(te.isServer)return()=>{};let s={selector:r,callback:a,current:r(K(this,ee))};return K(this,Ae).add(s),this.disposables.add(()=>{K(this,Ae).delete(s)})}on(r,a){return te.isServer?()=>{}:(K(this,Re).get(r).add(a),this.disposables.add(()=>{K(this,Re).get(r).delete(a)}))}send(r){let a=this.reduce(K(this,ee),r);if(a!==K(this,ee)){At(this,ee,a);for(let s of K(this,Ae)){let n=s.selector(K(this,ee));ur(s.current,n)||(s.current=n,s.callback(n))}for(let s of K(this,Re).get(r.type))s(K(this,ee),r)}}};ee=new WeakMap,Re=new WeakMap,Ae=new WeakMap;function ur(e,r){return Object.is(e,r)?!0:typeof e!="object"||e===null||typeof r!="object"||r===null?!1:Array.isArray(e)&&Array.isArray(r)?e.length!==r.length?!1:ct(e[Symbol.iterator](),r[Symbol.iterator]()):e instanceof Map&&r instanceof Map||e instanceof Set&&r instanceof Set?e.size!==r.size?!1:ct(e.entries(),r.entries()):Ot(e)&&Ot(r)?ct(Object.entries(e)[Symbol.iterator](),Object.entries(r)[Symbol.iterator]()):!1}function ct(e,r){do{let a=e.next(),s=r.next();if(a.done&&s.done)return!0;if(a.done||s.done||!Object.is(a.value,s.value))return!1}while(!0)}function Ot(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let r=Object.getPrototypeOf(e);return r===null||Object.getPrototypeOf(r)===null}var Pa=Object.defineProperty,Ra=(e,r,a)=>r in e?Pa(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,Lt=(e,r,a)=>(Ra(e,typeof r!="symbol"?r+"":r,a),a),Aa=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(Aa||{});let Oa={0(e,r){let a=r.id,s=e.stack,n=e.stack.indexOf(a);if(n!==-1){let l=e.stack.slice();return l.splice(n,1),l.push(a),s=l,{...e,stack:s}}return{...e,stack:[...e.stack,a]}},1(e,r){let a=r.id,s=e.stack.indexOf(a);if(s===-1)return e;let n=e.stack.slice();return n.splice(s,1),{...e,stack:n}}},La=class mr extends Da{constructor(){super(...arguments),Lt(this,"actions",{push:r=>this.send({type:0,id:r}),pop:r=>this.send({type:1,id:r})}),Lt(this,"selectors",{isTop:(r,a)=>r.stack[r.stack.length-1]===a,inStack:(r,a)=>r.stack.includes(a)})}static new(){return new mr({stack:[]})}reduce(r,a){return de(a.type,Oa,r,a)}};const gr=new dr(()=>La.new());function hr(e,r,a=ur){return Ur.useSyncExternalStoreWithSelector($(s=>e.subscribe(Ma,s)),$(()=>e.state),$(()=>e.state),$(r),a)}function Ma(e){return e}function Be(e,r){let a=o.useId(),s=gr.get(r),[n,l]=hr(s,o.useCallback(c=>[s.selectors.isTop(c,a),s.selectors.inStack(c,a)],[s,a]));return H(()=>{if(e)return s.actions.push(a),()=>s.actions.pop(a)},[s,e,a]),e?l?n:!0:!1}let xt=new Map,Me=new Map;function Mt(e){var r;let a=(r=Me.get(e))!=null?r:0;return Me.set(e,a+1),a!==0?()=>Vt(e):(xt.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Vt(e))}function Vt(e){var r;let a=(r=Me.get(e))!=null?r:1;if(a===1?Me.delete(e):Me.set(e,a-1),a!==1)return;let s=xt.get(e);s&&(s["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",s["aria-hidden"]),e.inert=s.inert,xt.delete(e))}function Va(e,{allowed:r,disallowed:a}={}){let s=Be(e,"inert-others");H(()=>{var n,l;if(!s)return;let c=ce();for(let i of(n=a?.())!=null?n:[])i&&c.add(Mt(i));let d=(l=r?.())!=null?l:[];for(let i of d){if(!i)continue;let m=Ue(i);if(!m)continue;let g=i.parentElement;for(;g&&g!==m.body;){for(let y of g.children)d.some(u=>y.contains(u))||c.add(Mt(y));g=g.parentElement}}return c.dispose},[s,r,a])}function Ua(e,r,a){let s=je(n=>{let l=n.getBoundingClientRect();l.x===0&&l.y===0&&l.width===0&&l.height===0&&a()});o.useEffect(()=>{if(!e)return;let n=r===null?null:ve(r)?r:r.current;if(!n)return;let l=ce();if(typeof ResizeObserver<"u"){let c=new ResizeObserver(()=>s.current(n));c.observe(n),l.add(()=>c.disconnect())}if(typeof IntersectionObserver<"u"){let c=new IntersectionObserver(()=>s.current(n));c.observe(n),l.add(()=>c.disconnect())}return()=>l.dispose()},[r,s,e])}let Ge=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),Ha=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var ie=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(ie||{}),ft=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(ft||{}),Ba=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Ba||{});function za(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Ge)).sort((r,a)=>Math.sign((r.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}function Wa(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Ha)).sort((r,a)=>Math.sign((r.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}var xr=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(xr||{});function Ka(e,r=0){var a;return e===((a=Ue(e))==null?void 0:a.body)?!1:de(r,{0(){return e.matches(Ge)},1(){let s=e;for(;s!==null;){if(s.matches(Ge))return!0;s=s.parentElement}return!1}})}var Ya=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Ya||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function oe(e){e?.focus({preventScroll:!0})}let qa=["textarea","input"].join(",");function Ga(e){var r,a;return(a=(r=e?.matches)==null?void 0:r.call(e,qa))!=null?a:!1}function Xa(e,r=a=>a){return e.slice().sort((a,s)=>{let n=r(a),l=r(s);if(n===null||l===null)return 0;let c=n.compareDocumentPosition(l);return c&Node.DOCUMENT_POSITION_FOLLOWING?-1:c&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Ve(e,r,{sorted:a=!0,relativeTo:s=null,skipElements:n=[]}={}){let l=Array.isArray(e)?e.length>0?mt(e[0]):document:mt(e),c=Array.isArray(e)?a?Xa(e):e:r&64?Wa(e):za(e);n.length>0&&c.length>1&&(c=c.filter(p=>!n.some(h=>h!=null&&"current"in h?h?.current===p:h===p))),s=s??l?.activeElement;let d=(()=>{if(r&5)return 1;if(r&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),i=(()=>{if(r&1)return 0;if(r&2)return Math.max(0,c.indexOf(s))-1;if(r&4)return Math.max(0,c.indexOf(s))+1;if(r&8)return c.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),m=r&32?{preventScroll:!0}:{},g=0,y=c.length,u;do{if(g>=y||g+y<=0)return 0;let p=i+g;if(r&16)p=(p+y)%y;else{if(p<0)return 3;if(p>=y)return 1}u=c[p],u?.focus(m),g+=d}while(u!==sr(u));return r&6&&Ga(u)&&u.select(),2}function fr(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Ja(){return/Android/gi.test(window.navigator.userAgent)}function Ut(){return fr()||Ja()}function Ke(e,r,a,s){let n=je(a);o.useEffect(()=>{if(!e)return;function l(c){n.current(c)}return document.addEventListener(r,l,s),()=>document.removeEventListener(r,l,s)},[e,r,s])}function pr(e,r,a,s){let n=je(a);o.useEffect(()=>{if(!e)return;function l(c){n.current(c)}return window.addEventListener(r,l,s),()=>window.removeEventListener(r,l,s)},[e,r,s])}const Ht=30;function Qa(e,r,a){let s=je(a),n=o.useCallback(function(d,i){if(d.defaultPrevented)return;let m=i(d);if(m===null||!m.getRootNode().contains(m)||!m.isConnected)return;let g=(function y(u){return typeof u=="function"?y(u()):Array.isArray(u)||u instanceof Set?u:[u]})(r);for(let y of g)if(y!==null&&(y.contains(m)||d.composed&&d.composedPath().includes(y)))return;return!Ka(m,xr.Loose)&&m.tabIndex!==-1&&d.preventDefault(),s.current(d,m)},[s,r]),l=o.useRef(null);Ke(e,"pointerdown",d=>{var i,m;Ut()||(l.current=((m=(i=d.composedPath)==null?void 0:i.call(d))==null?void 0:m[0])||d.target)},!0),Ke(e,"pointerup",d=>{if(Ut()||!l.current)return;let i=l.current;return l.current=null,n(d,()=>i)},!0);let c=o.useRef({x:0,y:0});Ke(e,"touchstart",d=>{c.current.x=d.touches[0].clientX,c.current.y=d.touches[0].clientY},!0),Ke(e,"touchend",d=>{let i={x:d.changedTouches[0].clientX,y:d.changedTouches[0].clientY};if(!(Math.abs(i.x-c.current.x)>=Ht||Math.abs(i.y-c.current.y)>=Ht))return n(d,()=>ge(d.target)?d.target:null)},!0),pr(e,"blur",d=>n(d,()=>va(window.document.activeElement)?window.document.activeElement:null),!0)}function wt(...e){return o.useMemo(()=>Ue(...e),[...e])}function yr(e,r,a,s){let n=je(a);o.useEffect(()=>{e=e??window;function l(c){n.current(c)}return e.addEventListener(r,l,s),()=>e.removeEventListener(r,l,s)},[e,r,s])}function Za(e){return o.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function es(e,r){let a=e(),s=new Set;return{getSnapshot(){return a},subscribe(n){return s.add(n),()=>s.delete(n)},dispatch(n,...l){let c=r[n].call(a,...l);c&&(a=c,s.forEach(d=>d()))}}}function ts(){let e;return{before({doc:r}){var a;let s=r.documentElement,n=(a=r.defaultView)!=null?a:window;e=Math.max(0,n.innerWidth-s.clientWidth)},after({doc:r,d:a}){let s=r.documentElement,n=Math.max(0,s.clientWidth-s.offsetWidth),l=Math.max(0,e-n);a.style(s,"paddingRight",`${l}px`)}}}function rs(){return fr()?{before({doc:e,d:r,meta:a}){function s(n){for(let l of a().containers)for(let c of l())if(c.contains(n))return!0;return!1}r.microTask(()=>{var n;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let d=ce();d.style(e.documentElement,"scrollBehavior","auto"),r.add(()=>r.microTask(()=>d.dispose()))}let l=(n=window.scrollY)!=null?n:window.pageYOffset,c=null;r.addEventListener(e,"click",d=>{if(ge(d.target))try{let i=d.target.closest("a");if(!i)return;let{hash:m}=new URL(i.href),g=e.querySelector(m);ge(g)&&!s(g)&&(c=g)}catch{}},!0),r.group(d=>{r.addEventListener(e,"touchstart",i=>{if(d.dispose(),ge(i.target)&&ba(i.target))if(s(i.target)){let m=i.target;for(;m.parentElement&&s(m.parentElement);)m=m.parentElement;d.style(m,"overscrollBehavior","contain")}else d.style(i.target,"touchAction","none")})}),r.addEventListener(e,"touchmove",d=>{if(ge(d.target)){if(ja(d.target))return;if(s(d.target)){let i=d.target;for(;i.parentElement&&i.dataset.headlessuiPortal!==""&&!(i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth);)i=i.parentElement;i.dataset.headlessuiPortal===""&&d.preventDefault()}else d.preventDefault()}},{passive:!1}),r.add(()=>{var d;let i=(d=window.scrollY)!=null?d:window.pageYOffset;l!==i&&window.scrollTo(0,l),c&&c.isConnected&&(c.scrollIntoView({block:"nearest"}),c=null)})})}}:{}}function as(){return{before({doc:e,d:r}){r.style(e.documentElement,"overflow","hidden")}}}function Bt(e){let r={};for(let a of e)Object.assign(r,a(r));return r}let be=es(()=>new Map,{PUSH(e,r){var a;let s=(a=this.get(e))!=null?a:{doc:e,count:0,d:ce(),meta:new Set,computedMeta:{}};return s.count++,s.meta.add(r),s.computedMeta=Bt(s.meta),this.set(e,s),this},POP(e,r){let a=this.get(e);return a&&(a.count--,a.meta.delete(r),a.computedMeta=Bt(a.meta)),this},SCROLL_PREVENT(e){let r={doc:e.doc,d:e.d,meta(){return e.computedMeta}},a=[rs(),ts(),as()];a.forEach(({before:s})=>s?.(r)),a.forEach(({after:s})=>s?.(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});be.subscribe(()=>{let e=be.getSnapshot(),r=new Map;for(let[a]of e)r.set(a,a.documentElement.style.overflow);for(let a of e.values()){let s=r.get(a.doc)==="hidden",n=a.count!==0;(n&&!s||!n&&s)&&be.dispatch(a.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",a),a.count===0&&be.dispatch("TEARDOWN",a)}});function ss(e,r,a=()=>({containers:[]})){let s=Za(be),n=r?s.get(r):void 0,l=n?n.count>0:!1;return H(()=>{if(!(!r||!e))return be.dispatch("PUSH",r,a),()=>be.dispatch("POP",r,a)},[e,r]),l}function ns(e,r,a=()=>[document.body]){let s=Be(e,"scroll-lock");ss(s,r,n=>{var l;return{containers:[...(l=n.containers)!=null?l:[],a]}})}function ls(e=0){let[r,a]=o.useState(e),s=o.useCallback(i=>a(i),[]),n=o.useCallback(i=>a(m=>m|i),[]),l=o.useCallback(i=>(r&i)===i,[r]),c=o.useCallback(i=>a(m=>m&~i),[]),d=o.useCallback(i=>a(m=>m^i),[]);return{flags:r,setFlag:s,addFlag:n,hasFlag:l,removeFlag:c,toggleFlag:d}}var is={},zt,Wt;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((zt=process==null?void 0:is)==null?void 0:zt.NODE_ENV)==="test"&&typeof((Wt=Element?.prototype)==null?void 0:Wt.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var os=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(os||{});function ds(e){let r={};for(let a in e)e[a]===!0&&(r[`data-${a}`]="");return r}function cs(e,r,a,s){let[n,l]=o.useState(a),{hasFlag:c,addFlag:d,removeFlag:i}=ls(e&&n?3:0),m=o.useRef(!1),g=o.useRef(!1),y=Je();return H(()=>{var u;if(e){if(a&&l(!0),!r){a&&d(3);return}return(u=s?.start)==null||u.call(s,a),us(r,{inFlight:m,prepare(){g.current?g.current=!1:g.current=m.current,m.current=!0,!g.current&&(a?(d(3),i(4)):(d(4),i(2)))},run(){g.current?a?(i(3),d(4)):(i(4),d(3)):a?i(1):d(1)},done(){var p;g.current&&hs(r)||(m.current=!1,i(7),a||l(!1),(p=s?.end)==null||p.call(s,a))}})}},[e,a,r,y]),e?[n,{closed:c(1),enter:c(2),leave:c(4),transition:c(2)||c(4)}]:[a,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function us(e,{prepare:r,run:a,done:s,inFlight:n}){let l=ce();return gs(e,{prepare:r,inFlight:n}),l.nextFrame(()=>{a(),l.requestAnimationFrame(()=>{l.add(ms(e,s))})}),l.dispose}function ms(e,r){var a,s;let n=ce();if(!e)return n.dispose;let l=!1;n.add(()=>{l=!0});let c=(s=(a=e.getAnimations)==null?void 0:a.call(e).filter(d=>d instanceof CSSTransition))!=null?s:[];return c.length===0?(r(),n.dispose):(Promise.allSettled(c.map(d=>d.finished)).then(()=>{l||r()}),n.dispose)}function gs(e,{inFlight:r,prepare:a}){if(r!=null&&r.current){a();return}let s=e.style.transition;e.style.transition="none",a(),e.offsetHeight,e.style.transition=s}function hs(e){var r,a;return((a=(r=e.getAnimations)==null?void 0:r.call(e))!=null?a:[]).some(s=>s instanceof CSSTransition&&s.playState!=="finished")}function Nt(e,r){let a=o.useRef([]),s=$(e);o.useEffect(()=>{let n=[...a.current];for(let[l,c]of r.entries())if(a.current[l]!==c){let d=s(r,n);return a.current=r,d}},[s,...r])}let Qe=o.createContext(null);Qe.displayName="OpenClosedContext";var X=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(X||{});function Ze(){return o.useContext(Qe)}function xs({value:e,children:r}){return k.createElement(Qe.Provider,{value:e},r)}function fs({children:e}){return k.createElement(Qe.Provider,{value:null},e)}function ps(e){function r(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",r))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",r),r())}let ue=[];ps(()=>{function e(r){if(!ge(r.target)||r.target===document.body||ue[0]===r.target)return;let a=r.target;a=a.closest(Ge),ue.unshift(a??r.target),ue=ue.filter(s=>s!=null&&s.isConnected),ue.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function br(e){let r=$(e),a=o.useRef(!1);o.useEffect(()=>(a.current=!1,()=>{a.current=!0,Xe(()=>{a.current&&r()})}),[r])}let vr=o.createContext(!1);function ys(){return o.useContext(vr)}function Kt(e){return k.createElement(vr.Provider,{value:e.force},e.children)}function bs(e){let r=ys(),a=o.useContext(kr),[s,n]=o.useState(()=>{var l;if(!r&&a!==null)return(l=a.current)!=null?l:null;if(te.isServer)return null;let c=e?.getElementById("headlessui-portal-root");if(c)return c;if(e===null)return null;let d=e.createElement("div");return d.setAttribute("id","headlessui-portal-root"),e.body.appendChild(d)});return o.useEffect(()=>{s!==null&&(e!=null&&e.body.contains(s)||e==null||e.body.appendChild(s))},[s,e]),o.useEffect(()=>{r||a!==null&&n(a.current)},[a,n,r]),s}let jr=o.Fragment,vs=B(function(e,r){let{ownerDocument:a=null,...s}=e,n=o.useRef(null),l=re(ka(u=>{n.current=u}),r),c=wt(n.current),d=a??c,i=bs(d),m=o.useContext(pt),g=Je(),y=q();return br(()=>{var u;i&&i.childNodes.length<=0&&((u=i.parentElement)==null||u.removeChild(i))}),i?Ar.createPortal(k.createElement("div",{"data-headlessui-portal":"",ref:u=>{g.dispose(),m&&u&&g.add(m.register(u))}},y({ourProps:{ref:l},theirProps:s,slot:{},defaultTag:jr,name:"Portal"})),i):null});function js(e,r){let a=re(r),{enabled:s=!0,ownerDocument:n,...l}=e,c=q();return s?k.createElement(vs,{...l,ownerDocument:n,ref:a}):c({ourProps:{ref:a},theirProps:l,slot:{},defaultTag:jr,name:"Portal"})}let ks=o.Fragment,kr=o.createContext(null);function ws(e,r){let{target:a,...s}=e,n={ref:re(r)},l=q();return k.createElement(kr.Provider,{value:a},l({ourProps:n,theirProps:s,defaultTag:ks,name:"Popover.Group"}))}let pt=o.createContext(null);function Ns(){let e=o.useContext(pt),r=o.useRef([]),a=$(l=>(r.current.push(l),e&&e.register(l),()=>s(l))),s=$(l=>{let c=r.current.indexOf(l);c!==-1&&r.current.splice(c,1),e&&e.unregister(l)}),n=o.useMemo(()=>({register:a,unregister:s,portals:r}),[a,s,r]);return[r,o.useMemo(()=>function({children:l}){return k.createElement(pt.Provider,{value:n},l)},[n])]}let Ss=B(js),wr=B(ws),Cs=Object.assign(Ss,{Group:wr});function Es(e,r=typeof document<"u"?document.defaultView:null,a){let s=Be(e,"escape");yr(r,"keydown",n=>{s&&(n.defaultPrevented||n.key===or.Escape&&a(n))})}function Fs(){var e;let[r]=o.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[a,s]=o.useState((e=r?.matches)!=null?e:!1);return H(()=>{if(!r)return;function n(l){s(l.matches)}return r.addEventListener("change",n),()=>r.removeEventListener("change",n)},[r]),a}function $s({defaultContainers:e=[],portals:r,mainTreeNode:a}={}){let s=$(()=>{var n,l;let c=Ue(a),d=[];for(let i of e)i!==null&&(he(i)?d.push(i):"current"in i&&he(i.current)&&d.push(i.current));if(r!=null&&r.current)for(let i of r.current)d.push(i);for(let i of(n=c?.querySelectorAll("html > *, body > *"))!=null?n:[])i!==document.body&&i!==document.head&&he(i)&&i.id!=="headlessui-portal-root"&&(a&&(i.contains(a)||i.contains((l=a?.getRootNode())==null?void 0:l.host))||d.some(m=>i.contains(m))||d.push(i));return d});return{resolveContainers:s,contains:$(n=>s().some(l=>l.contains(n)))}}let Nr=o.createContext(null);function Yt({children:e,node:r}){let[a,s]=o.useState(null),n=Sr(r??a);return k.createElement(Nr.Provider,{value:n},e,n===null&&k.createElement(ht,{features:qe.Hidden,ref:l=>{var c,d;if(l){for(let i of(d=(c=Ue(l))==null?void 0:c.querySelectorAll("html > *, body > *"))!=null?d:[])if(i!==document.body&&i!==document.head&&he(i)&&i!=null&&i.contains(l)){s(i);break}}}}))}function Sr(e=null){var r;return(r=o.useContext(Nr))!=null?r:e}function Ts(){let e=typeof document>"u";return"useSyncExternalStore"in Tt?(r=>r.useSyncExternalStore)(Tt)(()=>()=>{},()=>!1,()=>!e):!1}function et(){let e=Ts(),[r,a]=o.useState(te.isHandoffComplete);return r&&te.isHandoffComplete===!1&&a(!1),o.useEffect(()=>{r!==!0&&a(!0)},[r]),o.useEffect(()=>te.handoff(),[]),e?!1:r}function St(){let e=o.useRef(!1);return H(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Oe=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Oe||{});function _s(){let e=o.useRef(0);return pr(!0,"keydown",r=>{r.key==="Tab"&&(e.current=r.shiftKey?1:0)},!0),e}function Cr(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let r=new Set;for(let a of e.current)he(a.current)&&r.add(a.current);return r}let Is="div";var ye=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(ye||{});function Ds(e,r){let a=o.useRef(null),s=re(a,r),{initialFocus:n,initialFocusFallback:l,containers:c,features:d=15,...i}=e;et()||(d=0);let m=wt(a.current);Os(d,{ownerDocument:m});let g=Ls(d,{ownerDocument:m,container:a,initialFocus:n,initialFocusFallback:l});Ms(d,{ownerDocument:m,container:a,containers:c,previousActiveElement:g});let y=_s(),u=$(j=>{if(!ve(a.current))return;let S=a.current;(N=>N())(()=>{de(y.current,{[Oe.Forwards]:()=>{Ve(S,ie.First,{skipElements:[j.relatedTarget,l]})},[Oe.Backwards]:()=>{Ve(S,ie.Last,{skipElements:[j.relatedTarget,l]})}})})}),p=Be(!!(d&2),"focus-trap#tab-lock"),h=Je(),b=o.useRef(!1),v={ref:s,onKeyDown(j){j.key=="Tab"&&(b.current=!0,h.requestAnimationFrame(()=>{b.current=!1}))},onBlur(j){if(!(d&4))return;let S=Cr(c);ve(a.current)&&S.add(a.current);let N=j.relatedTarget;ge(N)&&N.dataset.headlessuiFocusGuard!=="true"&&(Er(S,N)||(b.current?Ve(a.current,de(y.current,{[Oe.Forwards]:()=>ie.Next,[Oe.Backwards]:()=>ie.Previous})|ie.WrapAround,{relativeTo:j.target}):ge(j.target)&&oe(j.target)))}},w=q();return k.createElement(k.Fragment,null,p&&k.createElement(ht,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:qe.Focusable}),w({ourProps:v,theirProps:i,defaultTag:Is,name:"FocusTrap"}),p&&k.createElement(ht,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:qe.Focusable}))}let Ps=B(Ds),Rs=Object.assign(Ps,{features:ye});function As(e=!0){let r=o.useRef(ue.slice());return Nt(([a],[s])=>{s===!0&&a===!1&&Xe(()=>{r.current.splice(0)}),s===!1&&a===!0&&(r.current=ue.slice())},[e,ue,r]),$(()=>{var a;return(a=r.current.find(s=>s!=null&&s.isConnected))!=null?a:null})}function Os(e,{ownerDocument:r}){let a=!!(e&8),s=As(a);Nt(()=>{a||oa(r?.body)&&oe(s())},[a]),br(()=>{a&&oe(s())})}function Ls(e,{ownerDocument:r,container:a,initialFocus:s,initialFocusFallback:n}){let l=o.useRef(null),c=Be(!!(e&1),"focus-trap#initial-focus"),d=St();return Nt(()=>{if(e===0)return;if(!c){n!=null&&n.current&&oe(n.current);return}let i=a.current;i&&Xe(()=>{if(!d.current)return;let m=r?.activeElement;if(s!=null&&s.current){if(s?.current===m){l.current=m;return}}else if(i.contains(m)){l.current=m;return}if(s!=null&&s.current)oe(s.current);else{if(e&16){if(Ve(i,ie.First|ie.AutoFocus)!==ft.Error)return}else if(Ve(i,ie.First)!==ft.Error)return;if(n!=null&&n.current&&(oe(n.current),r?.activeElement===n.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}l.current=r?.activeElement})},[n,c,e]),l}function Ms(e,{ownerDocument:r,container:a,containers:s,previousActiveElement:n}){let l=St(),c=!!(e&4);yr(r?.defaultView,"focus",d=>{if(!c||!l.current)return;let i=Cr(s);ve(a.current)&&i.add(a.current);let m=n.current;if(!m)return;let g=d.target;ve(g)?Er(i,g)?(n.current=g,oe(g)):(d.preventDefault(),d.stopPropagation(),oe(m)):oe(n.current)},!0)}function Er(e,r){for(let a of e)if(a.contains(r))return!0;return!1}function Fr(e){var r;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Le((r=e.as)!=null?r:Tr)||k.Children.count(e.children)===1}let tt=o.createContext(null);tt.displayName="TransitionContext";var Vs=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Vs||{});function Us(){let e=o.useContext(tt);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Hs(){let e=o.useContext(rt);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let rt=o.createContext(null);rt.displayName="NestingContext";function at(e){return"children"in e?at(e.children):e.current.filter(({el:r})=>r.current!==null).filter(({state:r})=>r==="visible").length>0}function $r(e,r){let a=je(e),s=o.useRef([]),n=St(),l=Je(),c=$((p,h=me.Hidden)=>{let b=s.current.findIndex(({el:v})=>v===p);b!==-1&&(de(h,{[me.Unmount](){s.current.splice(b,1)},[me.Hidden](){s.current[b].state="hidden"}}),l.microTask(()=>{var v;!at(s)&&n.current&&((v=a.current)==null||v.call(a))}))}),d=$(p=>{let h=s.current.find(({el:b})=>b===p);return h?h.state!=="visible"&&(h.state="visible"):s.current.push({el:p,state:"visible"}),()=>c(p,me.Unmount)}),i=o.useRef([]),m=o.useRef(Promise.resolve()),g=o.useRef({enter:[],leave:[]}),y=$((p,h,b)=>{i.current.splice(0),r&&(r.chains.current[h]=r.chains.current[h].filter(([v])=>v!==p)),r?.chains.current[h].push([p,new Promise(v=>{i.current.push(v)})]),r?.chains.current[h].push([p,new Promise(v=>{Promise.all(g.current[h].map(([w,j])=>j)).then(()=>v())})]),h==="enter"?m.current=m.current.then(()=>r?.wait.current).then(()=>b(h)):b(h)}),u=$((p,h,b)=>{Promise.all(g.current[h].splice(0).map(([v,w])=>w)).then(()=>{var v;(v=i.current.shift())==null||v()}).then(()=>b(h))});return o.useMemo(()=>({children:s,register:d,unregister:c,onStart:y,onStop:u,wait:m,chains:g}),[d,c,s,y,u,g,m])}let Tr=o.Fragment,_r=Ye.RenderStrategy;function Bs(e,r){var a,s;let{transition:n=!0,beforeEnter:l,afterEnter:c,beforeLeave:d,afterLeave:i,enter:m,enterFrom:g,enterTo:y,entered:u,leave:p,leaveFrom:h,leaveTo:b,...v}=e,[w,j]=o.useState(null),S=o.useRef(null),N=Fr(e),T=re(...N?[S,r,j]:r===null?[]:[r]),O=(a=v.unmount)==null||a?me.Unmount:me.Hidden,{show:P,appear:ae,initial:se}=Us(),[D,W]=o.useState(P?"visible":"hidden"),I=Hs(),{register:R,unregister:M}=I;H(()=>R(S),[R,S]),H(()=>{if(O===me.Hidden&&S.current){if(P&&D!=="visible"){W("visible");return}return de(D,{hidden:()=>M(S),visible:()=>R(S)})}},[D,S,R,M,P,O]);let f=et();H(()=>{if(N&&f&&D==="visible"&&S.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[S,D,f,N]);let _=se&&!ae,J=ae&&P&&se,L=o.useRef(!1),Q=$r(()=>{L.current||(W("hidden"),M(S))},I),ke=$($e=>{L.current=!0;let ne=$e?"enter":"leave";Q.onStart(S,ne,fe=>{fe==="enter"?l?.():fe==="leave"&&d?.()})}),Z=$($e=>{let ne=$e?"enter":"leave";L.current=!1,Q.onStop(S,ne,fe=>{fe==="enter"?c?.():fe==="leave"&&i?.()}),ne==="leave"&&!at(Q)&&(W("hidden"),M(S))});o.useEffect(()=>{N&&n||(ke(P),Z(P))},[P,N,n]);let we=!(!n||!N||!f||_),[,C]=cs(we,w,P,{start:ke,end:Z}),Ne=pe({ref:T,className:((s=gt(v.className,J&&m,J&&g,C.enter&&m,C.enter&&C.closed&&g,C.enter&&!C.closed&&y,C.leave&&p,C.leave&&!C.closed&&h,C.leave&&C.closed&&b,!C.transition&&P&&u))==null?void 0:s.trim())||void 0,...ds(C)}),xe=0;D==="visible"&&(xe|=X.Open),D==="hidden"&&(xe|=X.Closed),P&&D==="hidden"&&(xe|=X.Opening),!P&&D==="visible"&&(xe|=X.Closing);let nt=q();return k.createElement(rt.Provider,{value:Q},k.createElement(xs,{value:xe},nt({ourProps:Ne,theirProps:v,defaultTag:Tr,features:_r,visible:D==="visible",name:"Transition.Child"})))}function zs(e,r){let{show:a,appear:s=!1,unmount:n=!0,...l}=e,c=o.useRef(null),d=Fr(e),i=re(...d?[c,r]:r===null?[]:[r]);et();let m=Ze();if(a===void 0&&m!==null&&(a=(m&X.Open)===X.Open),a===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[g,y]=o.useState(a?"visible":"hidden"),u=$r(()=>{a||y("hidden")}),[p,h]=o.useState(!0),b=o.useRef([a]);H(()=>{p!==!1&&b.current[b.current.length-1]!==a&&(b.current.push(a),h(!1))},[b,a]);let v=o.useMemo(()=>({show:a,appear:s,initial:p}),[a,s,p]);H(()=>{a?y("visible"):!at(u)&&c.current!==null&&y("hidden")},[a,u]);let w={unmount:n},j=$(()=>{var T;p&&h(!1),(T=e.beforeEnter)==null||T.call(e)}),S=$(()=>{var T;p&&h(!1),(T=e.beforeLeave)==null||T.call(e)}),N=q();return k.createElement(rt.Provider,{value:u},k.createElement(tt.Provider,{value:v},N({ourProps:{...w,as:o.Fragment,children:k.createElement(Ir,{ref:i,...w,...l,beforeEnter:j,beforeLeave:S})},theirProps:{},defaultTag:o.Fragment,features:_r,visible:g==="visible",name:"Transition"})))}function Ws(e,r){let a=o.useContext(tt)!==null,s=Ze()!==null;return k.createElement(k.Fragment,null,!a&&s?k.createElement(yt,{ref:r,...e}):k.createElement(Ir,{ref:r,...e}))}let yt=B(zs),Ir=B(Bs),Ct=B(Ws),Ks=Object.assign(yt,{Child:Ct,Root:yt});var Ys=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ys||{}),qs=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(qs||{});let Gs={0(e,r){return e.titleId===r.id?e:{...e,titleId:r.id}}},Et=o.createContext(null);Et.displayName="DialogContext";function st(e){let r=o.useContext(Et);if(r===null){let a=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,st),a}return r}function Xs(e,r){return de(r.type,Gs,e,r)}let qt=B(function(e,r){let a=o.useId(),{id:s=`headlessui-dialog-${a}`,open:n,onClose:l,initialFocus:c,role:d="dialog",autoFocus:i=!0,__demoMode:m=!1,unmount:g=!1,...y}=e,u=o.useRef(!1);d=(function(){return d==="dialog"||d==="alertdialog"?d:(u.current||(u.current=!0,console.warn(`Invalid role [${d}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let p=Ze();n===void 0&&p!==null&&(n=(p&X.Open)===X.Open);let h=o.useRef(null),b=re(h,r),v=wt(h.current),w=n?0:1,[j,S]=o.useReducer(Xs,{titleId:null,descriptionId:null,panelRef:o.createRef()}),N=$(()=>l(!1)),T=$(C=>S({type:0,id:C})),O=et()?w===0:!1,[P,ae]=Ns(),se={get current(){var C;return(C=j.panelRef.current)!=null?C:h.current}},D=Sr(),{resolveContainers:W}=$s({mainTreeNode:D,portals:P,defaultContainers:[se]}),I=p!==null?(p&X.Closing)===X.Closing:!1;Va(m||I?!1:O,{allowed:$(()=>{var C,Ne;return[(Ne=(C=h.current)==null?void 0:C.closest("[data-headlessui-portal]"))!=null?Ne:null]}),disallowed:$(()=>{var C;return[(C=D?.closest("body > *:not(#headlessui-portal-root)"))!=null?C:null]})});let R=gr.get(null);H(()=>{if(O)return R.actions.push(s),()=>R.actions.pop(s)},[R,s,O]);let M=hr(R,o.useCallback(C=>R.selectors.isTop(C,s),[R,s]));Qa(M,W,C=>{C.preventDefault(),N()}),Es(M,v?.defaultView,C=>{C.preventDefault(),C.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),N()}),ns(m||I?!1:O,v,W),Ua(O,h,N);let[f,_]=wa(),J=o.useMemo(()=>[{dialogState:w,close:N,setTitleId:T,unmount:g},j],[w,N,T,g,j]),L=He({open:w===0}),Q={ref:b,id:s,role:d,tabIndex:-1,"aria-modal":m?void 0:w===0?!0:void 0,"aria-labelledby":j.titleId,"aria-describedby":f,unmount:g},ke=!Fs(),Z=ye.None;O&&!m&&(Z|=ye.RestoreFocus,Z|=ye.TabLock,i&&(Z|=ye.AutoFocus),ke&&(Z|=ye.InitialFocus));let we=q();return k.createElement(fs,null,k.createElement(Kt,{force:!0},k.createElement(Cs,null,k.createElement(Et.Provider,{value:J},k.createElement(wr,{target:h},k.createElement(Kt,{force:!1},k.createElement(_,{slot:L},k.createElement(ae,null,k.createElement(Rs,{initialFocus:c,initialFocusFallback:h,containers:W,features:Z},k.createElement($a,{value:N},we({ourProps:Q,theirProps:y,slot:L,defaultTag:Js,features:Qs,visible:w===0,name:"Dialog"})))))))))))}),Js="div",Qs=Ye.RenderStrategy|Ye.Static;function Zs(e,r){let{transition:a=!1,open:s,...n}=e,l=Ze(),c=e.hasOwnProperty("open")||l!==null,d=e.hasOwnProperty("onClose");if(!c&&!d)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!c)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!d)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!l&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(s!==void 0||a)&&!n.static?k.createElement(Yt,null,k.createElement(Ks,{show:s,transition:a,unmount:n.unmount},k.createElement(qt,{ref:r,...n}))):k.createElement(Yt,null,k.createElement(qt,{ref:r,open:s,...n}))}let en="div";function tn(e,r){let a=o.useId(),{id:s=`headlessui-dialog-panel-${a}`,transition:n=!1,...l}=e,[{dialogState:c,unmount:d},i]=st("Dialog.Panel"),m=re(r,i.panelRef),g=He({open:c===0}),y=$(v=>{v.stopPropagation()}),u={ref:m,id:s,onClick:y},p=n?Ct:o.Fragment,h=n?{unmount:d}:{},b=q();return k.createElement(p,{...h},b({ourProps:u,theirProps:l,slot:g,defaultTag:en,name:"Dialog.Panel"}))}let rn="div";function an(e,r){let{transition:a=!1,...s}=e,[{dialogState:n,unmount:l}]=st("Dialog.Backdrop"),c=He({open:n===0}),d={ref:r,"aria-hidden":!0},i=a?Ct:o.Fragment,m=a?{unmount:l}:{},g=q();return k.createElement(i,{...m},g({ourProps:d,theirProps:s,slot:c,defaultTag:rn,name:"Dialog.Backdrop"}))}let sn="h2";function nn(e,r){let a=o.useId(),{id:s=`headlessui-dialog-title-${a}`,...n}=e,[{dialogState:l,setTitleId:c}]=st("Dialog.Title"),d=re(r);o.useEffect(()=>(c(s),()=>c(null)),[s,c]);let i=He({open:l===0}),m={ref:d,id:s};return q()({ourProps:m,theirProps:n,slot:i,defaultTag:sn,name:"Dialog.Title"})}let ln=B(Zs),on=B(tn);B(an);let dn=B(nn),ut=Object.assign(ln,{Panel:on,Title:dn,Description:Ea});function cn({isOpen:e,onClose:r,selectedForms:a,onSuccess:s}){const[n,l]=o.useState(!1),[c,d]=o.useState(!1),[i,m]=o.useState(!0),[g,y]=o.useState(""),[u,p]=o.useState(`ICS-212 Forms - ${a.length} Inspection${a.length>1?"s":""}`),[h,b]=o.useState(""),v=async()=>{const w=g.split(",").map(j=>j.trim()).filter(j=>j&&j.includes("@"));if(!c&&!i&&w.length===0){lt.error("Please specify at least one recipient");return}l(!0);try{const j=await fetch(`${G}/api/ics212/forms/batch-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formIds:a.map(N=>N.form_id),recipientOptions:{sendToInspectors:c,sendToAdmins:i,customRecipients:w},emailTemplate:{subject:u,body:h||void 0}})}),S=await j.json();if(!j.ok)throw new Error(S.error||"Failed to send email");lt.success(`Email sent successfully to ${S.recipients} recipient(s)!`),s(),r()}catch(j){console.error("Email send error:",j),lt.error(j.message||"Failed to send email")}finally{l(!1)}};return t.jsx(bt,{children:e&&t.jsxs(ut,{static:!0,open:e,onClose:r,className:"relative z-50",children:[t.jsx(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50"}),t.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:t.jsxs(ut.Panel,{as:Y.div,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-lg shadow-xl overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(rr,{className:"w-6 h-6 text-blue-600"}),t.jsx(ut.Title,{className:"text-xl font-semibold",children:"Email ICS-212 Forms"})]}),t.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:t.jsx(jt,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"px-6 py-4 max-h-[70vh] overflow-y-auto space-y-4",children:[t.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:t.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[a.length," form",a.length>1?"s":""," will be emailed as PDF attachments"]})}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Recipients"}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:c,onChange:w=>d(w.target.checked),className:"w-4 h-4 rounded border-gray-300"}),t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Send to Inspectors (if email available)"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:i,onChange:w=>m(w.target.checked),className:"w-4 h-4 rounded border-gray-300"}),t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Send to Admins"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional Recipients (comma-separated)"}),t.jsx("input",{type:"text",value:g,onChange:w=>y(w.target.value),placeholder:"email1@example.com, email2@example.com",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subject"}),t.jsx("input",{type:"text",value:u,onChange:w=>p(w.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Custom Message (Optional)"}),t.jsx("textarea",{value:h,onChange:w=>b(w.target.value),placeholder:"Leave blank to use default template",rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"If left blank, a professional template with form details will be used"})]})]}),t.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[t.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",disabled:n,children:"Cancel"}),t.jsx("button",{onClick:v,disabled:n,className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:n?t.jsxs(t.Fragment,{children:[t.jsx(Dt,{className:"w-4 h-4 animate-pulse"}),"Sending..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Dt,{className:"w-4 h-4"}),"Send Email"]})})]})]})})]})})}function un(){const[e,r]=o.useState([]),[a,s]=o.useState(!0),[n,l]=o.useState(1),[c,d]=o.useState(1),[i,m]=o.useState(""),[g,y]=o.useState("all"),[u,p]=o.useState("all"),[h,b]=o.useState(""),[v,w]=o.useState(""),[j,S]=o.useState(null),[N,T]=o.useState(null),[O,P]=o.useState(!1),[ae,se]=o.useState(null),[D,W]=o.useState(null),[I,R]=o.useState([]),[M,f]=o.useState(!1),[_,J]=o.useState(!1),L=o.useCallback(async(x=1,F=!1)=>{F||s(!0);try{const z=[];if(g==="all"||g==="ICS212"){const V=new URLSearchParams({page:x.toString(),limit:"20",sortBy:"date",sortOrder:"desc"});i&&V.set("search",i),u!=="all"&&V.set("status",u),h&&V.set("from",h),v&&V.set("to",v),z.push(fetch(`${G}/ics212/forms?${V}`).then(U=>U.ok?U.json():{forms:[]}).then(U=>U.forms.map(le=>({...le,formType:"ICS212"}))))}if(g==="all"||g==="ICS218"){const V=new URLSearchParams({limit:"20",offset:((x-1)*20).toString()});i&&V.set("incident",i),z.push(fetch(`${vt.ics218Forms}?${V}`).then(U=>U.ok?U.json():{forms:[]}).then(U=>U.forms.map(le=>({...le,formType:"ICS218"}))))}const Te=(await Promise.all(z)).flat();Te.sort((V,U)=>new Date(U.created_at).getTime()-new Date(V.created_at).getTime()),r(F?V=>[...V,...Te]:Te),d(Te.length>=20?x+1:x),l(x)}catch(z){console.error("Error fetching forms:",z),A({message:"Failed to load forms",type:"error"})}finally{s(!1)}},[i,g,u,h,v]);o.useEffect(()=>{L(1,!1)},[i,g,u,h,v]);const Q=async()=>{await L(1,!1)},ke=()=>{n<c&&!a&&L(n+1,!0)},Z=async x=>{if(!x.pdf_url){A({message:"PDF not available",type:"error"});return}window.open(x.pdf_url,"_blank")},we=(x,F)=>{S(x),T(F)},C=x=>{se(x),P(!0)},Ne=async x=>{W(x);try{const F=await fetch(`${G}/ics212/forms/${x}/regenerate-pdf`,{method:"POST"});if(!F.ok){const z=await F.json();throw new Error(z.error||"Failed to regenerate PDF")}A({message:"PDF regenerated successfully",type:"success"}),await L(1,!1)}catch(F){console.error("Error regenerating PDF:",F),A({message:F instanceof Error?F.message:"Failed to regenerate PDF",type:"error"})}finally{W(null)}},xe=async()=>{await L(1,!1)},nt=x=>{R(F=>F.includes(x)?F.filter(z=>z!==x):[...F,x])},$e=()=>{const x=e.filter(F=>F.formType==="ICS212").map(F=>F.form_id);x.length>50?(A({message:"Maximum 50 forms can be downloaded at once. First 50 selected.",type:"warning"}),R(x.slice(0,50))):R(x)},ne=()=>{R([])},fe=async()=>{if(I.length!==0){f(!0);try{const x=await fetch(`${G}/ics212/forms/batch-download`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formIds:I})});if(!x.ok){const Rr=await x.json();throw new Error(Rr.error||"Failed to download forms")}const F=x.headers.get("X-Success-Count"),z=x.headers.get("X-Failure-Count"),Ft=await x.blob(),V=x.headers.get("Content-Disposition")?.split("filename=")[1]?.replace(/"/g,"")||"ICS212_Forms.zip",U=window.URL.createObjectURL(Ft),le=document.createElement("a");le.href=U,le.download=V,document.body.appendChild(le),le.click(),document.body.removeChild(le),window.URL.revokeObjectURL(U);let $t=`Downloaded ${F||I.length} forms`;z&&parseInt(z)>0&&($t+=` (${z} PDFs not available)`),A({message:$t,type:"success"}),ne()}catch(x){console.error("Batch download error:",x),A({message:x instanceof Error?x.message:"Failed to download forms",type:"error"})}finally{f(!1)}}},Dr=x=>x==="ICS212"?t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"ICS 212"}):t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"ICS 218"}),Pr=x=>x==="hold"?t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"ðŸ”´ HOLD"}):t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"ðŸŸ¢ RELEASED"});return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 space-y-4",children:[t.jsx("div",{children:t.jsx("input",{type:"search",placeholder:"Search by vehicle ID, incident, or inspector...",value:i,onChange:x=>m(x.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Form Type"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(E,{children:t.jsx("button",{onClick:()=>y("all"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${g==="all"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"All Forms"})}),t.jsx(E,{children:t.jsx("button",{onClick:()=>y("ICS212"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${g==="ICS212"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"ICS 212"})}),t.jsx(E,{children:t.jsx("button",{onClick:()=>y("ICS218"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${g==="ICS218"?"bg-orange-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"ICS 218"})})]})]}),(g==="all"||g==="ICS212")&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status (ICS 212)"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(E,{children:t.jsx("button",{onClick:()=>p("all"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${u==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"All"})}),t.jsx(E,{children:t.jsx("button",{onClick:()=>p("hold"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${u==="hold"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"HOLD"})}),t.jsx(E,{children:t.jsx("button",{onClick:()=>p("release"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${u==="release"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"RELEASED"})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"From Date"}),t.jsx("input",{type:"date",value:h,onChange:x=>b(x.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"To Date"}),t.jsx("input",{type:"date",value:v,onChange:x=>w(x.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]})]}),I.length>0&&t.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg shadow-sm p-4",children:t.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[I.length," form",I.length>1?"s":""," selected"]}),t.jsx(E,{children:t.jsx("button",{onClick:ne,className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Clear Selection"})})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(E,{children:t.jsx("button",{onClick:fe,disabled:M,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium text-sm",children:M?t.jsxs(t.Fragment,{children:[t.jsx(Pt,{className:"w-4 h-4 animate-spin"}),"Downloading..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Jr,{className:"w-4 h-4"}),"Download Selected (",I.length,")"]})})}),t.jsx(E,{children:t.jsxs("button",{onClick:()=>{if(I.length>10){A({message:"Maximum 10 forms can be emailed at once",type:"warning"});return}J(!0)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium text-sm",children:[t.jsx(rr,{className:"w-4 h-4"}),"Email Selected (",I.length,")"]})})]})]})}),!a&&e.filter(x=>x.formType==="ICS212").length>0&&t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-3",children:t.jsx(E,{children:t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:I.length>0&&I.length===e.filter(x=>x.formType==="ICS212").length,onChange:x=>x.target.checked?$e():ne(),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 disabled:opacity-50"}),t.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Select All ICS-212 Forms (",e.filter(x=>x.formType==="ICS212").length,")"]})]})})}),!a&&t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",e.length," form",e.length!==1?"s":""]}),t.jsx(ta,{onRefresh:Q,children:t.jsx("div",{className:"space-y-3",children:a&&n===1?Array.from({length:5}).map((x,F)=>t.jsx(Fe,{type:"card"},F)):e.length===0?t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[t.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No forms found"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search or filter criteria"})]}):e.map(x=>t.jsx(ea,{leftAction:{label:"View",color:"#3b82f6",onTrigger:()=>we(x.formType==="ICS212"?x.form_id:x.id,x.formType)},rightAction:{label:"Download",color:"#10b981",onTrigger:()=>Z(x)},children:t.jsx(E,{children:t.jsx("div",{onClick:()=>we(x.formType==="ICS212"?x.form_id:x.id,x.formType),className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 cursor-pointer hover:shadow-md transition-shadow",children:t.jsxs("div",{className:"flex items-start gap-3",children:[x.formType==="ICS212"&&t.jsx("div",{className:"flex-shrink-0 pt-1",onClick:F=>F.stopPropagation(),children:t.jsx(E,{children:t.jsx("input",{type:"checkbox",checked:I.includes(x.form_id),onChange:()=>nt(x.form_id),className:"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[Dr(x.formType),x.formType==="ICS212"&&t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:x.vehicle_id_no}),Pr(x.release_decision)]}),x.formType==="ICS218"&&t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:x.incident_name})]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 truncate",children:x.formType==="ICS212"?x.incident_name:x.vehicle_category}),t.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-gray-500 dark:text-gray-400",children:[x.formType==="ICS212"&&t.jsxs(t.Fragment,{children:[t.jsxs("span",{children:["ðŸ” ",x.inspector_name_print]}),t.jsxs("span",{children:["ðŸ“… ",new Date(x.inspector_date).toLocaleDateString()]}),x.pass_count!==void 0&&x.fail_count!==void 0&&t.jsxs("span",{children:["âœ… ",x.pass_count," / âŒ ",x.fail_count]})]}),x.formType==="ICS218"&&t.jsxs(t.Fragment,{children:[t.jsxs("span",{children:["ðŸ‘¤ ",x.prepared_by_name]}),t.jsxs("span",{children:["ðŸ“… ",new Date(x.date_prepared).toLocaleDateString()]}),t.jsxs("span",{children:["ðŸš— ",x.vehicleCount," vehicle",x.vehicleCount!==1?"s":""]})]})]}),x.formType==="ICS212"&&t.jsxs("div",{className:"flex gap-2 mt-3",onClick:F=>F.stopPropagation(),children:[t.jsx(E,{children:t.jsxs("button",{onClick:()=>C(x),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[t.jsx(Vr,{className:"w-3 h-3"}),"Edit"]})}),t.jsx(E,{children:t.jsxs("button",{onClick:()=>Ne(x.form_id),disabled:D===x.form_id,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(Pt,{className:`w-3 h-3 ${D===x.form_id?"animate-spin":""}`}),D===x.form_id?"Regenerating...":"Regenerate PDF"]})})]})]}),t.jsx("svg",{className:"w-5 h-5 text-gray-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})})},`${x.formType}-${x.id}`))})}),n<c&&!a&&t.jsx(E,{children:t.jsx("button",{onClick:ke,className:"w-full py-3 bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 rounded-lg shadow-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Load More"})}),a&&n>1&&t.jsx("div",{className:"text-center py-4",children:t.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),j&&N==="ICS212"&&t.jsx(Rt,{isOpen:!0,onClose:()=>S(null),title:"Form Details",children:t.jsx(ra,{formId:j})}),j&&N==="ICS218"&&t.jsx(Rt,{isOpen:!0,onClose:()=>S(null),title:"Form Details",children:t.jsx(aa,{formId:j})}),O&&ae&&t.jsx(sa,{isOpen:O,onClose:()=>{P(!1),se(null)},submission:ae,onSave:xe}),t.jsx(cn,{isOpen:_,onClose:()=>J(!1),selectedForms:e.filter(x=>x.formType==="ICS212"&&I.includes(x.form_id)),onSuccess:()=>{ne(),L(1,!1)}})]})}function mn(){const[e,r]=o.useState(!0),[a,s]=o.useState(null),[n,l]=o.useState(null);o.useEffect(()=>{c();const m=setInterval(c,6e4);return()=>clearInterval(m)},[]);const c=async()=>{try{const m=await fetch(`${G}/ics212/analytics`);if(m.ok){const y=await m.json();s(y)}const g=await fetch(`${vt.ics218Forms}?limit=1000`);if(g.ok){const u=(await g.json()).forms||[],p=new Date,h=p.getMonth(),b=p.getFullYear(),v=u.filter(N=>{const T=new Date(N.created_at);return T.getMonth()===h&&T.getFullYear()===b}).length,w=u.reduce((N,T)=>N+(T.vehicleCount||0),0),j={};u.forEach(N=>{const T=N.vehicle_category||"Unknown";j[T]=(j[T]||0)+1});const S=Object.entries(j).map(([N,T])=>({category:N,count:T}));l({totalForms:u.length,totalVehicles:w,formsByCategory:S,formsThisMonth:v})}}catch(m){console.error("Error fetching analytics:",m)}finally{r(!1)}};if(e)return t.jsx("div",{className:"space-y-4",children:Array.from({length:4}).map((m,g)=>t.jsx(Fe,{type:"card"},g))});if(!a)return t.jsx("div",{className:"text-center text-red-500 p-4",children:"Failed to load analytics"});const d=[{name:"HOLD",value:Math.round(a.holdRate),color:"#ef4444"},{name:"RELEASED",value:Math.round(a.releaseRate),color:"#10b981"}],i=[{name:"ICS 212",total:a.totalForms,thisMonth:a.formsThisMonth,color:"#3b82f6"},{name:"ICS 218",total:n?.totalForms||0,thisMonth:n?.formsThisMonth||0,color:"#f97316"}];return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"ICS 212 Forms"}),t.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:a.totalForms})]}),t.jsx("div",{className:"text-4xl",children:"ðŸ“‹"})]}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[a.formsThisMonth," this month"]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"ICS 218 Forms"}),t.jsx("p",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400 mt-1",children:n?.totalForms||0})]}),t.jsx("div",{className:"text-4xl",children:"ðŸš—"})]}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[n?.formsThisMonth||0," this month"]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"HOLD Rate"}),t.jsxs("p",{className:"text-3xl font-bold text-red-600 dark:text-red-400 mt-1",children:[a.holdRate.toFixed(1),"%"]})]}),t.jsx("div",{className:"text-4xl",children:"ðŸ”´"})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"ICS 212 only"})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Vehicles Tracked"}),t.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-1",children:n?.totalVehicles||0})]}),t.jsx("div",{className:"text-4xl",children:"ðŸš™"})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"ICS 218 vehicles"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Form Type Comparison"}),t.jsx(Se,{width:"100%",height:300,children:t.jsxs(ze,{data:i,children:[t.jsx(_e,{strokeDasharray:"3 3",stroke:"#374151"}),t.jsx(Ie,{dataKey:"name",stroke:"#9ca3af"}),t.jsx(De,{stroke:"#9ca3af"}),t.jsx(Ce,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),t.jsx(Hr,{}),t.jsx(Pe,{dataKey:"total",fill:"#3b82f6",name:"Total Forms"}),t.jsx(Pe,{dataKey:"thisMonth",fill:"#10b981",name:"This Month"})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"ICS 212 Release Decisions"}),t.jsx(Se,{width:"100%",height:300,children:t.jsxs(Br,{children:[t.jsx(zr,{data:d,cx:"50%",cy:"50%",labelLine:!1,label:({name:m,value:g})=>`${m}: ${g}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:d.map((m,g)=>t.jsx(Wr,{fill:m.color},`cell-${g}`))}),t.jsx(Ce,{})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"ICS 212 Forms Per Day (Last 30 Days)"}),t.jsx(Se,{width:"100%",height:300,children:t.jsxs(Kr,{data:a.formsPerDay,children:[t.jsx(_e,{strokeDasharray:"3 3",stroke:"#374151"}),t.jsx(Ie,{dataKey:"date",stroke:"#9ca3af",tick:{fontSize:12}}),t.jsx(De,{stroke:"#9ca3af"}),t.jsx(Ce,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),t.jsx(Yr,{type:"monotone",dataKey:"count",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",r:4}})]})})]}),n&&n.formsByCategory.length>0&&t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"ICS 218 Vehicle Categories"}),t.jsx(Se,{width:"100%",height:300,children:t.jsxs(ze,{data:n.formsByCategory,layout:"horizontal",children:[t.jsx(_e,{strokeDasharray:"3 3",stroke:"#374151"}),t.jsx(Ie,{type:"number",stroke:"#9ca3af"}),t.jsx(De,{type:"category",dataKey:"category",stroke:"#9ca3af",width:100,tick:{fontSize:11}}),t.jsx(Ce,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),t.jsx(Pe,{dataKey:"count",fill:"#f97316"})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top 10 Vehicles by ICS 212 Inspections"}),t.jsx(Se,{width:"100%",height:300,children:t.jsxs(ze,{data:a.topVehicles.slice(0,10),children:[t.jsx(_e,{strokeDasharray:"3 3",stroke:"#374151"}),t.jsx(Ie,{dataKey:"vehicleId",stroke:"#9ca3af",angle:-45,textAnchor:"end",height:80,tick:{fontSize:10}}),t.jsx(De,{stroke:"#9ca3af"}),t.jsx(Ce,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),t.jsx(Pe,{dataKey:"count",fill:"#3b82f6"})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top Safety Item Failures (ICS 212)"}),t.jsx(Se,{width:"100%",height:300,children:t.jsxs(ze,{data:a.safetyItemFailures.slice(0,8),layout:"vertical",children:[t.jsx(_e,{strokeDasharray:"3 3",stroke:"#374151"}),t.jsx(Ie,{type:"number",stroke:"#9ca3af"}),t.jsx(De,{type:"category",dataKey:"item",stroke:"#9ca3af",width:150,tick:{fontSize:10}}),t.jsx(Ce,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),t.jsx(Pe,{dataKey:"count",fill:"#ef4444"})]})})]})]})]})}function gn({isOpen:e,onClose:r,title:a,children:s}){return e?t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:r}),t.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:a}),t.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:t.jsx(jt,{className:"w-6 h-6"})})]}),t.jsx("div",{className:"p-6",children:s})]})]})}):null}function hn({isOpen:e,onClose:r,onConfirm:a,vehicleName:s,isDeleting:n}){return e?t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:r}),t.jsx("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",children:t.jsxs("div",{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Delete Vehicle"}),t.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",t.jsx("strong",{children:s}),"? This action cannot be undone."]}),t.jsxs("div",{className:"flex gap-3 justify-end",children:[t.jsx("button",{onClick:r,disabled:n,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),t.jsx("button",{onClick:a,disabled:n,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:n?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Deleting..."]}):t.jsxs(t.Fragment,{children:[t.jsx(ar,{className:"w-4 h-4"}),"Delete"]})})]})]})})]})}):null}function xn(){const[e,r]=o.useState([]),[a,s]=o.useState(!0),[n,l]=o.useState(""),[c,d]=o.useState(!1),[i,m]=o.useState("add"),[g,y]=o.useState(null),[u,p]=o.useState(!1),[h,b]=o.useState({regUnit:"",agency:"",vehicleMake:"",vehicleType:"",incidentId:"",vehicleId:"",features:"",licenseNumber:"",notes:"",vehicleStatus:"Active"}),[v,w]=o.useState({}),[j,S]=o.useState(!1),[N,T]=o.useState(!1);o.useEffect(()=>{O()},[]);const O=async()=>{try{const f=await fetch(`${G}/vehicles`);if(!f.ok)throw new Error("Failed to fetch vehicles");const _=await f.json();r(_.vehicles||[])}catch(f){console.error("Error fetching vehicles:",f),A({message:"Failed to load vehicles",type:"error"})}finally{s(!1)}},P=()=>{b({regUnit:"",agency:"",vehicleMake:"",vehicleType:"",incidentId:"",vehicleId:"",features:"",licenseNumber:"",notes:"",vehicleStatus:"Active"}),w({})},ae=()=>{P(),m("add"),y(null),d(!0)},se=f=>{b({regUnit:f.regUnit||"",agency:f.agency||"",vehicleMake:f.vehicleMake||"",vehicleType:f.vehicleType||"",incidentId:f.incidentId||"",vehicleId:f.vehicleId||"",features:f.features||"",licenseNumber:f.licenseNumber||"",notes:f.notes||"",vehicleStatus:f.vehicleStatus||"Active"}),m("edit"),y(f),d(!0)},D=f=>{y(f),p(!0)},W=()=>{const f={};return h.regUnit.trim()?h.regUnit.length>100&&(f.regUnit="Registered Unit must be 100 characters or less"):f.regUnit="Registered Unit is required",h.vehicleMake.trim()||(f.vehicleMake="Vehicle Make is required"),[h.agency,h.vehicleType,h.incidentId,h.vehicleId,h.features,h.licenseNumber,h.notes].some(J=>J.trim())||(f.general="At least one additional field must be filled"),w(f),Object.keys(f).length===0},I=async f=>{if(f.preventDefault(),!W()){A({message:"Please fix the validation errors",type:"error"});return}S(!0);try{const _=i==="add"?`${G}/vehicles`:`${G}/vehicles/${g?.id}`,L=await fetch(_,{method:i==="add"?"POST":"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!L.ok){const Q=await L.json();throw new Error(Q.message||"Failed to save vehicle")}A({message:i==="add"?"Vehicle created successfully":"Vehicle updated successfully",type:"success"}),d(!1),P(),await O()}catch(_){console.error("Error saving vehicle:",_),A({message:_ instanceof Error?_.message:"Failed to save vehicle",type:"error"})}finally{S(!1)}},R=async()=>{if(g){T(!0);try{const f=await fetch(`${G}/vehicles/${g.id}`,{method:"DELETE"});if(!f.ok){const _=await f.json();throw new Error(_.message||"Failed to delete vehicle")}A({message:"Vehicle deleted successfully",type:"success"}),p(!1),y(null),await O()}catch(f){console.error("Error deleting vehicle:",f),A({message:f instanceof Error?f.message:"Failed to delete vehicle",type:"error"})}finally{T(!1)}}},M=e.filter(f=>{const _=n.toLowerCase();return f.regUnit?.toLowerCase().includes(_)||f.vehicleMake?.toLowerCase().includes(_)||f.vehicleType?.toLowerCase().includes(_)||f.licenseNumber?.toLowerCase().includes(_)});return a?t.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((f,_)=>t.jsx(Fe,{type:"card"},_))}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-stretch sm:items-center justify-between",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Vehicle Management"}),t.jsx(E,{children:t.jsxs("button",{onClick:ae,className:"flex items-center justify-center gap-2 px-4 py-2 bg-[#0066FF] text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[t.jsx(Lr,{className:"w-5 h-5"}),"Add New Vehicle"]})})]}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:t.jsx("input",{type:"search",placeholder:"Search vehicles by name, make, model, or license plate...",value:n,onChange:f=>l(f.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})}),t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",M.length," vehicle",M.length!==1?"s":""]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.length===0?t.jsxs("div",{className:"col-span-full bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[t.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No vehicles found"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:n?"Try a different search term":"Get started by adding a new vehicle"})]}):M.map(f=>t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("div",{className:"text-4xl",children:f.vehicleType?.toLowerCase().includes("truck")?"ðŸš›":"ðŸš—"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:f.regUnit}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[f.vehicleMake," ",f.vehicleType]})]})]}),t.jsxs("div",{className:"space-y-2 text-sm",children:[f.licenseNumber&&t.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[t.jsx("span",{className:"font-medium",children:"License:"}),t.jsx("span",{children:f.licenseNumber})]}),f.agency&&t.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[t.jsx("span",{className:"font-medium",children:"Agency:"}),t.jsx("span",{children:f.agency})]}),f.vehicleStatus&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Status:"}),t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${f.vehicleStatus==="Active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:f.vehicleStatus})]})]}),f.notes&&t.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 line-clamp-2",children:f.notes})}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-2",children:[t.jsx(E,{children:t.jsx("a",{href:`/?vehicle=${encodeURIComponent(f.regUnit)}`,className:"flex-1 py-2 px-4 bg-[#0066FF] text-white rounded-lg text-center text-sm font-medium hover:bg-blue-700 transition-colors",children:"ðŸ“‹ New Inspection"})}),t.jsx(E,{children:t.jsx("button",{onClick:()=>se(f),className:"p-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:"Edit Vehicle",children:t.jsx(Zr,{className:"w-4 h-4"})})}),t.jsx(E,{children:t.jsx("button",{onClick:()=>D(f),className:"p-2 border border-red-300 dark:border-red-600 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Delete Vehicle",children:t.jsx(ar,{className:"w-4 h-4"})})})]})]},f.id))}),t.jsx(gn,{isOpen:c,onClose:()=>d(!1),title:i==="add"?"Add New Vehicle":"Edit Vehicle",children:t.jsxs("form",{onSubmit:I,className:"space-y-4",children:[v.general&&t.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm",children:v.general}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Registered Unit ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:h.regUnit,onChange:f=>b({...h,regUnit:f.target.value}),className:`w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:text-white ${v.regUnit?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., USAR-01"}),v.regUnit&&t.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:v.regUnit})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Agency"}),t.jsx("input",{type:"text",value:h.agency,onChange:f=>b({...h,agency:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., FEMA"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Make ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:h.vehicleMake,onChange:f=>b({...h,vehicleMake:f.target.value}),className:`w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:text-white ${v.vehicleMake?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., Ford, Chevrolet, International"}),v.vehicleMake&&t.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:v.vehicleMake})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category/Type"}),t.jsx("input",{type:"text",value:h.vehicleType,onChange:f=>b({...h,vehicleType:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., Heavy Rescue Truck, Cargo Trailer"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Incident ID"}),t.jsx("input",{type:"text",value:h.incidentId,onChange:f=>b({...h,incidentId:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., INC-2024-001"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Classification"}),t.jsx("input",{type:"text",value:h.vehicleId,onChange:f=>b({...h,vehicleId:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., VEHICLE-001"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Features"}),t.jsx("textarea",{value:h.features,onChange:f=>b({...h,features:f.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"Describe special features, equipment, or capabilities"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"License Number"}),t.jsx("input",{type:"text",value:h.licenseNumber,onChange:f=>b({...h,licenseNumber:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., ABC-1234"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Insurance Status"}),t.jsxs("select",{value:h.vehicleStatus,onChange:f=>b({...h,vehicleStatus:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"Active",children:"Active"}),t.jsx("option",{value:"Inactive",children:"Inactive"}),t.jsx("option",{value:"Maintenance",children:"Maintenance"}),t.jsx("option",{value:"Deployed",children:"Deployed"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),t.jsx("textarea",{value:h.notes,onChange:f=>b({...h,notes:f.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"Additional notes or comments"})]}),t.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[t.jsx("button",{type:"button",onClick:()=>d(!1),disabled:j,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:j,className:"px-4 py-2 bg-[#0066FF] text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:j?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Saving..."]}):t.jsxs(t.Fragment,{children:[t.jsx(qr,{className:"w-4 h-4"}),i==="add"?"Create Vehicle":"Update Vehicle"]})})]})]})}),t.jsx(hn,{isOpen:u,onClose:()=>p(!1),onConfirm:R,vehicleName:g?.regUnit||"",isDeleting:N})]})}function Tn(){const[e,r]=o.useState("list"),a=Or();return t.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[t.jsxs("header",{className:"sticky top-0 z-50 bg-white dark:bg-gray-800 shadow-md",children:[t.jsx("div",{className:"px-4 py-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:"/taskforce-io-logo.png",alt:"TASKFORCE IO",className:"w-10 h-10 object-contain"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"TASKFORCE IO Admin"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Vehicle Safety Inspections"})]}),t.jsx(E,{children:t.jsxs("button",{onClick:()=>a("/"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",title:"Return to Home",children:[t.jsx(Gr,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Home"})]})})]})}),t.jsxs("nav",{className:"flex border-t border-gray-200 dark:border-gray-700",children:[t.jsx(E,{children:t.jsx("button",{onClick:()=>r("list"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${e==="list"?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{children:"ðŸ“‹"}),t.jsx("span",{className:"hidden sm:inline",children:"Forms"})]})})}),t.jsx(E,{children:t.jsx("button",{onClick:()=>r("analytics"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${e==="analytics"?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{children:"ðŸ“Š"}),t.jsx("span",{className:"hidden sm:inline",children:"Analytics"})]})})}),t.jsx(E,{children:t.jsx("button",{onClick:()=>r("vehicles"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${e==="vehicles"?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{children:"ðŸš—"}),t.jsx("span",{className:"hidden sm:inline",children:"Vehicles"})]})})})]})]}),t.jsx("main",{className:"p-4 pb-20 md:p-6 lg:p-8",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[e==="list"&&t.jsx(un,{}),e==="analytics"&&t.jsx(mn,{}),e==="vehicles"&&t.jsx(xn,{})]})})]})}export{Tn as ICS212AdminDashboard};
//# sourceMappingURL=ICS212AdminDashboard-BMmVQb3I.js.map
