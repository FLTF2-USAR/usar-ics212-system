import{u as M,a as j,j as e,m as u,A as H,R as Y,P as G,O as X,C as q,T as J}from"./ui-qyH4TQhP.js";import{r as c}from"./vendor-Duk_Y8N0.js";import{S as R}from"./SkeletonLoader-C6FHfKAz.js";import{T as g}from"./TouchFeedback-BRUDPQK4.js";import{n as Q,F as Z}from"./index-C-LK1zn9.js";import{R as v,L as ee,C as T,X as D,Y as F,T as w,a as se,P as te,b as ae,c as re,B as V,d as A}from"./charts-BkQPTqVa.js";const le=({children:n,leftAction:i,rightAction:t,threshold:s=80,className:o=""})=>{const x=M(0),r=j(x,[-s,0,s],[t?.color||"#ef4444","#ffffff",i?.color||"#10b981"]),d=(a,h)=>{const m=h.offset.x;m>s&&i?(i.onTrigger(),x.set(0)):(m<-s&&t&&t.onTrigger(),x.set(0))};return e.jsxs("div",{className:`relative overflow-hidden ${o}`,children:[e.jsxs("div",{className:"absolute inset-0 flex justify-between items-center px-6",children:[i&&e.jsxs(u.div,{className:"flex items-center gap-2 text-white font-semibold",style:{opacity:j(x,[0,s],[0,1])},children:[i.icon&&e.jsx("span",{children:i.icon}),e.jsx("span",{children:i.label})]}),t&&e.jsxs(u.div,{className:"flex items-center gap-2 text-white font-semibold ml-auto",style:{opacity:j(x,[-s,0],[1,0])},children:[e.jsx("span",{children:t.label}),t.icon&&e.jsx("span",{children:t.icon})]})]}),e.jsx(u.div,{drag:"x",dragConstraints:{left:t?-s*1.5:0,right:i?s*1.5:0},dragElastic:.1,onDragEnd:d,style:{x,backgroundColor:r},className:"relative z-10 bg-white dark:bg-gray-800 touch-pan-y",children:n})]})},ie=({children:n,onRefresh:i,threshold:t=80,className:s=""})=>{const[o,x]=c.useState(!1),r=M(0),d=c.useRef(null),a=j(r,[0,t],[0,1]),h=j(r,[0,t],[0,180]),m=async(f,b)=>{if(b.offset.y>t&&!o){x(!0);try{await i()}finally{x(!1),r.set(0)}}else r.set(0)},k=(f,b)=>{const y=d.current;y&&y.scrollTop===0&&b.offset.y>0&&r.set(Math.min(b.offset.y,t*1.5))};return e.jsxs("div",{ref:d,className:`relative overflow-auto ${s}`,children:[e.jsx(u.div,{className:"absolute top-0 left-0 right-0 flex items-center justify-center py-4 z-10",style:{opacity:a,height:j(r,[0,t],[0,60])},children:e.jsx(u.div,{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full",style:{rotate:o?void 0:h},animate:o?{rotate:360}:{},transition:{repeat:o?1/0:0,duration:1,ease:"linear"}})}),e.jsx(u.div,{drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.1,onDrag:k,onDragEnd:m,style:{y:r},className:"touch-pan-x",children:n})]})},S=({message:n,type:i="info",duration:t=3e3})=>{const s={success:"‚úì",error:"‚úï",info:"‚Ñπ",warning:"‚ö†Ô∏è"},o={success:"bg-green-600",error:"bg-red-600",info:"bg-blue-600",warning:"bg-yellow-600"};Q.custom(x=>e.jsx(H,{children:x.visible&&e.jsxs(u.div,{initial:{opacity:0,y:-50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{type:"spring",stiffness:500,damping:30},className:`${o[i]} text-white px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 max-w-md`,style:{backdropFilter:"blur(10px)"},children:[e.jsx("span",{className:"text-2xl",children:s[i]}),e.jsx("p",{className:"text-sm font-medium",children:n})]})}),{duration:t})},ne=()=>e.jsx(Z,{position:"top-center",toastOptions:{style:{background:"transparent",boxShadow:"none"}}}),de=({isOpen:n,onClose:i,title:t,children:s,showHandle:o=!0,className:x=""})=>e.jsx(Y,{open:n,onOpenChange:r=>!r&&i(),children:e.jsx(H,{children:n&&e.jsxs(G,{forceMount:!0,children:[e.jsx(X,{asChild:!0,children:e.jsx(u.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}})}),e.jsx(q,{asChild:!0,children:e.jsxs(u.div,{className:`
                  fixed bottom-0 left-0 right-0 z-50
                  bg-white dark:bg-gray-800
                  rounded-t-3xl shadow-2xl
                  max-h-[90vh] overflow-hidden
                  ${x}
                `,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:300,damping:30},drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.2,onDragEnd:(r,d)=>{d.offset.y>100&&i()},children:[o&&e.jsx("div",{className:"flex justify-center pt-3 pb-2",children:e.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),t&&e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx(J,{className:"text-xl font-bold text-gray-900 dark:text-white",children:t})}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)] p-6",children:s})]})})]})})}),oe="https://mbfd-github-proxy.pdarleyjr.workers.dev",E=`${oe}/api`;function ce({formId:n}){const[i,t]=c.useState(!0),[s,o]=c.useState(null);c.useEffect(()=>{x()},[n]);const x=async()=>{try{const d=await fetch(`${E}/ics212/forms/${n}`);if(!d.ok)throw new Error("Failed to fetch form");const a=await d.json();o(a.form)}catch(d){console.error("Error fetching form detail:",d),S({message:"Failed to load form details",type:"error"})}finally{t(!1)}},r=()=>{s?.pdf_url&&window.open(s.pdf_url,"_blank")};return i?e.jsx("div",{className:"p-4 space-y-4",children:e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"})]})}):s?e.jsxs("div",{className:"space-y-4 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white",children:s.vehicle_id_no}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.incident_name}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${s.release_decision==="hold"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}`,children:s.release_decision==="hold"?"üî¥ HOLD":"üü¢ RELEASED"})})]}),s.pdf_url&&e.jsxs("div",{className:"px-4",children:[e.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-900",children:e.jsx("iframe",{src:s.pdf_url,className:"w-full",style:{height:"400px"},title:"PDF Preview"})}),e.jsx(g,{children:e.jsx("button",{onClick:r,className:"w-full mt-2 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"üì• Download PDF"})})]}),e.jsxs("div",{className:"px-4 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Inspection Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Inspector:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:s.inspector_name_print})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Date:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:s.inspector_date})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Time:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:s.inspector_time})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Vehicle Type:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:s.vehicle_type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"License:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:s.vehicle_license_no})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Agency/Unit:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:s.agency_reg_unit})]})]}),s.additional_comments&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Comments:"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:s.additional_comments})]}),s.github_issue_number&&e.jsx(g,{children:e.jsxs("a",{href:`https://github.com/pdarleyjr/mbfd-checkout-system/issues/${s.github_issue_number}`,target:"_blank",rel:"noopener noreferrer",className:"block w-full py-2 px-4 bg-gray-100 dark:bg-gray-700 text-blue-600 dark:text-blue-400 rounded-lg text-center font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:["View GitHub Issue #",s.github_issue_number," ‚Üí"]})})]})]}):e.jsx("div",{className:"p-4 text-center",children:e.jsx("p",{className:"text-red-500",children:"Form not found"})})}function xe(){const[n,i]=c.useState([]),[t,s]=c.useState(!0),[o,x]=c.useState(1),[r,d]=c.useState(1),[a,h]=c.useState(""),[m,k]=c.useState("all"),[f,b]=c.useState(""),[y,O]=c.useState(""),[_,I]=c.useState(null),C=c.useCallback(async(l=1,N=!1)=>{N||s(!0);try{const p=new URLSearchParams({page:l.toString(),limit:"20",sortBy:"date",sortOrder:"desc"});a&&p.set("search",a),m!=="all"&&p.set("status",m),f&&p.set("from",f),y&&p.set("to",y);const $=await fetch(`${E}/ics212/forms?${p}`);if(!$.ok)throw new Error("Failed to fetch forms");const L=await $.json();i(N?W=>[...W,...L.forms]:L.forms),d(L.pages),x(l)}catch(p){console.error("Error fetching forms:",p),S({message:"Failed to load forms",type:"error"})}finally{s(!1)}},[a,m,f,y]);c.useEffect(()=>{C(1,!1)},[a,m,f,y]);const B=async()=>{await C(1,!1)},z=()=>{o<r&&!t&&C(o+1,!0)},U=async l=>{if(!l.pdf_url){S({message:"PDF not available",type:"error"});return}window.open(l.pdf_url,"_blank")},P=l=>{I(l)},K=l=>l==="hold"?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"üî¥ HOLD"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"üü¢ RELEASED"});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 space-y-4",children:[e.jsx("div",{children:e.jsx("input",{type:"search",placeholder:"Search by vehicle ID, incident, or inspector...",value:a,onChange:l=>h(l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(g,{children:e.jsx("button",{onClick:()=>k("all"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${m==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"All"})}),e.jsx(g,{children:e.jsx("button",{onClick:()=>k("hold"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${m==="hold"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"HOLD"})}),e.jsx(g,{children:e.jsx("button",{onClick:()=>k("release"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${m==="release"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"RELEASED"})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"From Date"}),e.jsx("input",{type:"date",value:f,onChange:l=>b(l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"To Date"}),e.jsx("input",{type:"date",value:y,onChange:l=>O(l.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]})]}),!t&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",n.length," form",n.length!==1?"s":""]}),e.jsx(ie,{onRefresh:B,children:e.jsxs("div",{className:"space-y-3",children:[t&&o===1?Array.from({length:5}).map((l,N)=>e.jsx(R,{type:"card"},N)):n.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No forms found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search or filter criteria"})]}):n.map(l=>e.jsx(le,{leftAction:{label:"View",color:"#3b82f6",onTrigger:()=>P(l.form_id)},rightAction:{label:"Download",color:"#10b981",onTrigger:()=>U(l)},children:e.jsx(g,{children:e.jsx("div",{onClick:()=>P(l.form_id),className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:l.vehicle_id_no}),K(l.release_decision)]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 truncate",children:l.incident_name}),e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["üîç ",l.inspector_name_print]}),e.jsxs("span",{children:["üìÖ ",new Date(l.inspector_date).toLocaleDateString()]}),l.pass_count!==void 0&&l.fail_count!==void 0&&e.jsxs("span",{children:["‚úÖ ",l.pass_count," / ‚ùå ",l.fail_count]})]})]}),e.jsx("svg",{className:"w-5 h-5 text-gray-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})})},l.id)),o<r&&!t&&e.jsx(g,{children:e.jsx("button",{onClick:z,className:"w-full py-3 bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 rounded-lg shadow-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Load More"})}),t&&o>1&&e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})}),_&&e.jsx(de,{isOpen:!!_,onClose:()=>I(null),title:"Form Details",children:e.jsx(ce,{formId:_})}),e.jsx(ne,{})]})}function he(){const[n,i]=c.useState(!0),[t,s]=c.useState(null);c.useEffect(()=>{o();const r=setInterval(o,6e4);return()=>clearInterval(r)},[]);const o=async()=>{try{const r=await fetch(`${E}/ics212/analytics`);if(!r.ok)throw new Error("Failed to fetch analytics");const d=await r.json();s(d)}catch(r){console.error("Error fetching analytics:",r)}finally{i(!1)}};if(n)return e.jsx("div",{className:"space-y-4",children:Array.from({length:4}).map((r,d)=>e.jsx(R,{type:"card"},d))});if(!t)return e.jsx("div",{className:"text-center text-red-500 p-4",children:"Failed to load analytics"});const x=[{name:"HOLD",value:Math.round(t.holdRate),color:"#ef4444"},{name:"RELEASED",value:Math.round(t.releaseRate),color:"#10b981"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Forms"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:t.totalForms})]}),e.jsx("div",{className:"text-4xl",children:"üìã"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"This Month"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:t.formsThisMonth})]}),e.jsx("div",{className:"text-4xl",children:"üìÖ"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"HOLD Rate"}),e.jsxs("p",{className:"text-3xl font-bold text-red-600 dark:text-red-400 mt-1",children:[t.holdRate.toFixed(1),"%"]})]}),e.jsx("div",{className:"text-4xl",children:"üî¥"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"RELEASED Rate"}),e.jsxs("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-1",children:[t.releaseRate.toFixed(1),"%"]})]}),e.jsx("div",{className:"text-4xl",children:"üü¢"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Forms Per Day (Last 30 Days)"}),e.jsx(v,{width:"100%",height:300,children:e.jsxs(ee,{data:t.formsPerDay,children:[e.jsx(T,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(D,{dataKey:"date",stroke:"#9ca3af",tick:{fontSize:12}}),e.jsx(F,{stroke:"#9ca3af"}),e.jsx(w,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),e.jsx(se,{type:"monotone",dataKey:"count",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",r:4}})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Release Decisions"}),e.jsx(v,{width:"100%",height:300,children:e.jsxs(te,{children:[e.jsx(ae,{data:x,cx:"50%",cy:"50%",labelLine:!1,label:({name:r,value:d})=>`${r}: ${d}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:x.map((r,d)=>e.jsx(re,{fill:r.color},`cell-${d}`))}),e.jsx(w,{})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top 10 Vehicles by Inspection Count"}),e.jsx(v,{width:"100%",height:300,children:e.jsxs(V,{data:t.topVehicles.slice(0,10),children:[e.jsx(T,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(D,{dataKey:"vehicleId",stroke:"#9ca3af",angle:-45,textAnchor:"end",height:80,tick:{fontSize:10}}),e.jsx(F,{stroke:"#9ca3af"}),e.jsx(w,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),e.jsx(A,{dataKey:"count",fill:"#3b82f6"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top Safety Item Failures"}),e.jsx(v,{width:"100%",height:300,children:e.jsxs(V,{data:t.safetyItemFailures.slice(0,8),layout:"vertical",children:[e.jsx(T,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(D,{type:"number",stroke:"#9ca3af"}),e.jsx(F,{type:"category",dataKey:"item",stroke:"#9ca3af",width:150,tick:{fontSize:10}}),e.jsx(w,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),e.jsx(A,{dataKey:"count",fill:"#ef4444"})]})})]})]})]})}function me(){const[n,i]=c.useState([]),[t,s]=c.useState(!0),[o,x]=c.useState("");c.useEffect(()=>{r()},[]);const r=async()=>{try{const a=await fetch(`${E}/vehicles`);if(!a.ok)throw new Error("Failed to fetch vehicles");const h=await a.json();i(h.vehicles||[])}catch(a){console.error("Error fetching vehicles:",a),S({message:"Failed to load vehicles",type:"error"})}finally{s(!1)}},d=n.filter(a=>{const h=o.toLowerCase();return a.fields.NAME?.toLowerCase().includes(h)||a.fields.UNIT?.toLowerCase().includes(h)||a.fields.LICENSE_PLATE?.toLowerCase().includes(h)});return t?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((a,h)=>e.jsx(R,{type:"card"},h))}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:e.jsx("input",{type:"search",placeholder:"Search vehicles by name, unit, or license plate...",value:o,onChange:a=>x(a.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",d.length," vehicle",d.length!==1?"s":""]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.length===0?e.jsxs("div",{className:"col-span-full bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No vehicles found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try a different search term"})]}):d.map(a=>e.jsx(g,{children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"text-4xl",children:a.fields.VEHICLE_TYPE?.toLowerCase().includes("truck")?"üöõ":"üöó"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:a.fields.NAME}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.fields.UNIT})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[a.fields.LICENSE_PLATE&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"License:"}),e.jsx("span",{children:a.fields.LICENSE_PLATE})]}),a.fields.VEHICLE_TYPE&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Type:"}),e.jsx("span",{children:a.fields.VEHICLE_TYPE})]}),a.fields.STATUS&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Status:"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${a.fields.STATUS==="Active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:a.fields.STATUS})]})]}),a.fields.NOTES&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 line-clamp-2",children:a.fields.NOTES})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx(g,{children:e.jsx("a",{href:`/?vehicle=${encodeURIComponent(a.fields.NAME)}`,className:"block w-full py-2 px-4 bg-blue-600 text-white rounded-lg text-center text-sm font-medium hover:bg-blue-700 transition-colors",children:"üìã New Inspection"})})})]})},a.id))})]})}function je(){const[n,i]=c.useState("list");return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("header",{className:"sticky top-0 z-50 bg-white dark:bg-gray-800 shadow-md",children:[e.jsx("div",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-8 h-8 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"ICS-212 Admin"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Vehicle Safety Inspections"})]})]})}),e.jsxs("nav",{className:"flex border-t border-gray-200 dark:border-gray-700",children:[e.jsx(g,{children:e.jsx("button",{onClick:()=>i("list"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${n==="list"?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üìã"}),e.jsx("span",{className:"hidden sm:inline",children:"Forms"})]})})}),e.jsx(g,{children:e.jsx("button",{onClick:()=>i("analytics"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${n==="analytics"?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üìä"}),e.jsx("span",{className:"hidden sm:inline",children:"Analytics"})]})})}),e.jsx(g,{children:e.jsx("button",{onClick:()=>i("vehicles"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${n==="vehicles"?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üöó"}),e.jsx("span",{className:"hidden sm:inline",children:"Vehicles"})]})})})]})]}),e.jsx("main",{className:"p-4 pb-20 md:p-6 lg:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[n==="list"&&e.jsx(xe,{}),n==="analytics"&&e.jsx(he,{}),n==="vehicles"&&e.jsx(me,{})]})})]})}export{je as ICS212AdminDashboard};
//# sourceMappingURL=ICS212AdminDashboard-BpBzD_O3.js.map
