{"version":3,"file":"ICS212Form-BNoD78Sj.js","sources":["../../node_modules/lucide-react/dist/esm/icons/loader-circle.js","../../src/components/ics212/IncidentInfoStep.tsx","../../src/components/ics212/AddVehicleModal.tsx","../../src/components/ics212/VehicleSelectionStep.tsx","../../src/components/ics212/InspectionItemsStep.tsx","../../src/components/ics212/CommentsStep.tsx","../../src/components/ics212/InspectorSignatureStep.tsx","../../src/components/ics212/ReviewSubmitStep.tsx","../../src/components/ICS212Form.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"M21 12a9 9 0 1 1-6.219-8.56\", key: \"13zald\" }]];\nconst LoaderCircle = createLucideIcon(\"loader-circle\", __iconNode);\n\nexport { __iconNode, LoaderCircle as default };\n//# sourceMappingURL=loader-circle.js.map\n","import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport TouchFeedback from '../mobile/TouchFeedback';\r\nimport type { ICS212FormData } from '../../types';\r\n\r\ninterface IncidentInfoStepProps {\r\n  formData: Partial<ICS212FormData>;\r\n  onChange: (field: keyof ICS212FormData, value: any) => void;\r\n  onNext: () => void;\r\n  errors: Record<string, string>;\r\n}\r\n\r\nexport const IncidentInfoStep: React.FC<IncidentInfoStepProps> = ({\r\n  formData,\r\n  onChange,\r\n  onNext,\r\n  errors,\r\n}) => {\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    onNext();\r\n  };\r\n\r\n  // Generate current date and time in proper format\r\n  const getCurrentDate = () => {\r\n    return new Date().toISOString().split('T')[0]; // YYYY-MM-DD\r\n  };\r\n\r\n  const getCurrentTime = () => {\r\n    const now = new Date();\r\n    const hours = String(now.getHours()).padStart(2, '0');\r\n    const minutes = String(now.getMinutes()).padStart(2, '0');\r\n    return `${hours}:${minutes}`; // HH:MM\r\n  };\r\n\r\n  return (\r\n    <motion.form\r\n      className=\"space-y-6 p-4 md:p-6\"\r\n      onSubmit={handleSubmit}\r\n      initial={{ opacity: 0, x: 20 }}\r\n      animate={{ opacity: 1, x: 0 }}\r\n      exit={{ opacity: 0, x: -20 }}\r\n      transition={{ duration: 0.3 }}\r\n    >\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\r\n          Incident Information\r\n        </h2>\r\n        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n          Complete prior to vehicle inspection\r\n        </p>\r\n      </div>\r\n\r\n      {/* Incident Name */}\r\n      <div>\r\n        <label\r\n          htmlFor=\"incidentName\"\r\n          className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\"\r\n        >\r\n          Incident Name *\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"incidentName\"\r\n          value={formData.incidentName || ''}\r\n          onChange={(e) => onChange('incidentName', e.target.value)}\r\n          placeholder=\"e.g., Wildfire Response 2024\"\r\n          maxLength={100}\r\n          className={`\r\n            w-full px-4 py-3 text-base rounded-xl border-2 transition-all\r\n            focus:outline-none focus:ring-4\r\n            ${errors.incidentName \r\n              ? 'border-red-500 focus:border-red-500 focus:ring-red-100' \r\n              : 'border-gray-300 focus:border-blue-500 focus:ring-blue-100'\r\n            }\r\n          `}\r\n          style={{ minHeight: '56px' }}\r\n        />\r\n        {errors.incidentName && (\r\n          <p className=\"mt-1 text-sm text-red-600\">{errors.incidentName}</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Date/Time Row */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        <div>\r\n          <label\r\n            htmlFor=\"inspectorDate\"\r\n            className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\"\r\n          >\r\n            Date *\r\n          </label>\r\n          <input\r\n            type=\"date\"\r\n            id=\"inspectorDate\"\r\n            value={formData.inspectorDate || getCurrentDate()}\r\n            onChange={(e) => onChange('inspectorDate', e.target.value)}\r\n            max={getCurrentDate()}\r\n            className={`\r\n              w-full px-4 py-3 text-base rounded-xl border-2 transition-all\r\n              focus:outline-none focus:ring-4\r\n              ${errors.inspectorDate \r\n                ? 'border-red-500 focus:border-red-500 focus:ring-red-100' \r\n                : 'border-gray-300 focus:border-blue-500 focus:ring-blue-100'\r\n              }\r\n            `}\r\n            style={{ minHeight: '56px' }}\r\n          />\r\n          {errors.inspectorDate && (\r\n            <p className=\"mt-1 text-sm text-red-600\">{errors.inspectorDate}</p>\r\n          )}\r\n        </div>\r\n\r\n        <div>\r\n          <label\r\n            htmlFor=\"inspectorTime\"\r\n            className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\"\r\n          >\r\n            Time *\r\n          </label>\r\n          <input\r\n            type=\"time\"\r\n            id=\"inspectorTime\"\r\n            value={formData.inspectorTime || getCurrentTime()}\r\n            onChange={(e) => onChange('inspectorTime', e.target.value)}\r\n            className={`\r\n              w-full px-4 py-3 text-base rounded-xl border-2 transition-all\r\n              focus:outline-none focus:ring-4\r\n              ${errors.inspectorTime \r\n                ? 'border-red-500 focus:border-red-500 focus:ring-red-100' \r\n                : 'border-gray-300 focus:border-blue-500 focus:ring-blue-100'\r\n              }\r\n            `}\r\n            style={{ minHeight: '56px' }}\r\n          />\r\n          {errors.inspectorTime && (\r\n            <p className=\"mt-1 text-sm text-red-600\">{errors.inspectorTime}</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Order Number (Optional) */}\r\n      <div>\r\n        <label\r\n          htmlFor=\"orderNo\"\r\n          className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\"\r\n        >\r\n          Order Number <span className=\"text-gray-500\">(Optional)</span>\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"orderNo\"\r\n          value={formData.orderNo || ''}\r\n          onChange={(e) => onChange('orderNo', e.target.value)}\r\n          placeholder=\"e.g., ORDER-2024-00123\"\r\n          maxLength={50}\r\n          className=\"\r\n            w-full px-4 py-3 text-base rounded-xl border-2 border-gray-300\r\n            transition-all focus:outline-none focus:ring-4\r\n            focus:border-blue-500 focus:ring-blue-100\r\n          \"\r\n          style={{ minHeight: '56px' }}\r\n        />\r\n      </div>\r\n\r\n      {/* Next Button */}\r\n      <TouchFeedback onTap={() => onNext()} hapticType=\"medium\">\r\n        <button\r\n          type=\"submit\"\r\n          className=\"\r\n            w-full bg-blue-600 hover:bg-blue-700 text-white font-bold\r\n            py-4 px-6 rounded-xl transition-all shadow-lg hover:shadow-xl\r\n            focus:outline-none focus:ring-4 focus:ring-blue-300\r\n          \"\r\n          style={{ minHeight: '56px' }}\r\n        >\r\n          Next: Vehicle Selection\r\n        </button>\r\n      </TouchFeedback>\r\n    </motion.form>\r\n  );\r\n};\r\n\r\nexport default IncidentInfoStep;\r\n","/**\r\n * AddVehicleModal Component\r\n * \r\n * Modal for adding a new vehicle inline within the ICS-212 form\r\n * Adapted from VehicleManagement component\r\n */\r\n\r\nimport React, { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { X, Save } from 'lucide-react';\r\nimport { API_BASE_URL } from '../../lib/config';\r\nimport { showToast } from '../mobile/Toast';\r\nimport type { Vehicle } from '../../types';\r\n\r\ninterface AddVehicleModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onVehicleAdded: (vehicle: Vehicle) => void;\r\n}\r\n\r\ninterface VehicleFormData {\r\n  regUnit: string;\r\n  agency: string;\r\n  vehicleMake: string;\r\n  vehicleType: string;\r\n  incidentId: string;\r\n  vehicleId: string;\r\n  features: string;\r\n  licenseNumber: string;\r\n  notes: string;\r\n  vehicleStatus: 'Active' | 'Inactive' | 'Maintenance' | 'Deployed';\r\n}\r\n\r\nexport function AddVehicleModal({ isOpen, onClose, onVehicleAdded }: AddVehicleModalProps) {\r\n  const [formData, setFormData] = useState<VehicleFormData>({\r\n    regUnit: '',\r\n    agency: '',\r\n    vehicleMake: '',\r\n    vehicleType: '',\r\n    incidentId: '',\r\n    vehicleId: '',\r\n    features: '',\r\n    licenseNumber: '',\r\n    notes: '',\r\n    vehicleStatus: 'Active'\r\n  });\r\n  const [formErrors, setFormErrors] = useState<Record<string, string>>({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      regUnit: '',\r\n      agency: '',\r\n      vehicleMake: '',\r\n      vehicleType: '',\r\n      incidentId: '',\r\n      vehicleId: '',\r\n      features: '',\r\n      licenseNumber: '',\r\n      notes: '',\r\n      vehicleStatus: 'Active'\r\n    });\r\n    setFormErrors({});\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (!isSubmitting) {\r\n      resetForm();\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  const validateForm = (): boolean => {\r\n    const errors: Record<string, string> = {};\r\n    \r\n    // Required: Registered Unit\r\n    if (!formData.regUnit.trim()) {\r\n      errors.regUnit = 'Registered Unit is required';\r\n    } else if (formData.regUnit.length > 100) {\r\n      errors.regUnit = 'Registered Unit must be 100 characters or less';\r\n    }\r\n    \r\n    // Required: Make\r\n    if (!formData.vehicleMake.trim()) {\r\n      errors.vehicleMake = 'Vehicle Make is required';\r\n    }\r\n    \r\n    // At least one other field must be filled\r\n    const otherFields = [\r\n      formData.agency,\r\n      formData.vehicleType,\r\n      formData.incidentId,\r\n      formData.vehicleId,\r\n      formData.features,\r\n      formData.licenseNumber,\r\n      formData.notes\r\n    ];\r\n    \r\n    if (!otherFields.some(field => field.trim())) {\r\n      errors.general = 'At least one additional field must be filled';\r\n    }\r\n    \r\n    setFormErrors(errors);\r\n    return Object.keys(errors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      showToast({ message: 'Please fix the validation errors', type: 'error' });\r\n      return;\r\n    }\r\n    \r\n    setIsSubmitting(true);\r\n    \r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/vehicles`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(formData)\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        const error = await response.json();\r\n        throw new Error(error.message || 'Failed to create vehicle');\r\n      }\r\n      \r\n      const result = await response.json();\r\n      showToast({ message: 'Vehicle created successfully', type: 'success' });\r\n      \r\n      // Return the newly created vehicle to parent\r\n      onVehicleAdded(result.vehicle);\r\n      \r\n      // Close modal and reset form\r\n      resetForm();\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Error creating vehicle:', error);\r\n      showToast({ \r\n        message: error instanceof Error ? error.message : 'Failed to create vehicle', \r\n        type: 'error' \r\n      });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      <div className=\"fixed inset-0 z-50 overflow-y-auto\">\r\n        <div className=\"flex min-h-screen items-center justify-center p-4\">\r\n          {/* Backdrop */}\r\n          <motion.div \r\n            className=\"fixed inset-0 bg-black bg-opacity-50 transition-opacity\"\r\n            onClick={handleClose}\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n          />\r\n          \r\n          {/* Modal */}\r\n          <motion.div \r\n            className=\"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\"\r\n            initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n            exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n            transition={{ duration: 0.2 }}\r\n          >\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10\">\r\n              <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n                Add New Vehicle\r\n              </h2>\r\n              <button\r\n                onClick={handleClose}\r\n                disabled={isSubmitting}\r\n                className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                <X className=\"w-6 h-6\" />\r\n              </button>\r\n            </div>\r\n            \r\n            {/* Content */}\r\n            <form onSubmit={handleSubmit} className=\"p-6\">\r\n              <div className=\"space-y-4\">\r\n                {/* General Error */}\r\n                {formErrors.general && (\r\n                  <div className=\"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm\">\r\n                    {formErrors.general}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Registered Unit */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                    Registered Unit <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.regUnit}\r\n                    onChange={(e) => setFormData({ ...formData, regUnit: e.target.value })}\r\n                    className={`w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:text-white ${\r\n                      formErrors.regUnit ? 'border-red-500' : 'border-gray-300 dark:border-gray-600'\r\n                    }`}\r\n                    placeholder=\"e.g., USAR-01\"\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  {formErrors.regUnit && (\r\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{formErrors.regUnit}</p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Agency */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                    Agency\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.agency}\r\n                    onChange={(e) => setFormData({ ...formData, agency: e.target.value })}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white\"\r\n                    placeholder=\"e.g., FEMA\"\r\n                    disabled={isSubmitting}\r\n                  />\r\n                </div>\r\n\r\n                {/* Make */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                    Make <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.vehicleMake}\r\n                    onChange={(e) => setFormData({ ...formData, vehicleMake: e.target.value })}\r\n                    className={`w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:text-white ${\r\n                      formErrors.vehicleMake ? 'border-red-500' : 'border-gray-300 dark:border-gray-600'\r\n                    }`}\r\n                    placeholder=\"e.g., Ford, Chevrolet, International\"\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  {formErrors.vehicleMake && (\r\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{formErrors.vehicleMake}</p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Category/Type */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                    Category/Type\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.vehicleType}\r\n                    onChange={(e) => setFormData({ ...formData, vehicleType: e.target.value })}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white\"\r\n                    placeholder=\"e.g., Heavy Rescue Truck, Cargo Trailer\"\r\n                    disabled={isSubmitting}\r\n                  />\r\n                </div>\r\n\r\n                {/* License Number */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                    License Number\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.licenseNumber}\r\n                    onChange={(e) => setFormData({ ...formData, licenseNumber: e.target.value })}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white\"\r\n                    placeholder=\"e.g., ABC-1234\"\r\n                    disabled={isSubmitting}\r\n                  />\r\n                </div>\r\n\r\n                {/* Incident ID */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                    Incident ID\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.incidentId}\r\n                    onChange={(e) => setFormData({ ...formData, incidentId: e.target.value })}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white\"\r\n                    placeholder=\"e.g., INC-2024-001\"\r\n                    disabled={isSubmitting}\r\n                  />\r\n                </div>\r\n\r\n                {/* Classification (Vehicle ID) */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                    Classification\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formData.vehicleId}\r\n                    onChange={(e) => setFormData({ ...formData, vehicleId: e.target.value })}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white\"\r\n                    placeholder=\"e.g., VEHICLE-001\"\r\n                    disabled={isSubmitting}\r\n                  />\r\n                </div>\r\n\r\n                {/* Features */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                    Features\r\n                  </label>\r\n                  <textarea\r\n                    value={formData.features}\r\n                    onChange={(e) => setFormData({ ...formData, features: e.target.value })}\r\n                    rows={3}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white\"\r\n                    placeholder=\"Describe special features, equipment, or capabilities\"\r\n                    disabled={isSubmitting}\r\n                  />\r\n                </div>\r\n\r\n                {/* Status */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                    Status\r\n                  </label>\r\n                  <select\r\n                    value={formData.vehicleStatus}\r\n                    onChange={(e) => setFormData({ ...formData, vehicleStatus: e.target.value as VehicleFormData['vehicleStatus'] })}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white\"\r\n                    disabled={isSubmitting}\r\n                  >\r\n                    <option value=\"Active\">Active</option>\r\n                    <option value=\"Inactive\">Inactive</option>\r\n                    <option value=\"Maintenance\">Maintenance</option>\r\n                    <option value=\"Deployed\">Deployed</option>\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Notes */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                    Notes\r\n                  </label>\r\n                  <textarea\r\n                    value={formData.notes}\r\n                    onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\r\n                    rows={3}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white\"\r\n                    placeholder=\"Additional notes or comments\"\r\n                    disabled={isSubmitting}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Buttons */}\r\n              <div className=\"flex gap-3 justify-end pt-6 sticky bottom-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 -mx-6 px-6 py-4 mt-6\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleClose}\r\n                  disabled={isSubmitting}\r\n                  className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={isSubmitting}\r\n                  className=\"px-4 py-2 bg-[#0066FF] text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n                >\r\n                  {isSubmitting ? (\r\n                    <>\r\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\" />\r\n                      Creating...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Save className=\"w-4 h-4\" />\r\n                      Create Vehicle\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </motion.div>\r\n        </div>\r\n      </div>\r\n    </AnimatePresence>\r\n  );\r\n}\r\n\r\nexport default AddVehicleModal;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Plus } from 'lucide-react';\r\nimport TouchFeedback from '../mobile/TouchFeedback';\r\nimport SkeletonLoader from '../mobile/SkeletonLoader';\r\nimport { AddVehicleModal } from './AddVehicleModal';\r\nimport { API_BASE_URL } from '../../lib/config';\r\nimport { showToast } from '../mobile/Toast';\r\nimport type { ICS212FormData, Vehicle } from '../../types';\r\n\r\ninterface VehicleSelectionStepProps {\r\n  formData: Partial<ICS212FormData>;\r\n  onChange: (field: keyof ICS212FormData, value: any) => void;\r\n  onNext: () => void;\r\n  onBack: () => void;\r\n  errors: Record<string, string>;\r\n}\r\n\r\nexport const VehicleSelectionStep: React.FC<VehicleSelectionStepProps> = ({\r\n  formData,\r\n  onChange,\r\n  onNext,\r\n  onBack,\r\n  errors,\r\n}) => {\r\n  const [vehicles, setVehicles] = useState<Vehicle[]>([]);\r\n  const [loadingVehicles, setLoadingVehicles] = useState(true);\r\n  const [selectedVehicle, setSelectedVehicle] = useState<Vehicle | null>(null);\r\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n\r\n  // Fetch vehicles on mount\r\n  useEffect(() => {\r\n    fetchVehicles();\r\n  }, []);\r\n\r\n  const fetchVehicles = async () => {\r\n    setLoadingVehicles(true);\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/vehicles`);\r\n      if (!response.ok) throw new Error('Failed to fetch vehicles');\r\n      const data = await response.json();\r\n      setVehicles(data.vehicles || []);\r\n    } catch (error) {\r\n      console.error('Error fetching vehicles:', error);\r\n      showToast({ message: 'Failed to load vehicles', type: 'error' });\r\n    } finally {\r\n      setLoadingVehicles(false);\r\n    }\r\n  };\r\n\r\n  const handleVehicleSelect = (vehicleId: string) => {\r\n    if (!vehicleId) {\r\n      // Clear selection\r\n      setSelectedVehicle(null);\r\n      onChange('vehicleIdNo', '');\r\n      onChange('vehicleLicenseNo', '');\r\n      onChange('vehicleType', '');\r\n      onChange('agencyRegUnit', '');\r\n      return;\r\n    }\r\n\r\n    // Special value for adding new vehicle\r\n    if (vehicleId === '__ADD_NEW__') {\r\n      setIsAddModalOpen(true);\r\n      return;\r\n    }\r\n\r\n    const vehicle = vehicles.find(v => v.id === vehicleId);\r\n    if (vehicle) {\r\n      setSelectedVehicle(vehicle);\r\n      // Auto-populate vehicle fields\r\n      onChange('vehicleIdNo', vehicle.vehicleId || '');\r\n      onChange('vehicleLicenseNo', vehicle.licenseNumber || '');\r\n      onChange('vehicleType', vehicle.vehicleType || '');\r\n      onChange('agencyRegUnit', vehicle.regUnit || '');\r\n    }\r\n  };\r\n\r\n  const handleVehicleAdded = async (newVehicle: Vehicle) => {\r\n    // Refresh vehicles list\r\n    await fetchVehicles();\r\n    \r\n    // Auto-select the newly added vehicle\r\n    setSelectedVehicle(newVehicle);\r\n    onChange('vehicleIdNo', newVehicle.vehicleId || '');\r\n    onChange('vehicleLicenseNo', newVehicle.licenseNumber || '');\r\n    onChange('vehicleType', newVehicle.vehicleType || '');\r\n    onChange('agencyRegUnit', newVehicle.regUnit || '');\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    onNext();\r\n  };\r\n\r\n  return (\r\n    <motion.form\r\n      className=\"space-y-6 p-4 md:p-6\"\r\n      onSubmit={handleSubmit}\r\n      initial={{ opacity: 0, x: 20 }}\r\n      animate={{ opacity: 1, x: 0 }}\r\n      exit={{ opacity: 0, x: -20 }}\r\n      transition={{ duration: 0.3 }}\r\n    >\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\r\n          Vehicle Selection\r\n        </h2>\r\n        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n          Select the vehicle to inspect or add a new one\r\n        </p>\r\n      </div>\r\n\r\n      {/* Vehicle Dropdown */}\r\n      <div>\r\n        <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">\r\n          Vehicle Type\r\n        </label>\r\n        {loadingVehicles ? (\r\n          <SkeletonLoader type=\"rectangle\" />\r\n        ) : (\r\n          <select\r\n            value={selectedVehicle?.id || ''}\r\n            onChange={(e) => handleVehicleSelect(e.target.value)}\r\n            className={`\r\n              w-full px-4 py-3 text-base rounded-xl border-2 transition-all\r\n              focus:outline-none focus:ring-4\r\n              ${errors.vehicleIdNo \r\n                ? 'border-red-500 focus:border-red-500 focus:ring-red-100' \r\n                : 'border-gray-300 focus:border-blue-500 focus:ring-blue-100'\r\n              }\r\n              dark:bg-gray-700 dark:text-white\r\n            `}\r\n            style={{ minHeight: '56px' }}\r\n          >\r\n            <option value=\"\">Select a vehicle (optional)</option>\r\n            {vehicles.map((vehicle) => (\r\n              <option key={vehicle.id} value={vehicle.id}>\r\n                {vehicle.vehicleType && vehicle.vehicleMake \r\n                  ? `${vehicle.vehicleType} - ${vehicle.vehicleMake} ${vehicle.regUnit || ''}`\r\n                  : vehicle.regUnit || vehicle.vehicleType || vehicle.vehicleMake || 'Unknown Vehicle'\r\n                }\r\n              </option>\r\n            ))}\r\n            <option value=\"__ADD_NEW__\" className=\"font-semibold\">\r\n              + Add New Vehicle\r\n            </option>\r\n          </select>\r\n        )}\r\n        {!loadingVehicles && vehicles.length === 0 && (\r\n          <p className=\"mt-1 text-xs text-gray-500\">\r\n            No vehicles found. Click \"+ Add New Vehicle\" to create one.\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Add Vehicle Button (alternative placement) */}\r\n      <div className=\"flex justify-center\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => setIsAddModalOpen(true)}\r\n          className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors\"\r\n        >\r\n          <Plus className=\"w-4 h-4\" />\r\n          Add New Vehicle\r\n        </button>\r\n      </div>\r\n\r\n      {/* Selected Vehicle Info Card */}\r\n      {selectedVehicle && (\r\n        <motion.div\r\n          className=\"bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-200 dark:border-blue-800 rounded-xl p-4\"\r\n          initial={{ opacity: 0, y: 10 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.3 }}\r\n        >\r\n          <h3 className=\"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-3\">\r\n            Selected Vehicle Details\r\n          </h3>\r\n          <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n            <div>\r\n              <p className=\"text-gray-600 dark:text-gray-400\">Make/Type</p>\r\n              <p className=\"font-semibold text-gray-900 dark:text-white\">\r\n                {[selectedVehicle.vehicleMake, selectedVehicle.vehicleType]\r\n                  .filter(Boolean)\r\n                  .join(' ') || 'N/A'}\r\n              </p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-gray-600 dark:text-gray-400\">License Plate</p>\r\n              <p className=\"font-semibold text-gray-900 dark:text-white\">\r\n                {selectedVehicle.licenseNumber || 'N/A'}\r\n              </p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-gray-600 dark:text-gray-400\">Agency Unit</p>\r\n              <p className=\"font-semibold text-gray-900 dark:text-white\">\r\n                {selectedVehicle.regUnit || 'N/A'}\r\n              </p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-gray-600 dark:text-gray-400\">Status</p>\r\n              <span\r\n                className={`\r\n                  inline-block px-2 py-1 text-xs font-medium rounded-full\r\n                  ${selectedVehicle.vehicleStatus === 'Active' \r\n                    ? 'bg-green-100 text-green-800' \r\n                    : selectedVehicle.vehicleStatus === 'Inactive'\r\n                    ? 'bg-red-100 text-red-800'\r\n                    : 'bg-yellow-100 text-yellow-800'\r\n                  }\r\n                `}\r\n              >\r\n                {selectedVehicle.vehicleStatus || 'Unknown'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n\r\n      {/* Odometer Reading */}\r\n      <div>\r\n        <label\r\n          htmlFor=\"odometerReading\"\r\n          className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\"\r\n        >\r\n          Odometer Reading (miles)\r\n        </label>\r\n        <input\r\n          type=\"number\"\r\n          id=\"odometerReading\"\r\n          value={formData.odometerReading || ''}\r\n          onChange={(e) => onChange('odometerReading', parseInt(e.target.value) || 0)}\r\n          placeholder=\"Enter current odometer reading\"\r\n          min={0}\r\n          max={999999999}\r\n          className={`\r\n            w-full px-4 py-3 text-base rounded-xl border-2 transition-all\r\n            focus:outline-none focus:ring-4\r\n            ${errors.odometerReading \r\n              ? 'border-red-500 focus:border-red-500 focus:ring-red-100' \r\n              : 'border-gray-300 focus:border-blue-500 focus:ring-blue-100'\r\n            }\r\n            dark:bg-gray-700 dark:text-white\r\n          `}\r\n          style={{ minHeight: '56px' }}\r\n        />\r\n        {errors.odometerReading && (\r\n          <p className=\"mt-1 text-sm text-red-600\">{errors.odometerReading}</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Auto-populated fields (editable) */}\r\n      <div className=\"space-y-4 bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4\">\r\n        <h3 className=\"text-sm font-semibold text-gray-700 dark:text-gray-300\">\r\n          Vehicle Information (Auto-populated, editable)\r\n        </h3>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"block text-xs text-gray-600 dark:text-gray-400 mb-1\">\r\n              License Number\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.vehicleLicenseNo || ''}\r\n              onChange={(e) => onChange('vehicleLicenseNo', e.target.value)}\r\n              placeholder=\"Enter license number\"\r\n              className=\"w-full px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-xs text-gray-600 dark:text-gray-400 mb-1\">\r\n              Agency Reg/Unit\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.agencyRegUnit || ''}\r\n              onChange={(e) => onChange('agencyRegUnit', e.target.value)}\r\n              placeholder=\"Enter agency unit\"\r\n              className=\"w-full px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"md:col-span-2\">\r\n            <label className=\"block text-xs text-gray-600 dark:text-gray-400 mb-1\">\r\n              Vehicle Type\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.vehicleType || ''}\r\n              onChange={(e) => onChange('vehicleType', e.target.value)}\r\n              placeholder=\"e.g., Rescue, Engine, Ladder\"\r\n              className=\"w-full px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Navigation Buttons */}\r\n      <div className=\"flex gap-3\">\r\n        <TouchFeedback onTap={() => onBack()} hapticType=\"light\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onBack}\r\n            className=\"\r\n              flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold\r\n              py-4 px-6 rounded-xl transition-all\r\n              focus:outline-none focus:ring-4 focus:ring-gray-300\r\n            \"\r\n            style={{ minHeight: '56px' }}\r\n          >\r\n            Back\r\n          </button>\r\n        </TouchFeedback>\r\n\r\n        <TouchFeedback onTap={() => onNext()} hapticType=\"medium\">\r\n          <button\r\n            type=\"submit\"\r\n            className=\"\r\n              flex-[2] bg-blue-600 hover:bg-blue-700 text-white font-bold\r\n              py-4 px-6 rounded-xl transition-all shadow-lg hover:shadow-xl\r\n              focus:outline-none focus:ring-4 focus:ring-blue-300\r\n            \"\r\n            style={{ minHeight: '56px' }}\r\n          >\r\n            Next: Inspection Items\r\n          </button>\r\n        </TouchFeedback>\r\n      </div>\r\n\r\n      {/* Add Vehicle Modal */}\r\n      <AddVehicleModal\r\n        isOpen={isAddModalOpen}\r\n        onClose={() => setIsAddModalOpen(false)}\r\n        onVehicleAdded={handleVehicleAdded}\r\n      />\r\n    </motion.form>\r\n  );\r\n};\r\n\r\nexport default VehicleSelectionStep;\r\n","import React, { useState, useMemo } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { ChevronDown, AlertTriangle, CheckCircle, XCircle } from 'lucide-react';\r\nimport TouchFeedback from '../mobile/TouchFeedback';\r\nimport type { ICS212FormData, InspectionItem } from '../../types';\r\n\r\ninterface InspectionItemsStepProps {\r\n  formData: Partial<ICS212FormData>;\r\n  onChange: (field: keyof ICS212FormData, value: any) => void;\r\n  onNext: () => void;\r\n  onBack: () => void;\r\n  errors: Record<string, string>;\r\n}\r\n\r\n// Define all 17 inspection items (items 1-13 are safety-critical)\r\nconst INSPECTION_ITEMS: InspectionItem[] = [\r\n  { itemNumber: 1, description: 'Gauges and lights', status: 'n/a', isSafetyItem: true, reference: 'See back*' },\r\n  { itemNumber: 2, description: 'Seat belts', status: 'n/a', isSafetyItem: true, reference: 'See back*' },\r\n  { itemNumber: 3, description: 'Glass and mirrors', status: 'n/a', isSafetyItem: true, reference: 'See back*' },\r\n  { itemNumber: 4, description: 'Wipers and horn', status: 'n/a', isSafetyItem: true, reference: 'See back*' },\r\n  { itemNumber: 5, description: 'Engine compartment', status: 'n/a', isSafetyItem: true, reference: 'See back*' },\r\n  { itemNumber: 6, description: 'Fuel System', status: 'n/a', isSafetyItem: true, reference: 'See back*' },\r\n  { itemNumber: 7, description: 'Steering', status: 'n/a', isSafetyItem: true, reference: 'See back*' },\r\n  { itemNumber: 8, description: 'Brakes', status: 'n/a', isSafetyItem: true, reference: 'See back*' },\r\n  { itemNumber: 9, description: 'Drive line U-joints', status: 'n/a', isSafetyItem: false, reference: 'Check play' },\r\n  { itemNumber: 10, description: 'Springs and shocks', status: 'n/a', isSafetyItem: true, reference: 'See back*' },\r\n  { itemNumber: 11, description: 'Exhaust system', status: 'n/a', isSafetyItem: true, reference: 'See back*' },\r\n  { itemNumber: 12, description: 'Frame', status: 'n/a', isSafetyItem: true, reference: 'See back*' },\r\n  { itemNumber: 13, description: 'Tire and wheels', status: 'n/a', isSafetyItem: true, reference: 'See back*' },\r\n  { itemNumber: 14, description: 'Coupling devices / Emergency exit (buses)', status: 'n/a', isSafetyItem: false },\r\n  { itemNumber: 15, description: 'Pump operation', status: 'n/a', isSafetyItem: false },\r\n  { itemNumber: 16, description: 'Damage on incident', status: 'n/a', isSafetyItem: false },\r\n  { itemNumber: 17, description: 'Other', status: 'n/a', isSafetyItem: false },\r\n];\r\n\r\nexport const InspectionItemsStep: React.FC<InspectionItemsStepProps> = ({\r\n  formData,\r\n  onChange,\r\n  onNext,\r\n  onBack,\r\n  errors: _errors,\r\n}) => {\r\n  const [expandedSections, setExpandedSections] = useState<Set<string>>(new Set(['pre-trip', 'safety', 'operational']));\r\n  \r\n  // Initialize inspection items if not already set\r\n  const inspectionItems = formData.inspectionItems || INSPECTION_ITEMS;\r\n\r\n  // Calculate release decision\r\n  const releaseDecision = useMemo(() => {\r\n    const safetyItemsFailed = inspectionItems.some(\r\n      item => item.isSafetyItem && item.status === 'fail'\r\n    );\r\n    return safetyItemsFailed ? 'hold' : 'release';\r\n  }, [inspectionItems]);\r\n\r\n  const handleItemStatusChange = (itemNumber: number, status: 'pass' | 'fail' | 'n/a') => {\r\n    const updatedItems = inspectionItems.map(item =>\r\n      item.itemNumber === itemNumber ? { ...item, status } : item\r\n    );\r\n    onChange('inspectionItems', updatedItems);\r\n    onChange('releaseStatus', releaseDecision);\r\n  };\r\n\r\n  const toggleSection = (section: string) => {\r\n    const newExpanded = new Set(expandedSections);\r\n    if (newExpanded.has(section)) {\r\n      newExpanded.delete(section);\r\n    } else {\r\n      newExpanded.add(section);\r\n    }\r\n    setExpandedSections(newExpanded);\r\n  };\r\n\r\n  const renderInspectionItem = (item: InspectionItem) => {\r\n    const itemData = inspectionItems.find(i => i.itemNumber === item.itemNumber) || item;\r\n\r\n    return (\r\n      <div key={item.itemNumber} className=\"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700\">\r\n        <div className=\"flex items-start gap-3\">\r\n          {item.isSafetyItem && (\r\n            <AlertTriangle className=\"w-5 h-5 text-amber-500 flex-shrink-0 mt-1\" />\r\n          )}\r\n          <div className=\"flex-1\">\r\n            <div className=\"flex items-start justify-between mb-2\">\r\n              <div>\r\n                <h4 className=\"font-semibold text-gray-900 dark:text-white\">\r\n                  {item.itemNumber}. {item.description}\r\n                </h4>\r\n                {item.reference && (\r\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400\">{item.reference}</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Status Toggle Buttons */}\r\n            <div className=\"flex gap-2 mt-3\">\r\n              <TouchFeedback onTap={() => handleItemStatusChange(item.itemNumber, 'pass')} hapticType=\"light\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => handleItemStatusChange(item.itemNumber, 'pass')}\r\n                  className={`\r\n                    flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg\r\n                    font-semibold transition-all border-2\r\n                    ${itemData.status === 'pass'\r\n                      ? 'bg-green-500 text-white border-green-600 shadow-lg'\r\n                      : 'bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600'\r\n                    }\r\n                  `}\r\n                  style={{ minHeight: '48px' }}\r\n                >\r\n                  <CheckCircle className=\"w-4 h-4\" />\r\n                  Pass\r\n                </button>\r\n              </TouchFeedback>\r\n\r\n              <TouchFeedback onTap={() => handleItemStatusChange(item.itemNumber, 'fail')} hapticType=\"medium\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => handleItemStatusChange(item.itemNumber, 'fail')}\r\n                  className={`\r\n                    flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg\r\n                    font-semibold transition-all border-2\r\n                    ${itemData.status === 'fail'\r\n                      ? 'bg-red-500 text-white border-red-600 shadow-lg'\r\n                      : 'bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600'\r\n                    }\r\n                  `}\r\n                  style={{ minHeight: '48px' }}\r\n                >\r\n                  <XCircle className=\"w-4 h-4\" />\r\n                  Fail\r\n                </button>\r\n              </TouchFeedback>\r\n\r\n              <TouchFeedback onTap={() => handleItemStatusChange(item.itemNumber, 'n/a')} hapticType=\"light\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => handleItemStatusChange(item.itemNumber, 'n/a')}\r\n                  className={`\r\n                    flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg\r\n                    font-semibold transition-all border-2\r\n                    ${itemData.status === 'n/a'\r\n                      ? 'bg-gray-400 text-white border-gray-500 shadow-lg'\r\n                      : 'bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600'\r\n                    }\r\n                  `}\r\n                  style={{ minHeight: '48px' }}\r\n                >\r\n                  N/A\r\n                </button>\r\n              </TouchFeedback>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderSection = (title: string, sectionKey: string, items: InspectionItem[], subtitle?: string) => {\r\n    const isExpanded = expandedSections.has(sectionKey);\r\n\r\n    return (\r\n      <div className=\"bg-gray-50 dark:bg-gray-800/50 rounded-xl overflow-hidden\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => toggleSection(sectionKey)}\r\n          className=\"w-full p-4 flex items-center justify-between hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors\"\r\n        >\r\n          <div className=\"text-left\">\r\n            <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">\r\n              {title}\r\n            </h3>\r\n            {subtitle && (\r\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">{subtitle}</p>\r\n            )}\r\n          </div>\r\n          <ChevronDown\r\n            className={`w-6 h-6 text-gray-600 dark:text-gray-400 transition-transform ${isExpanded ? 'rotate-180' : ''}`}\r\n          />\r\n        </button>\r\n\r\n        <AnimatePresence>\r\n          {isExpanded && (\r\n            <motion.div\r\n              initial={{ height: 0, opacity: 0 }}\r\n              animate={{ height: 'auto', opacity: 1 }}\r\n              exit={{ height: 0, opacity: 0 }}\r\n              transition={{ duration: 0.3 }}\r\n              className=\"overflow-hidden\"\r\n            >\r\n              <div className=\"p-4 space-y-3\">\r\n                {items.map(renderInspectionItem)}\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"space-y-6 p-4 md:p-6\"\r\n      initial={{ opacity: 0, x: 20 }}\r\n      animate={{ opacity: 1, x: 0 }}\r\n      exit={{ opacity: 0, x: -20 }}\r\n      transition={{ duration: 0.3 }}\r\n    >\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\r\n          Vehicle Inspection\r\n        </h2>\r\n        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n          Inspect all items and mark Pass, Fail, or N/A\r\n        </p>\r\n      </div>\r\n\r\n      {/* Release Decision Banner */}\r\n      <motion.div\r\n        className={`\r\n          p-4 rounded-xl border-2 flex items-center justify-between\r\n          ${releaseDecision === 'hold'\r\n            ? 'bg-red-50 border-red-500 dark:bg-red-900/20 dark:border-red-700'\r\n            : 'bg-green-50 border-green-500 dark:bg-green-900/20 dark:border-green-700'\r\n          }\r\n        `}\r\n        layout\r\n      >\r\n        <div className=\"flex items-center gap-3\">\r\n          {releaseDecision === 'hold' ? (\r\n            <AlertTriangle className=\"w-6 h-6 text-red-600 dark:text-red-400\" />\r\n          ) : (\r\n            <CheckCircle className=\"w-6 h-6 text-green-600 dark:text-green-400\" />\r\n          )}\r\n          <div>\r\n            <p className={`font-bold text-lg ${releaseDecision === 'hold' ? 'text-red-900 dark:text-red-100' : 'text-green-900 dark:text-green-100'}`}>\r\n              {releaseDecision === 'hold' ? 'üî¥ HOLD FOR REPAIRS' : 'üü¢ RELEASED'}\r\n            </p>\r\n            {releaseDecision === 'hold' && (\r\n              <p className=\"text-sm text-red-700 dark:text-red-300\">\r\n                Safety Item ‚Äì Do Not Release Until Repaired\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n\r\n      {/* Inspection Sections */}\r\n      <div className=\"space-y-4\">\r\n        {renderSection(\r\n          'Pre-Trip Items',\r\n          'pre-trip',\r\n          INSPECTION_ITEMS.slice(0, 5),\r\n          'Items 1-5'\r\n        )}\r\n        \r\n        {renderSection(\r\n          'Safety Equipment',\r\n          'safety',\r\n          INSPECTION_ITEMS.slice(5, 13),\r\n          '‚ö†Ô∏è Items 6-13 - All Safety-Critical'\r\n        )}\r\n        \r\n        {renderSection(\r\n          'Operational Systems',\r\n          'operational',\r\n          INSPECTION_ITEMS.slice(13),\r\n          'Items 14-17'\r\n        )}\r\n      </div>\r\n\r\n      {/* Navigation Buttons */}\r\n      <div className=\"flex gap-3 sticky bottom-4 bg-white dark:bg-gray-900 p-4 rounded-xl shadow-lg\">\r\n        <TouchFeedback onTap={() => onBack()} hapticType=\"light\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onBack}\r\n            className=\"\r\n              flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold\r\n              py-4 px-6 rounded-xl transition-all\r\n              focus:outline-none focus:ring-4 focus:ring-gray-300\r\n            \"\r\n            style={{ minHeight: '56px' }}\r\n          >\r\n            Back\r\n          </button>\r\n        </TouchFeedback>\r\n\r\n        <TouchFeedback onTap={() => onNext()} hapticType=\"medium\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onNext}\r\n            className=\"\r\n              flex-[2] bg-blue-600 hover:bg-blue-700 text-white font-bold\r\n              py-4 px-6 rounded-xl transition-all shadow-lg hover:shadow-xl\r\n              focus:outline-none focus:ring-4 focus:ring-blue-300\r\n            \"\r\n            style={{ minHeight: '56px' }}\r\n          >\r\n            Next: Comments\r\n          </button>\r\n        </TouchFeedback>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default InspectionItemsStep;\r\n","import React, { useRef, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport TouchFeedback from '../mobile/TouchFeedback';\r\nimport type { ICS212FormData } from '../../types';\r\n\r\ninterface CommentsStepProps {\r\n  formData: Partial<ICS212FormData>;\r\n  onChange: (field: keyof ICS212FormData, value: any) => void;\r\n  onNext: () => void;\r\n  onBack: () => void;\r\n}\r\n\r\nexport const CommentsStep: React.FC<CommentsStepProps> = ({\r\n  formData,\r\n  onChange,\r\n  onNext,\r\n  onBack,\r\n}) => {\r\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\r\n  const maxLength = 2000;\r\n  const currentLength = (formData.additionalComments || '').length;\r\n\r\n  // Auto-resize textarea\r\n  useEffect(() => {\r\n    if (textareaRef.current) {\r\n      textareaRef.current.style.height = 'auto';\r\n      textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`;\r\n    }\r\n  }, [formData.additionalComments]);\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"space-y-6 p-4 md:p-6\"\r\n      initial={{ opacity: 0, x: 20 }}\r\n      animate={{ opacity: 1, x: 0 }}\r\n      exit={{ opacity: 0, x: -20 }}\r\n      transition={{ duration: 0.3 }}\r\n    >\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\r\n          Additional Comments\r\n        </h2>\r\n        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n          Add any notes, repair recommendations, or additional findings (optional)\r\n        </p>\r\n      </div>\r\n\r\n      {/* Comments Textarea */}\r\n      <div>\r\n        <label\r\n          htmlFor=\"additionalComments\"\r\n          className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\"\r\n        >\r\n          Comments <span className=\"text-gray-500\">(Optional)</span>\r\n        </label>\r\n        <textarea\r\n          ref={textareaRef}\r\n          id=\"additionalComments\"\r\n          value={formData.additionalComments || ''}\r\n          onChange={(e) => onChange('additionalComments', e.target.value)}\r\n          placeholder=\"Enter any additional comments, notes, or repair recommendations...\"\r\n          maxLength={maxLength}\r\n          rows={10}\r\n          className=\"\r\n            w-full px-4 py-3 text-base rounded-xl border-2 border-gray-300\r\n            transition-all focus:outline-none focus:ring-4\r\n            focus:border-blue-500 focus:ring-blue-100 resize-none\r\n            dark:bg-gray-800 dark:border-gray-600 dark:text-white\r\n          \"\r\n          style={{ minHeight: '200px' }}\r\n        />\r\n        <div className=\"flex justify-between items-center mt-2\">\r\n          <p className=\"text-xs text-gray-500\">\r\n            Detailed notes help with repairs and maintenance tracking\r\n          </p>\r\n          <p className={`text-sm font-medium ${currentLength > maxLength * 0.9 ? 'text-red-600' : 'text-gray-600'}`}>\r\n            {currentLength} / {maxLength}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Quick Suggestion Buttons */}\r\n      <div className=\"bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4\">\r\n        <h3 className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3\">\r\n          Quick Suggestions\r\n        </h3>\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          {[\r\n            'No issues found',\r\n            'Minor wear observed',\r\n            'Requires immediate attention',\r\n            'Scheduled maintenance due',\r\n            'Pre-incident condition noted',\r\n          ].map((suggestion) => (\r\n            <button\r\n              key={suggestion}\r\n              type=\"button\"\r\n              onClick={() => {\r\n                const current = formData.additionalComments || '';\r\n                const separator = current ? '\\n' : '';\r\n                onChange('additionalComments', `${current}${separator}${suggestion}`);\r\n              }}\r\n              className=\"\r\n                px-3 py-2 text-sm rounded-lg bg-white dark:bg-gray-700\r\n                border border-gray-300 dark:border-gray-600\r\n                hover:bg-blue-50 hover:border-blue-300 dark:hover:bg-gray-600\r\n                transition-colors text-gray-700 dark:text-gray-300\r\n              \"\r\n            >\r\n              + {suggestion}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Navigation Buttons */}\r\n      <div className=\"flex gap-3 sticky bottom-4 bg-white dark:bg-gray-900 p-4 rounded-xl shadow-lg\">\r\n        <TouchFeedback onTap={() => onBack()} hapticType=\"light\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onBack}\r\n            className=\"\r\n              flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold\r\n              py-4 px-6 rounded-xl transition-all\r\n              focus:outline-none focus:ring-4 focus:ring-gray-300\r\n            \"\r\n            style={{ minHeight: '56px' }}\r\n          >\r\n            Back\r\n          </button>\r\n        </TouchFeedback>\r\n\r\n        <TouchFeedback onTap={() => onNext()} hapticType=\"medium\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onNext}\r\n            className=\"\r\n              flex-[2] bg-blue-600 hover:bg-blue-700 text-white font-bold\r\n              py-4 px-6 rounded-xl transition-all shadow-lg hover:shadow-xl\r\n              focus:outline-none focus:ring-4 focus:ring-blue-300\r\n            \"\r\n            style={{ minHeight: '56px' }}\r\n          >\r\n            Next: Inspector Signature\r\n          </button>\r\n        </TouchFeedback>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default CommentsStep;\r\n","import React, { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Lock, CheckCircle } from 'lucide-react';\r\nimport TouchFeedback from '../mobile/TouchFeedback';\r\nimport SignatureCanvas from '../SignatureCanvas';\r\nimport type { ICS212FormData, DigitalSignature } from '../../types';\r\n\r\ninterface InspectorSignatureStepProps {\r\n  formData: Partial<ICS212FormData>;\r\n  onChange: (field: keyof ICS212FormData, value: any) => void;\r\n  onNext: () => void;\r\n  onBack: () => void;\r\n  errors: Record<string, string>;\r\n}\r\n\r\nexport const InspectorSignatureStep: React.FC<InspectorSignatureStepProps> = ({\r\n  formData,\r\n  onChange,\r\n  onNext,\r\n  onBack,\r\n  errors,\r\n}) => {\r\n  const [hasSignedForm, setHasSignedForm] = useState(!!formData.inspectorSignature);\r\n\r\n  const handleSignatureSave = (signatureData: string) => {\r\n    const signature: DigitalSignature = {\r\n      imageData: signatureData,\r\n      signedAt: new Date().toISOString(),\r\n      signedBy: formData.inspectorNamePrint || '',\r\n      ipAddress: undefined,\r\n      deviceId: navigator.userAgent,\r\n    };\r\n    \r\n    onChange('inspectorSignature', signature);\r\n    setHasSignedForm(true);\r\n    \r\n    // Transition form status to inspector_signed\r\n    onChange('status', 'inspector_signed');\r\n  };\r\n\r\n  const getCurrentDateTime = () => {\r\n    const now = new Date();\r\n    return {\r\n      date: now.toISOString().split('T')[0],\r\n      time: now.toTimeString().slice(0, 5),\r\n    };\r\n  };\r\n\r\n  const { date: currentDate, time: currentTime } = getCurrentDateTime();\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"space-y-6 p-4 md:p-6\"\r\n      initial={{ opacity: 0, x: 20 }}\r\n      animate={{ opacity: 1, x: 0 }}\r\n      exit={{ opacity: 0, x: -20 }}\r\n      transition={{ duration: 0.3 }}\r\n    >\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\r\n          Inspector Signature\r\n        </h2>\r\n        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n          Sign to lock the inspection form and proceed to review\r\n        </p>\r\n      </div>\r\n\r\n      {/* Form Lock Warning */}\r\n      {hasSignedForm && (\r\n        <motion.div\r\n          className=\"bg-amber-50 dark:bg-amber-900/20 border-2 border-amber-500 rounded-xl p-4\"\r\n          initial={{ opacity: 0, y: -10 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n        >\r\n          <div className=\"flex items-center gap-3\">\r\n            <Lock className=\"w-6 h-6 text-amber-600 dark:text-amber-400\" />\r\n            <div>\r\n              <p className=\"font-bold text-amber-900 dark:text-amber-100\">\r\n                Form Locked\r\n              </p>\r\n              <p className=\"text-sm text-amber-700 dark:text-amber-300\">\r\n                Inspector signature has been recorded. Form is read-only.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n\r\n      {/* Inspector Name */}\r\n      <div>\r\n        <label\r\n          htmlFor=\"inspectorNamePrint\"\r\n          className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\"\r\n        >\r\n          Inspector Name (Print) *\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"inspectorNamePrint\"\r\n          value={formData.inspectorNamePrint || ''}\r\n          onChange={(e) => onChange('inspectorNamePrint', e.target.value)}\r\n          placeholder=\"Enter your full name\"\r\n          maxLength={100}\r\n          disabled={hasSignedForm}\r\n          className={`\r\n            w-full px-4 py-3 text-base rounded-xl border-2 transition-all\r\n            focus:outline-none focus:ring-4\r\n            ${hasSignedForm \r\n              ? 'bg-gray-100 dark:bg-gray-800 border-gray-300 cursor-not-allowed' \r\n              : errors.inspectorNamePrint \r\n              ? 'border-red-500 focus:border-red-500 focus:ring-red-100' \r\n              : 'border-gray-300 focus:border-blue-500 focus:ring-blue-100'\r\n            }\r\n          `}\r\n          style={{ minHeight: '56px' }}\r\n        />\r\n        {errors.inspectorNamePrint && !hasSignedForm && (\r\n          <p className=\"mt-1 text-sm text-red-600\">{errors.inspectorNamePrint}</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Date and Time Display */}\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <div className=\"bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4\">\r\n          <p className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">Date</p>\r\n          <p className=\"text-lg font-bold text-gray-900 dark:text-white\">\r\n            {new Date(formData.inspectorDate || currentDate).toLocaleDateString()}\r\n          </p>\r\n        </div>\r\n        <div className=\"bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4\">\r\n          <p className=\"text-xs text-gray-600 dark:text-gray-400 mb-1\">Time</p>\r\n          <p className=\"text-lg font-bold text-gray-900 dark:text-white\">\r\n            {formData.inspectorTime || currentTime}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Signature Canvas */}\r\n      <div>\r\n        <SignatureCanvas\r\n          onSave={handleSignatureSave}\r\n          initialSignature={formData.inspectorSignature?.imageData}\r\n          disabled={hasSignedForm}\r\n          label=\"Inspector Signature\"\r\n        />\r\n      </div>\r\n\r\n      {/* Signature Confirmation */}\r\n      {hasSignedForm && formData.inspectorSignature && (\r\n        <motion.div\r\n          className=\"bg-green-50 dark:bg-green-900/20 border-2 border-green-500 rounded-xl p-4\"\r\n          initial={{ opacity: 0, scale: 0.95 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n        >\r\n          <div className=\"flex items-center gap-3\">\r\n            <CheckCircle className=\"w-6 h-6 text-green-600 dark:text-green-400\" />\r\n            <div>\r\n              <p className=\"font-bold text-green-900 dark:text-green-100\">\r\n                Signature Recorded\r\n              </p>\r\n              <p className=\"text-sm text-green-700 dark:text-green-300\">\r\n                Signed by {formData.inspectorNamePrint} on{' '}\r\n                {new Date(formData.inspectorSignature.signedAt).toLocaleString()}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n\r\n      {/* Legal Notice */}\r\n      <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3\">\r\n        <p className=\"text-xs text-blue-900 dark:text-blue-100\">\r\n          <strong>Notice:</strong> By signing this form, you certify that the inspection was conducted\r\n          in accordance with ICS-212 standards and that all information is accurate to the best of your knowledge.\r\n        </p>\r\n      </div>\r\n\r\n      {/* Navigation Buttons */}\r\n      <div className=\"flex gap-3 sticky bottom-4 bg-white dark:bg-gray-900 p-4 rounded-xl shadow-lg\">\r\n        {!hasSignedForm && (\r\n          <TouchFeedback onTap={() => onBack()} hapticType=\"light\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onBack}\r\n              className=\"\r\n                flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold\r\n                py-4 px-6 rounded-xl transition-all\r\n                focus:outline-none focus:ring-4 focus:ring-gray-300\r\n              \"\r\n              style={{ minHeight: '56px' }}\r\n            >\r\n              Back\r\n            </button>\r\n          </TouchFeedback>\r\n        )}\r\n\r\n        <TouchFeedback onTap={() => onNext()} hapticType=\"medium\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onNext}\r\n            disabled={!hasSignedForm}\r\n            className={`\r\n              ${hasSignedForm ? 'flex-1' : 'flex-[2]'}\r\n              font-bold py-4 px-6 rounded-xl transition-all shadow-lg\r\n              focus:outline-none focus:ring-4\r\n              ${hasSignedForm\r\n                ? 'bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-300 hover:shadow-xl'\r\n                : 'bg-gray-300 text-gray-500 cursor-not-allowed'\r\n              }\r\n            `}\r\n            style={{ minHeight: '56px' }}\r\n          >\r\n            {hasSignedForm ? 'Next: Review & Submit' : 'Sign Form to Continue'}\r\n          </button>\r\n        </TouchFeedback>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default InspectorSignatureStep;\r\n","import React, { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { CheckCircle, Edit, Loader2 } from 'lucide-react';\r\nimport toast from 'react-hot-toast';\r\nimport TouchFeedback from '../mobile/TouchFeedback';\r\nimport SignatureCanvas from '../SignatureCanvas';\r\nimport type { ICS212FormData, DigitalSignature } from '../../types';\r\n\r\ninterface ReviewSubmitStepProps {\r\n  formData: Partial<ICS212FormData>;\r\n  onChange: (field: keyof ICS212FormData, value: any) => void;\r\n  onBack: () => void;\r\n  onGoToStep: (step: number) => void;\r\n  onSubmit: () => Promise<void>;\r\n}\r\n\r\nexport const ReviewSubmitStep: React.FC<ReviewSubmitStepProps> = ({\r\n  formData,\r\n  onChange,\r\n  onBack,\r\n  onGoToStep,\r\n  onSubmit,\r\n}) => {\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [hasOperatorSigned, setHasOperatorSigned] = useState(!!formData.operatorSignature);\r\n\r\n  const handleOperatorSignatureSave = (signatureData: string) => {\r\n    const signature: DigitalSignature = {\r\n      imageData: signatureData,\r\n      signedAt: new Date().toISOString(),\r\n      signedBy: formData.operatorNamePrint || '',\r\n      ipAddress: undefined,\r\n      deviceId: navigator.userAgent,\r\n    };\r\n    \r\n    onChange('operatorSignature', signature);\r\n    onChange('operatorDate', new Date().toISOString().split('T')[0]);\r\n    onChange('operatorTime', new Date().toTimeString().slice(0, 5));\r\n    setHasOperatorSigned(true);\r\n  };\r\n\r\n  const handleFinalSubmit = async () => {\r\n    if (!hasOperatorSigned) {\r\n      toast.error('Operator signature required');\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      await onSubmit();\r\n      toast.success('Form submitted successfully!');\r\n    } catch (error) {\r\n      toast.error('Submission failed. Please try again.');\r\n      console.error('Submission error:', error);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Calculate counts\r\n  const passCount = formData.inspectionItems?.filter(item => item.status === 'pass').length || 0;\r\n  const failCount = formData.inspectionItems?.filter(item => item.status === 'fail').length || 0;\r\n  const naCount = formData.inspectionItems?.filter(item => item.status === 'n/a').length || 0;\r\n  const releaseDecision = formData.releaseStatus || 'release';\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"space-y-6 p-4 md:p-6 pb-24\"\r\n      initial={{ opacity: 0, x: 20 }}\r\n      animate={{ opacity: 1, x: 0 }}\r\n      exit={{ opacity: 0, x: -20 }}\r\n      transition={{ duration: 0.3 }}\r\n    >\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\r\n          Review & Submit\r\n        </h2>\r\n        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n          Review all information before final submission\r\n        </p>\r\n      </div>\r\n\r\n      {/* Incident Information Card */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-4\">\r\n        <div className=\"flex items-center justify-between mb-3\">\r\n          <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">\r\n            Incident Information\r\n          </h3>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => onGoToStep(0)}\r\n            className=\"text-blue-600 hover:text-blue-700 flex items-center gap-1 text-sm\"\r\n          >\r\n            <Edit className=\"w-4 h-4\" /> Edit\r\n          </button>\r\n        </div>\r\n        <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n          <div>\r\n            <p className=\"text-gray-600 dark:text-gray-400\">Incident Name</p>\r\n            <p className=\"font-semibold text-gray-900 dark:text-white\">{formData.incidentName || 'N/A'}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-gray-600 dark:text-gray-400\">Date/Time</p>\r\n            <p className=\"font-semibold text-gray-900 dark:text-white\">\r\n              {formData.inspectorDate} {formData.inspectorTime}\r\n            </p>\r\n          </div>\r\n          {formData.orderNo && (\r\n            <div className=\"col-span-2\">\r\n              <p className=\"text-gray-600 dark:text-gray-400\">Order Number</p>\r\n              <p className=\"font-semibold text-gray-900 dark:text-white\">{formData.orderNo}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Vehicle Information Card */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-4\">\r\n        <div className=\"flex items-center justify-between mb-3\">\r\n          <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">\r\n            Vehicle Information\r\n          </h3>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => onGoToStep(1)}\r\n            className=\"text-blue-600 hover:text-blue-700 flex items-center gap-1 text-sm\"\r\n          >\r\n            <Edit className=\"w-4 h-4\" /> Edit\r\n          </button>\r\n        </div>\r\n        <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n          <div>\r\n            <p className=\"text-gray-600 dark:text-gray-400\">Vehicle ID</p>\r\n            <p className=\"font-semibold text-gray-900 dark:text-white\">{formData.vehicleIdNo || 'N/A'}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-gray-600 dark:text-gray-400\">Odometer</p>\r\n            <p className=\"font-semibold text-gray-900 dark:text-white\">\r\n              {formData.odometerReading?.toLocaleString() || 'N/A'} mi\r\n            </p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-gray-600 dark:text-gray-400\">License Plate</p>\r\n            <p className=\"font-semibold text-gray-900 dark:text-white\">{formData.vehicleLicenseNo || 'N/A'}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"text-gray-600 dark:text-gray-400\">Type</p>\r\n            <p className=\"font-semibold text-gray-900 dark:text-white\">{formData.vehicleType || 'N/A'}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Inspection Results Card */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-4\">\r\n        <div className=\"flex items-center justify-between mb-3\">\r\n          <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">\r\n            Inspection Results\r\n          </h3>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => onGoToStep(2)}\r\n            className=\"text-blue-600 hover:text-blue-700 flex items-center gap-1 text-sm\"\r\n          >\r\n            <Edit className=\"w-4 h-4\" /> Edit\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-3 gap-3 mb-4\">\r\n          <div className=\"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 text-center\">\r\n            <p className=\"text-2xl font-bold text-green-600 dark:text-green-400\">{passCount}</p>\r\n            <p className=\"text-xs text-gray-600 dark:text-gray-400\">Passed</p>\r\n          </div>\r\n          <div className=\"bg-red-50 dark:bg-red-900/20 rounded-lg p-3 text-center\">\r\n            <p className=\"text-2xl font-bold text-red-600 dark:text-red-400\">{failCount}</p>\r\n            <p className=\"text-xs text-gray-600 dark:text-gray-400\">Failed</p>\r\n          </div>\r\n          <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 text-center\">\r\n            <p className=\"text-2xl font-bold text-gray-600 dark:text-gray-400\">{naCount}</p>\r\n            <p className=\"text-xs text-gray-600 dark:text-gray-400\">N/A</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Release Decision Badge */}\r\n        <div className={`\r\n          p-4 rounded-lg text-center font-bold text-lg\r\n          ${releaseDecision === 'hold'\r\n            ? 'bg-red-100 text-red-900 dark:bg-red-900/30 dark:text-red-100'\r\n            : 'bg-green-100 text-green-900 dark:bg-green-900/30 dark:text-green-100'\r\n          }\r\n        `}>\r\n          {releaseDecision === 'hold' ? 'üî¥ HOLD FOR REPAIRS' : 'üü¢ RELEASED'}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Comments Card */}\r\n      {formData.additionalComments && (\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-4\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">\r\n              Additional Comments\r\n            </h3>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => onGoToStep(3)}\r\n              className=\"text-blue-600 hover:text-blue-700 flex items-center gap-1 text-sm\"\r\n            >\r\n              <Edit className=\"w-4 h-4\" /> Edit\r\n            </button>\r\n          </div>\r\n          <p className=\"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap\">\r\n            {formData.additionalComments}\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Inspector Signature Preview */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-4\">\r\n        <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-3\">\r\n          Inspector Signature\r\n        </h3>\r\n        <div className=\"flex items-center gap-4\">\r\n          {formData.inspectorSignature?.imageData && (\r\n            <img \r\n              src={formData.inspectorSignature.imageData} \r\n              alt=\"Inspector signature\" \r\n              className=\"h-20 border border-gray-300 rounded bg-white\"\r\n            />\r\n          )}\r\n          <div className=\"flex-1\">\r\n            <p className=\"font-semibold text-gray-900 dark:text-white\">\r\n              {formData.inspectorNamePrint}\r\n            </p>\r\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n              Signed: {formData.inspectorSignature && new Date(formData.inspectorSignature.signedAt).toLocaleString()}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Operator Signature Section */}\r\n      <div className=\"bg-blue-50 dark:bg-blue-900/20 rounded-xl border-2 border-blue-200 dark:border-blue-800 p-4\">\r\n        <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-3\">\r\n          Operator Signature Required\r\n        </h3>\r\n        \r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label\r\n              htmlFor=\"operatorNamePrint\"\r\n              className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\"\r\n            >\r\n              Operator Name (Print) *\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"operatorNamePrint\"\r\n              value={formData.operatorNamePrint || ''}\r\n              onChange={(e) => onChange('operatorNamePrint', e.target.value)}\r\n              placeholder=\"Enter operator full name\"\r\n              maxLength={100}\r\n              disabled={hasOperatorSigned}\r\n              className={`\r\n                w-full px-4 py-3 text-base rounded-xl border-2 transition-all\r\n                focus:outline-none focus:ring-4\r\n                ${hasOperatorSigned \r\n                  ? 'bg-gray-100 dark:bg-gray-800 border-gray-300 cursor-not-allowed' \r\n                  : 'border-gray-300 focus:border-blue-500 focus:ring-blue-100'\r\n                }\r\n              `}\r\n            />\r\n          </div>\r\n\r\n          <SignatureCanvas\r\n            onSave={handleOperatorSignatureSave}\r\n            initialSignature={formData.operatorSignature?.imageData}\r\n            disabled={hasOperatorSigned}\r\n            label=\"Operator Signature\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Submit Button */}\r\n      <div className=\"sticky bottom-4 bg-white dark:bg-gray-900 p-4 rounded-xl shadow-lg\">\r\n        <div className=\"flex gap-3\">\r\n          <TouchFeedback onTap={() => onBack()} hapticType=\"light\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onBack}\r\n              disabled={isSubmitting}\r\n              className=\"\r\n                flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold\r\n                py-4 px-6 rounded-xl transition-all\r\n                focus:outline-none focus:ring-4 focus:ring-gray-300\r\n                disabled:opacity-50 disabled:cursor-not-allowed\r\n              \"\r\n              style={{ minHeight: '56px' }}\r\n            >\r\n              Back\r\n            </button>\r\n          </TouchFeedback>\r\n\r\n          <TouchFeedback onTap={handleFinalSubmit} hapticType=\"heavy\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleFinalSubmit}\r\n              disabled={!hasOperatorSigned || isSubmitting}\r\n              className={`\r\n                flex-[2] font-bold py-4 px-6 rounded-xl transition-all\r\n                focus:outline-none focus:ring-4 flex items-center justify-center gap-2\r\n                ${hasOperatorSigned && !isSubmitting\r\n                  ? 'bg-green-600 hover:bg-green-700 text-white focus:ring-green-300 shadow-lg hover:shadow-xl'\r\n                  : 'bg-gray-300 text-gray-500 cursor-not-allowed'\r\n                }\r\n              `}\r\n              style={{ minHeight: '56px' }}\r\n            >\r\n              {isSubmitting ? (\r\n                <>\r\n                  <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                  Submitting...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <CheckCircle className=\"w-5 h-5\" />\r\n                  Submit Final Form\r\n                </>\r\n              )}\r\n            </button>\r\n          </TouchFeedback>\r\n        </div>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default ReviewSubmitStep;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { AnimatePresence, motion } from 'framer-motion';\r\nimport toast from 'react-hot-toast';\r\nimport { Save, Trash2 } from 'lucide-react';\r\nimport ProgressIndicator from './mobile/ProgressIndicator';\r\nimport IncidentInfoStep from './ics212/IncidentInfoStep';\r\nimport VehicleSelectionStep from './ics212/VehicleSelectionStep';\r\nimport InspectionItemsStep from './ics212/InspectionItemsStep';\r\nimport CommentsStep from './ics212/CommentsStep';\r\nimport InspectorSignatureStep from './ics212/InspectorSignatureStep';\r\nimport ReviewSubmitStep from './ics212/ReviewSubmitStep';\r\nimport type { ICS212FormData, ICS212DraftData, ICS212SubmissionResponse } from '../types';\r\n\r\nconst STEPS = [\r\n  { id: 0, title: 'Incident Info', component: IncidentInfoStep },\r\n  { id: 1, title: 'Vehicle', component: VehicleSelectionStep },\r\n  { id: 2, title: 'Inspection', component: InspectionItemsStep },\r\n  { id: 3, title: 'Comments', component: CommentsStep },\r\n  { id: 4, title: 'Inspector Sign', component: InspectorSignatureStep },\r\n  { id: 5, title: 'Review & Submit', component: ReviewSubmitStep },\r\n];\r\n\r\nconst INITIAL_FORM_DATA: Partial<ICS212FormData> = {\r\n  status: 'draft',\r\n  incidentName: '',\r\n  orderNo: '',\r\n  vehicleIdNo: '',\r\n  vehicleLicenseNo: '',\r\n  agencyRegUnit: '',\r\n  vehicleType: '',\r\n  odometerReading: 0,\r\n  inspectionItems: [],\r\n  additionalComments: '',\r\n  releaseStatus: 'release',\r\n  inspectorDate: new Date().toISOString().split('T')[0],\r\n  inspectorTime: new Date().toTimeString().slice(0, 5),\r\n  inspectorNamePrint: '',\r\n};\r\n\r\nexport const ICS212Form: React.FC = () => {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [formData, setFormData] = useState<Partial<ICS212FormData>>(INITIAL_FORM_DATA);\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n  const [showDraftDialog, setShowDraftDialog] = useState(false);\r\n  const [recoveredDraft, setRecoveredDraft] = useState<ICS212DraftData | null>(null);\r\n\r\n  // Auto-save to localStorage every 30 seconds\r\n  useEffect(() => {\r\n    const saveInterval = setInterval(() => {\r\n      if (formData && !isSubmitted && currentStep > 0) {\r\n        const draft: ICS212DraftData = {\r\n          formData,\r\n          currentStep,\r\n          savedAt: new Date().toISOString(),\r\n          expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(), // 7 days\r\n        };\r\n        localStorage.setItem('ics212-draft', JSON.stringify(draft));\r\n        toast.success('Draft auto-saved', { duration: 1500, icon: 'üíæ' });\r\n      }\r\n    }, 30000); // 30 seconds\r\n\r\n    return () => clearInterval(saveInterval);\r\n  }, [formData, currentStep, isSubmitted]);\r\n\r\n  // Draft recovery on mount\r\n  useEffect(() => {\r\n    const draftJson = localStorage.getItem('ics212-draft');\r\n    if (draftJson) {\r\n      try {\r\n        const draft = JSON.parse(draftJson) as ICS212DraftData;\r\n        const expiryDate = new Date(draft.expiresAt);\r\n        const now = new Date();\r\n        \r\n        if (expiryDate > now) {\r\n          setRecoveredDraft(draft);\r\n          setShowDraftDialog(true);\r\n        } else {\r\n          // Draft expired, clear it\r\n          localStorage.removeItem('ics212-draft');\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to parse draft:', error);\r\n        localStorage.removeItem('ics212-draft');\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const handleResumeDraft = () => {\r\n    if (recoveredDraft) {\r\n      setFormData(recoveredDraft.formData);\r\n      setCurrentStep(recoveredDraft.currentStep);\r\n      setShowDraftDialog(false);\r\n      toast.success('Draft restored!');\r\n    }\r\n  };\r\n\r\n  const handleDiscardDraft = () => {\r\n    localStorage.removeItem('ics212-draft');\r\n    setShowDraftDialog(false);\r\n    setRecoveredDraft(null);\r\n    toast('Draft discarded', { icon: 'üóëÔ∏è' });\r\n  };\r\n\r\n  const handleFieldChange = (field: keyof ICS212FormData, value: any) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n    // Clear error for this field\r\n    if (errors[field]) {\r\n      setErrors(prev => {\r\n        const newErrors = { ...prev };\r\n        delete newErrors[field];\r\n        return newErrors;\r\n      });\r\n    }\r\n  };\r\n\r\n  const validateStep = (step: number): boolean => {\r\n    const newErrors: Record<string, string> = {};\r\n\r\n    switch (step) {\r\n      case 0: // Incident Info\r\n        if (!formData.incidentName || formData.incidentName.length < 3) {\r\n          newErrors.incidentName = 'Incident name must be at least 3 characters';\r\n        }\r\n        if (!formData.inspectorDate) {\r\n          newErrors.inspectorDate = 'Date is required';\r\n        }\r\n        if (!formData.inspectorTime) {\r\n          newErrors.inspectorTime = 'Time is required';\r\n        }\r\n        break;\r\n\r\n      case 1: // Vehicle Selection\r\n        if (!formData.vehicleIdNo) {\r\n          newErrors.vehicleIdNo = 'Vehicle ID is required';\r\n        }\r\n        if (!formData.odometerReading || formData.odometerReading === 0) {\r\n          newErrors.odometerReading = 'Odometer reading is required';\r\n        }\r\n        break;\r\n\r\n      case 4: // Inspector Signature\r\n        if (!formData.inspectorNamePrint || (formData.inspectorNamePrint || '').length < 2) {\r\n          newErrors.inspectorNamePrint = 'Inspector name must be at least 2 characters';\r\n        }\r\n        if (!formData.inspectorSignature) {\r\n          newErrors.inspectorSignature = 'Signature is required';\r\n        }\r\n        break;\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleNext = () => {\r\n    if (validateStep(currentStep)) {\r\n      if (currentStep < STEPS.length - 1) {\r\n        setCurrentStep(currentStep + 1);\r\n      }\r\n    } else {\r\n      toast.error('Please complete all required fields');\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    if (currentStep > 0) {\r\n      setCurrentStep(currentStep - 1);\r\n    }\r\n  };\r\n\r\n  const handleGoToStep = (step: number) => {\r\n    if (step >= 0 && step < STEPS.length) {\r\n      setCurrentStep(step);\r\n    }\r\n  };\r\n\r\n  const handleManualSave = () => {\r\n    const draft: ICS212DraftData = {\r\n      formData,\r\n      currentStep,\r\n      savedAt: new Date().toISOString(),\r\n      expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\r\n    };\r\n    localStorage.setItem('ics212-draft', JSON.stringify(draft));\r\n    toast.success('Draft saved manually!', { icon: 'üíæ' });\r\n  };\r\n\r\n  const handleClearForm = () => {\r\n    if (confirm('Are you sure you want to clear all form data? This cannot be undone.')) {\r\n      setFormData(INITIAL_FORM_DATA);\r\n      setCurrentStep(0);\r\n      setErrors({});\r\n      localStorage.removeItem('ics212-draft');\r\n      toast('Form cleared', { icon: 'üóëÔ∏è' });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      // Prepare submission data\r\n      const submissionData: Partial<ICS212FormData> = {\r\n        ...formData,\r\n        submittedAt: new Date().toISOString(),\r\n        status: 'submitted',\r\n      };\r\n\r\n      // Submit to backend\r\n      const response = await fetch('/api/ics212/submit', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(submissionData),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Submission failed');\r\n      }\r\n\r\n      const result: ICS212SubmissionResponse = await response.json();\r\n      \r\n      if (result.success) {\r\n        setIsSubmitted(true);\r\n        localStorage.removeItem('ics212-draft');\r\n        toast.success(`Form submitted! ID: ${result.formId}`);\r\n        \r\n        // Optionally redirect or show success screen\r\n        console.log('Submission result:', result);\r\n      } else {\r\n        throw new Error(result.error || 'Submission failed');\r\n      }\r\n    } catch (error) {\r\n      console.error('Submission error:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const CurrentStepComponent = STEPS[currentStep].component;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\r\n      {/* Header */}\r\n      <div className=\"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-40 shadow-sm\">\r\n        <div className=\"max-w-4xl mx-auto px-4 py-4\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <img \r\n                src=\"/taskforce-io-logo.png\" \r\n                alt=\"TASKFORCE IO\" \r\n                className=\"w-10 h-10 object-contain\"\r\n              />\r\n              <div>\r\n                <h1 className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n                  ICS-212 Vehicle Safety Inspection\r\n                </h1>\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                  Step {currentStep + 1} of {STEPS.length}: {STEPS[currentStep].title}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleManualSave}\r\n                className=\"p-2 rounded-lg bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors\"\r\n                title=\"Save Draft\"\r\n              >\r\n                <Save className=\"w-5 h-5\" />\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleClearForm}\r\n                className=\"p-2 rounded-lg bg-red-100 text-red-600 hover:bg-red-200 transition-colors\"\r\n                title=\"Clear Form\"\r\n              >\r\n                <Trash2 className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Progress Indicator */}\r\n          <ProgressIndicator\r\n            currentStep={currentStep + 1}\r\n            totalSteps={STEPS.length}\r\n            labels={STEPS.map(s => s.title)}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Form Content */}\r\n      <div className=\"max-w-4xl mx-auto\">\r\n        <AnimatePresence mode=\"wait\">\r\n          <motion.div\r\n            key={currentStep}\r\n            initial={{ opacity: 0, x: 20 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            exit={{ opacity: 0, x: -20 }}\r\n            transition={{ duration: 0.3 }}\r\n          >\r\n            <CurrentStepComponent\r\n              formData={formData}\r\n              onChange={handleFieldChange}\r\n              onNext={handleNext}\r\n              onBack={handleBack}\r\n              onGoToStep={handleGoToStep}\r\n              onSubmit={handleSubmit}\r\n              errors={errors}\r\n            />\r\n          </motion.div>\r\n        </AnimatePresence>\r\n      </div>\r\n\r\n      {/* Draft Recovery Dialog */}\r\n      <AnimatePresence>\r\n        {showDraftDialog && (\r\n          <motion.div\r\n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n          >\r\n            <motion.div\r\n              className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full p-6\"\r\n              initial={{ scale: 0.9, y: 20 }}\r\n              animate={{ scale: 1, y: 0 }}\r\n              exit={{ scale: 0.9, y: 20 }}\r\n            >\r\n              <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-2\">\r\n                Resume Draft?\r\n              </h3>\r\n              <p className=\"text-gray-600 dark:text-gray-400 mb-4\">\r\n                We found a saved draft from{' '}\r\n                {recoveredDraft && new Date(recoveredDraft.savedAt).toLocaleString()}.\r\n                Would you like to resume where you left off?\r\n              </p>\r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleDiscardDraft}\r\n                  className=\"flex-1 px-4 py-3 bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold rounded-xl transition-colors\"\r\n                >\r\n                  Start Fresh\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleResumeDraft}\r\n                  className=\"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl transition-colors\"\r\n                >\r\n                  Resume Draft\r\n                </button>\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Submission Success Screen */}\r\n      <AnimatePresence>\r\n        {isSubmitted && (\r\n          <motion.div\r\n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n          >\r\n            <motion.div\r\n              className=\"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full p-8 text-center\"\r\n              initial={{ scale: 0.9, y: 20 }}\r\n              animate={{ scale: 1, y: 0 }}\r\n            >\r\n              <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <svg className=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n                </svg>\r\n              </div>\r\n              <h3 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\r\n                Form Submitted!\r\n              </h3>\r\n              <p className=\"text-gray-600 dark:text-gray-400 mb-6\">\r\n                Your ICS-212 form has been successfully submitted and logged.\r\n              </p>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  setIsSubmitted(false);\r\n                  setFormData(INITIAL_FORM_DATA);\r\n                  setCurrentStep(0);\r\n                }}\r\n                className=\"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl transition-colors\"\r\n              >\r\n                Start New Form\r\n              </button>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ICS212Form;\r\n"],"names":["__iconNode","LoaderCircle","createLucideIcon","IncidentInfoStep","formData","onChange","onNext","errors","handleSubmit","e","getCurrentDate","getCurrentTime","now","hours","minutes","jsxs","motion","jsx","TouchFeedback","AddVehicleModal","isOpen","onClose","onVehicleAdded","setFormData","useState","formErrors","setFormErrors","isSubmitting","setIsSubmitting","resetForm","handleClose","validateForm","field","showToast","response","API_BASE_URL","error","result","AnimatePresence","Fragment","Save","VehicleSelectionStep","onBack","vehicles","setVehicles","loadingVehicles","setLoadingVehicles","selectedVehicle","setSelectedVehicle","isAddModalOpen","setIsAddModalOpen","useEffect","fetchVehicles","data","handleVehicleSelect","vehicleId","vehicle","v","handleVehicleAdded","newVehicle","SkeletonLoader","Plus","INSPECTION_ITEMS","InspectionItemsStep","_errors","expandedSections","setExpandedSections","inspectionItems","releaseDecision","useMemo","item","handleItemStatusChange","itemNumber","status","updatedItems","toggleSection","section","newExpanded","renderInspectionItem","itemData","i","AlertTriangle","CheckCircle","XCircle","renderSection","title","sectionKey","items","subtitle","isExpanded","ChevronDown","CommentsStep","textareaRef","useRef","maxLength","currentLength","suggestion","current","InspectorSignatureStep","hasSignedForm","setHasSignedForm","handleSignatureSave","signatureData","signature","getCurrentDateTime","currentDate","currentTime","Lock","SignatureCanvas","ReviewSubmitStep","onGoToStep","onSubmit","hasOperatorSigned","setHasOperatorSigned","handleOperatorSignatureSave","handleFinalSubmit","toast","passCount","failCount","naCount","Edit","Loader2","STEPS","INITIAL_FORM_DATA","ICS212Form","currentStep","setCurrentStep","setErrors","isSubmitted","setIsSubmitted","showDraftDialog","setShowDraftDialog","recoveredDraft","setRecoveredDraft","saveInterval","draft","draftJson","handleResumeDraft","handleDiscardDraft","handleFieldChange","value","prev","newErrors","validateStep","step","handleNext","handleBack","handleGoToStep","handleManualSave","handleClearForm","submissionData","CurrentStepComponent","Trash2","ProgressIndicator","s"],"mappings":"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","x_google_ignoreList":[0]}