import{j as e}from"./ui-D7Zc9tn1.js";import{r}from"./vendor-B7m-6-nt.js";import{a as y}from"./config-BPfxE8rv.js";import{S as s}from"./SkeletonLoader-1ZpraJm7.js";function u({formId:d}){const[t,c]=r.useState(null),[x,l]=r.useState(!0),[i,n]=r.useState(null);r.useEffect(()=>{o()},[d]);const o=async()=>{l(!0),n(null);try{const a=await fetch(y.ics218FormById(d));if(!a.ok)throw new Error("Failed to fetch form details");const h=await a.json();c(h.form)}catch(a){console.error("Error fetching ICS 218 form details:",a),n(a instanceof Error?a.message:"Unknown error")}finally{l(!1)}},m=()=>{t?.pdf_url&&window.open(t.pdf_url,"_blank")},g=()=>{t?.github_issue_url&&window.open(t.github_issue_url,"_blank")};return x?e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsx(s,{type:"card"}),e.jsx(s,{type:"card"}),e.jsx(s,{type:"card"})]}):i||!t?e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800 dark:text-red-200",children:i||"Form not found"})})}):e.jsxs("div",{className:"space-y-6 p-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"ICS 218 - Support Vehicle/Equipment Log"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"ICS 218"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Incident Name:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t.incident_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Incident Number:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t.incident_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Date Prepared:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:new Date(t.date_prepared).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Time Prepared:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t.time_prepared})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Vehicle Category:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t.vehicle_category})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Vehicles (",t.vehicles.length,")"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Classification"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Make/Type"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"License ID"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Agency"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Operator"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Assignment"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.vehicles.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:a.classification}),e.jsxs("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:[a.make," ",a.category_kind_type]}),e.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:a.vehicle_license_id}),e.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:a.agency_owner}),e.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:a.operator_name_contact}),e.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:a.incident_assignment})]},a.id))})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Prepared By"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Name:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t.prepared_by_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Position/Title:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:t.prepared_by_position})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Signature Date/Time:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:new Date(t.signature_timestamp).toLocaleString()})]})]}),t.signature_data&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300 block mb-2",children:"Signature:"}),e.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-2 bg-white dark:bg-gray-900 inline-block",children:e.jsx("img",{src:t.signature_data,alt:"Signature",className:"max-w-xs h-20"})})]})]}),e.jsxs("div",{className:"flex gap-3",children:[t.pdf_url&&e.jsxs("button",{onClick:m,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download PDF"]}),t.github_issue_url&&e.jsxs("button",{onClick:g,className:"flex-1 px-4 py-3 bg-gray-800 text-white rounded-lg font-semibold hover:bg-gray-900 transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"View GitHub Issue"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["Form ID: ",t.id," | Submitted: ",new Date(t.created_at).toLocaleString()]})]})}export{u as ICS218Detail};
//# sourceMappingURL=ICS218Detail-B1jtcJML.js.map
