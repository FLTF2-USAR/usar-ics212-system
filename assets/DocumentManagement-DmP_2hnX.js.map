{"version":3,"file":"DocumentManagement-DmP_2hnX.js","sources":["../../node_modules/lucide-react/dist/esm/icons/folder.js","../../node_modules/lucide-react/dist/esm/icons/upload.js","../../src/components/admin/DocumentManagement.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z\",\n      key: \"1kt360\"\n    }\n  ]\n];\nconst Folder = createLucideIcon(\"folder\", __iconNode);\n\nexport { __iconNode, Folder as default };\n//# sourceMappingURL=folder.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 3v12\", key: \"1x0j5s\" }],\n  [\"path\", { d: \"m17 8-5-5-5 5\", key: \"7q97r8\" }],\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }]\n];\nconst Upload = createLucideIcon(\"upload\", __iconNode);\n\nexport { __iconNode, Upload as default };\n//# sourceMappingURL=upload.js.map\n","/**\n * Document Management Component\n * \n * Upload and manage ICS forms and documents\n * Features:\n * - Drag-and-drop file upload\n * - R2 storage integration\n * - File browser with categories\n * - Download and delete capabilities\n * - Mobile-responsive design\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { TouchFeedback } from '../mobile/TouchFeedback';\nimport { SkeletonLoader } from '../mobile/SkeletonLoader';\nimport { \n  Upload, FileText, Download, Trash2, Home, \n  AlertCircle, CheckCircle, Folder \n} from 'lucide-react';\n\ninterface UploadedFile {\n  id: string;\n  filename: string;\n  uploadedAt: string;\n  size: number;\n  category: string;\n}\n\nexport function DocumentManagement() {\n  const [files, setFiles] = useState<UploadedFile[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [uploading, setUploading] = useState(false);\n  const [dragOver, setDragOver] = useState(false);\n  const [uploadMessage, setUploadMessage] = useState<{type: 'success' | 'error', text: string} | null>(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    fetchFiles();\n  }, []);\n\n  const fetchFiles = async () => {\n    try {\n      // TODO: Implement API endpoint to list uploaded files from R2\n      // For now, using mock data\n      setFiles([]);\n    } catch (error) {\n      console.error('Error fetching files:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setDragOver(true);\n  }, []);\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setDragOver(false);\n  }, []);\n\n  const handleDrop = useCallback(async (e: React.DragEvent) => {\n    e.preventDefault();\n    setDragOver(false);\n    \n    const droppedFiles = Array.from(e.dataTransfer.files);\n    await uploadFiles(droppedFiles);\n  }, []);\n\n  const handleFileSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFiles = e.target.files ? Array.from(e.target.files) : [];\n    await uploadFiles(selectedFiles);\n  };\n\n  const uploadFiles = async (filesToUpload: File[]) => {\n    if (filesToUpload.length === 0) return;\n    \n    setUploading(true);\n    setUploadMessage(null);\n\n    try {\n      for (const file of filesToUpload) {\n        const formData = new FormData();\n        formData.append('file', file);\n        formData.append('category', 'general');\n\n        // TODO: Implement actual upload endpoint\n        // const response = await fetch(`${API_BASE_URL}/documents/upload`, {\n        //   method: 'POST',\n        //   body: formData,\n        // });\n\n        await new Promise(resolve => setTimeout(resolve, 1000)); // Mock upload delay\n      }\n      \n      setUploadMessage({ \n        type: 'success', \n        text: `Successfully uploaded ${filesToUpload.length} file(s)` \n      });\n      await fetchFiles();\n    } catch (error) {\n      console.error('Upload error:', error);\n      setUploadMessage({ \n        type: 'error', \n        text: 'Failed to upload files. Please try again.' \n      });\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleDelete = async (fileId: string) => {\n    if (!confirm('Are you sure you want to delete this file?')) return;\n    \n    try {\n      // TODO: Implement delete endpoint\n      setFiles(files.filter(f => f.id !== fileId));\n      setUploadMessage({ type: 'success', text: 'File deleted successfully' });\n    } catch (error) {\n      console.error('Delete error:', error);\n      setUploadMessage({ type: 'error', text: 'Failed to delete file' });\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"space-y-4\">\n        {Array.from({ length: 3 }).map((_, i) => (\n          <SkeletonLoader key={i} type=\"card\" />\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n            Document Management\n          </h2>\n          <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n            Upload and organize ICS forms and related documents\n          </p>\n        </div>\n        <TouchFeedback>\n          <button\n            onClick={() => navigate('/admin')}\n            className=\"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors\"\n          >\n            <Home className=\"w-4 h-4\" />\n            <span className=\"hidden sm:inline\">Back to Hub</span>\n          </button>\n        </TouchFeedback>\n      </div>\n\n      {/* Upload Message */}\n      {uploadMessage && (\n        <div className={`p-4 rounded-lg flex items-center gap-3 ${\n          uploadMessage.type === 'success' \n            ? 'bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800' \n            : 'bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800'\n        }`}>\n          {uploadMessage.type === 'success' ? (\n            <CheckCircle className=\"w-5 h-5 text-green-600 dark:text-green-400\" />\n          ) : (\n            <AlertCircle className=\"w-5 h-5 text-red-600 dark:text-red-400\" />\n          )}\n          <span className={`text-sm font-medium ${\n            uploadMessage.type === 'success' \n              ? 'text-green-800 dark:text-green-200' \n              : 'text-red-800 dark:text-red-200'\n          }`}>\n            {uploadMessage.text}\n          </span>\n        </div>\n      )}\n\n      {/* Upload Area */}\n      <div\n        onDragOver={handleDragOver}\n        onDragLeave={handleDragLeave}\n        onDrop={handleDrop}\n        className={`\n          border-2 border-dashed rounded-xl p-12 text-center transition-all\n          ${dragOver \n            ? 'border-green-500 bg-green-50 dark:bg-green-900/20' \n            : 'border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800'\n          }\n          ${uploading ? 'opacity-50 pointer-events-none' : 'cursor-pointer'}\n        `}\n      >\n        <input\n          type=\"file\"\n          multiple\n          onChange={handleFileSelect}\n          className=\"hidden\"\n          id=\"file-upload\"\n          disabled={uploading}\n        />\n        <label htmlFor=\"file-upload\" className=\"cursor-pointer\">\n          <Upload className={`w-16 h-16 mx-auto mb-4 ${dragOver ? 'text-green-600' : 'text-gray-400'}`} />\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\n            {uploading ? 'Uploading...' : dragOver ? 'Drop files here' : 'Upload Documents'}\n          </h3>\n          <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n            Drag and drop files here, or click to browse\n          </p>\n          <p className=\"text-xs text-gray-500 dark:text-gray-500 mt-2\">\n            Supported: PDF, DOC, DOCX, XLS, XLSX (Max 10MB per file)\n          </p>\n        </label>\n      </div>\n\n      {/* Coming Soon Notice - Actual file listing will be implemented */}\n      <div className=\"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-gray-800 dark:to-gray-900 border border-green-200 dark:border-gray-700 rounded-xl p-8 text-center\">\n        <Folder className=\"w-16 h-16 text-green-600 dark:text-green-400 mx-auto mb-4\" />\n        <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-2\">\n          Document Library Coming Soon\n        </h3>\n        <p className=\"text-gray-600 dark:text-gray-400 mb-4\">\n          File browser, categorization, and management features are under development.\n        </p>\n        <p className=\"text-sm text-gray-500 dark:text-gray-500\">\n          Upload functionality will be connected to R2 storage in the next update.\n        </p>\n      </div>\n\n      {/* File List (when implemented) */}\n      {files.length > 0 && (\n        <div className=\"space-y-3\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n            Uploaded Files ({files.length})\n          </h3>\n          {files.map((file) => (\n            <div\n              key={file.id}\n              className=\"flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:shadow-md transition-all\"\n            >\n              <div className=\"flex items-center gap-3\">\n                <FileText className=\"w-8 h-8 text-green-600 dark:text-green-400\" />\n                <div>\n                  <p className=\"font-medium text-gray-900 dark:text-white\">{file.filename}</p>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                    {new Date(file.uploadedAt).toLocaleDateString()} â€¢ {(file.size / 1024).toFixed(2)} KB\n                  </p>\n                </div>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <TouchFeedback>\n                  <button className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors\">\n                    <Download className=\"w-5 h-5\" />\n                  </button>\n                </TouchFeedback>\n                <TouchFeedback>\n                  <button\n                    onClick={() => handleDelete(file.id)}\n                    className=\"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors\"\n                  >\n                    <Trash2 className=\"w-5 h-5\" />\n                  </button>\n                </TouchFeedback>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["__iconNode","Folder","createLucideIcon","Upload","DocumentManagement","files","setFiles","useState","loading","setLoading","uploading","setUploading","dragOver","setDragOver","uploadMessage","setUploadMessage","navigate","useNavigate","useEffect","fetchFiles","error","handleDragOver","useCallback","e","handleDragLeave","handleDrop","droppedFiles","uploadFiles","handleFileSelect","selectedFiles","filesToUpload","file","formData","resolve","handleDelete","fileId","f","jsx","_","i","SkeletonLoader","jsxs","TouchFeedback","Home","CheckCircle","AlertCircle","FileText","Download","Trash2"],"mappings":"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","x_google_ignoreList":[0,1]}