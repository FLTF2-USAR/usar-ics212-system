import{j as e,m as y,A as C}from"./ui-D7Zc9tn1.js";import{r as h}from"./vendor-B7m-6-nt.js";import{c as $,s as D,L as z,z as v}from"./index-CrQRffII.js";import{S as U,L as W,P as J}from"./SignatureCanvas-BSKftLHE.js";import{T as j}from"./TouchFeedback-DCDl4U_0.js";import{S as X}from"./SkeletonLoader-1ZpraJm7.js";import{A as V,a as G}from"./config-BPfxE8rv.js";import{X as Q,P as Y,C as K,S as F}from"./x-Cf66AENl.js";import{S as H}from"./save-kvFXdeuU.js";import{T as P}from"./triangle-alert-BVjgnMp6.js";import{C as R}from"./circle-check-big-tDzjPK5v.js";import{A as L}from"./arrow-left-s7Hx0FoY.js";import{T as Z}from"./trash-2-eXSj6M8Y.js";const ee=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],te=$("chevron-down",ee);const re=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ae=$("loader-circle",re),se=({formData:r,onChange:i,onNext:o,errors:a})=>{const n=s=>{s.preventDefault(),o()},c=()=>new Date().toISOString().split("T")[0],b=()=>{const s=new Date,u=String(s.getHours()).padStart(2,"0"),f=String(s.getMinutes()).padStart(2,"0");return`${u}:${f}`};return e.jsxs(y.form,{className:"space-y-6 p-4 md:p-6",onSubmit:n,initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Incident Information"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Complete prior to vehicle inspection"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"incidentName",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Incident Name *"}),e.jsx("input",{type:"text",id:"incidentName",value:r.incidentName||"",onChange:s=>i("incidentName",s.target.value),placeholder:"e.g., Wildfire Response 2024",maxLength:100,className:`
            w-full px-4 py-3 text-base rounded-xl border-2 transition-all
            focus:outline-none focus:ring-4
            ${a.incidentName?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-300 focus:border-blue-500 focus:ring-blue-100"}
          `,style:{minHeight:"56px"}}),a.incidentName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.incidentName})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"inspectorDate",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Date *"}),e.jsx("input",{type:"date",id:"inspectorDate",value:r.inspectorDate||c(),onChange:s=>i("inspectorDate",s.target.value),max:c(),className:`
              w-full px-4 py-3 text-base rounded-xl border-2 transition-all
              focus:outline-none focus:ring-4
              ${a.inspectorDate?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-300 focus:border-blue-500 focus:ring-blue-100"}
            `,style:{minHeight:"56px"}}),a.inspectorDate&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.inspectorDate})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"inspectorTime",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Time *"}),e.jsx("input",{type:"time",id:"inspectorTime",value:r.inspectorTime||b(),onChange:s=>i("inspectorTime",s.target.value),className:`
              w-full px-4 py-3 text-base rounded-xl border-2 transition-all
              focus:outline-none focus:ring-4
              ${a.inspectorTime?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-300 focus:border-blue-500 focus:ring-blue-100"}
            `,style:{minHeight:"56px"}}),a.inspectorTime&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.inspectorTime})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"orderNo",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["Order Number ",e.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),e.jsx("input",{type:"text",id:"orderNo",value:r.orderNo||"",onChange:s=>i("orderNo",s.target.value),placeholder:"e.g., ORDER-2024-00123",maxLength:50,className:`
            w-full px-4 py-3 text-base rounded-xl border-2 border-gray-300
            transition-all focus:outline-none focus:ring-4
            focus:border-blue-500 focus:ring-blue-100
          `,style:{minHeight:"56px"}})]}),e.jsx(j,{onTap:()=>o(),hapticType:"medium",children:e.jsx("button",{type:"submit",className:`
            w-full bg-blue-600 hover:bg-blue-700 text-white font-bold
            py-4 px-6 rounded-xl transition-all shadow-lg hover:shadow-xl
            focus:outline-none focus:ring-4 focus:ring-blue-300
          `,style:{minHeight:"56px"},children:"Next: Vehicle Selection"})})]})};function ie({isOpen:r,onClose:i,onVehicleAdded:o}){const[a,n]=h.useState({regUnit:"",agency:"",vehicleMake:"",vehicleType:"",incidentId:"",vehicleId:"",features:"",licenseNumber:"",notes:"",vehicleStatus:"Active"}),[c,b]=h.useState({}),[s,u]=h.useState(!1),f=()=>{n({regUnit:"",agency:"",vehicleMake:"",vehicleType:"",incidentId:"",vehicleId:"",features:"",licenseNumber:"",notes:"",vehicleStatus:"Active"}),b({})},m=()=>{s||(f(),i())},N=()=>{const d={};return a.regUnit.trim()?a.regUnit.length>100&&(d.regUnit="Registered Unit must be 100 characters or less"):d.regUnit="Registered Unit is required",a.vehicleMake.trim()||(d.vehicleMake="Vehicle Make is required"),[a.agency,a.vehicleType,a.incidentId,a.vehicleId,a.features,a.licenseNumber,a.notes].some(t=>t.trim())||(d.general="At least one additional field must be filled"),b(d),Object.keys(d).length===0},w=async d=>{if(d.preventDefault(),!N()){D({message:"Please fix the validation errors",type:"error"});return}u(!0);try{const l=await fetch(`${V}/vehicles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!l.ok){const x=await l.json();throw new Error(x.message||"Failed to create vehicle")}const t=await l.json();D({message:"Vehicle created successfully",type:"success"}),o(t.vehicle),f(),i()}catch(l){console.error("Error creating vehicle:",l),D({message:l instanceof Error?l.message:"Failed to create vehicle",type:"error"})}finally{u(!1)}};return r?e.jsx(C,{children:e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx(y.div,{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:m,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),e.jsxs(y.div,{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Add New Vehicle"}),e.jsx("button",{onClick:m,disabled:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Q,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:w,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[c.general&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm",children:c.general}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Registered Unit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.regUnit,onChange:d=>n({...a,regUnit:d.target.value}),className:`w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:text-white ${c.regUnit?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., USAR-01",disabled:s}),c.regUnit&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:c.regUnit})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Agency"}),e.jsx("input",{type:"text",value:a.agency,onChange:d=>n({...a,agency:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., FEMA",disabled:s})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Make ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.vehicleMake,onChange:d=>n({...a,vehicleMake:d.target.value}),className:`w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:text-white ${c.vehicleMake?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., Ford, Chevrolet, International",disabled:s}),c.vehicleMake&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:c.vehicleMake})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category/Type"}),e.jsx("input",{type:"text",value:a.vehicleType,onChange:d=>n({...a,vehicleType:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., Heavy Rescue Truck, Cargo Trailer",disabled:s})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"License Number"}),e.jsx("input",{type:"text",value:a.licenseNumber,onChange:d=>n({...a,licenseNumber:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., ABC-1234",disabled:s})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Incident ID"}),e.jsx("input",{type:"text",value:a.incidentId,onChange:d=>n({...a,incidentId:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., INC-2024-001",disabled:s})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Classification"}),e.jsx("input",{type:"text",value:a.vehicleId,onChange:d=>n({...a,vehicleId:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., VEHICLE-001",disabled:s})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Features"}),e.jsx("textarea",{value:a.features,onChange:d=>n({...a,features:d.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"Describe special features, equipment, or capabilities",disabled:s})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{value:a.vehicleStatus,onChange:d=>n({...a,vehicleStatus:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",disabled:s,children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"}),e.jsx("option",{value:"Maintenance",children:"Maintenance"}),e.jsx("option",{value:"Deployed",children:"Deployed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),e.jsx("textarea",{value:a.notes,onChange:d=>n({...a,notes:d.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"Additional notes or comments",disabled:s})]})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-6 sticky bottom-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 -mx-6 px-6 py-4 mt-6",children:[e.jsx("button",{type:"button",onClick:m,disabled:s,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-[#0066FF] text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-4 h-4"}),"Create Vehicle"]})})]})]})]})]})})}):null}const ne=({formData:r,onChange:i,onNext:o,onBack:a,errors:n})=>{const[c,b]=h.useState([]),[s,u]=h.useState(!0),[f,m]=h.useState(!1);h.useEffect(()=>{N()},[]);const N=async()=>{u(!0);try{const t=await fetch(`${V}/vehicles`);if(!t.ok)throw new Error("Failed to fetch vehicles");const x=await t.json();b(x.vehicles||[])}catch(t){console.error("Error fetching vehicles:",t),D({message:"Failed to load vehicles",type:"error"})}finally{u(!1)}},w=t=>{if(!t){i("selectedVehicleId",""),i("vehicleIdNo",""),i("vehicleLicenseNo",""),i("vehicleType",""),i("agencyRegUnit","");return}if(t==="__ADD_NEW__"){m(!0);return}const x=c.find(k=>k.id===t);x&&(i("selectedVehicleId",x.id),i("vehicleIdNo",x.vehicleId||""),i("vehicleLicenseNo",x.licenseNumber||""),i("vehicleType",x.vehicleType||""),i("agencyRegUnit",x.regUnit||""))},d=async t=>{await N(),i("selectedVehicleId",t.id),i("vehicleIdNo",t.vehicleId||""),i("vehicleLicenseNo",t.licenseNumber||""),i("vehicleType",t.vehicleType||""),i("agencyRegUnit",t.regUnit||""),m(!1)},l=t=>{t.preventDefault(),o()};return e.jsxs(y.form,{className:"space-y-6 p-4 md:p-6",onSubmit:l,initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Vehicle Selection"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Select the vehicle to inspect or add a new one"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Vehicle Type"}),s?e.jsx(X,{type:"rectangle"}):e.jsxs("select",{value:r.selectedVehicleId||"",onChange:t=>w(t.target.value),className:`
              w-full px-4 py-3 text-base rounded-xl border-2 transition-all
              focus:outline-none focus:ring-4
              ${n.vehicleIdNo?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-300 focus:border-blue-500 focus:ring-blue-100"}
              dark:bg-gray-700 dark:text-white
            `,style:{minHeight:"56px"},children:[e.jsx("option",{value:"",children:"Select a vehicle (optional)"}),c.map(t=>e.jsx("option",{value:t.id,children:t.vehicleType&&t.vehicleMake?`${t.vehicleType} - ${t.vehicleMake} ${t.regUnit||""}`:t.regUnit||t.vehicleType||t.vehicleMake||"Unknown Vehicle"},t.id)),e.jsx("option",{value:"__ADD_NEW__",className:"font-semibold",children:"+ Add New Vehicle"})]}),!s&&c.length===0&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:'No vehicles found. Click "+ Add New Vehicle" to create one.'})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{type:"button",onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:[e.jsx(Y,{className:"w-4 h-4"}),"Add New Vehicle"]})}),r.selectedVehicleId&&e.jsx(y.div,{className:"bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-200 dark:border-blue-800 rounded-xl p-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:(()=>{const t=c.find(x=>x.id===r.selectedVehicleId);return t?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-3",children:"Selected Vehicle Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Make/Type"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:[t.vehicleMake,t.vehicleType].filter(Boolean).join(" ")||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"License Plate"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t.licenseNumber||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Agency Unit"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t.regUnit||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Status"}),e.jsx("span",{className:`
                        inline-block px-2 py-1 text-xs font-medium rounded-full
                        ${t.vehicleStatus==="Active"?"bg-green-100 text-green-800":t.vehicleStatus==="Inactive"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}
                      `,children:t.vehicleStatus||"Unknown"})]})]})]}):null})()}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"odometerReading",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Odometer Reading (miles)"}),e.jsx("input",{type:"number",id:"odometerReading",value:r.odometerReading||"",onChange:t=>i("odometerReading",parseInt(t.target.value)||0),placeholder:"Enter current odometer reading",min:0,max:999999999,className:`
            w-full px-4 py-3 text-base rounded-xl border-2 transition-all
            focus:outline-none focus:ring-4
            ${n.odometerReading?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-300 focus:border-blue-500 focus:ring-blue-100"}
            dark:bg-gray-700 dark:text-white
          `,style:{minHeight:"56px"}}),n.odometerReading&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.odometerReading})]}),e.jsxs("div",{className:"space-y-4 bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Vehicle Information (Auto-populated, editable)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"License Number"}),e.jsx("input",{type:"text",value:r.vehicleLicenseNo||"",onChange:t=>i("vehicleLicenseNo",t.target.value),placeholder:"Enter license number",className:"w-full px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Agency Reg/Unit"}),e.jsx("input",{type:"text",value:r.agencyRegUnit||"",onChange:t=>i("agencyRegUnit",t.target.value),placeholder:"Enter agency unit",className:"w-full px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Vehicle Type"}),e.jsx("input",{type:"text",value:r.vehicleType||"",onChange:t=>i("vehicleType",t.target.value),placeholder:"e.g., Rescue, Engine, Ladder",className:"w-full px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j,{onTap:()=>a(),hapticType:"light",children:e.jsx("button",{type:"button",onClick:a,className:`
              flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold
              py-4 px-6 rounded-xl transition-all
              focus:outline-none focus:ring-4 focus:ring-gray-300
            `,style:{minHeight:"56px"},children:"Back"})}),e.jsx(j,{onTap:()=>o(),hapticType:"medium",children:e.jsx("button",{type:"submit",className:`
              flex-[2] bg-blue-600 hover:bg-blue-700 text-white font-bold
              py-4 px-6 rounded-xl transition-all shadow-lg hover:shadow-xl
              focus:outline-none focus:ring-4 focus:ring-blue-300
            `,style:{minHeight:"56px"},children:"Next: Inspection Items"})})]}),e.jsx(ie,{isOpen:f,onClose:()=>m(!1),onVehicleAdded:d})]})},T=[{itemNumber:1,description:"Gauges and lights",status:"n/a",isSafetyItem:!0,reference:"See back*"},{itemNumber:2,description:"Seat belts",status:"n/a",isSafetyItem:!0,reference:"See back*"},{itemNumber:3,description:"Glass and mirrors",status:"n/a",isSafetyItem:!0,reference:"See back*"},{itemNumber:4,description:"Wipers and horn",status:"n/a",isSafetyItem:!0,reference:"See back*"},{itemNumber:5,description:"Engine compartment",status:"n/a",isSafetyItem:!0,reference:"See back*"},{itemNumber:6,description:"Fuel System",status:"n/a",isSafetyItem:!0,reference:"See back*"},{itemNumber:7,description:"Steering",status:"n/a",isSafetyItem:!0,reference:"See back*"},{itemNumber:8,description:"Brakes",status:"n/a",isSafetyItem:!0,reference:"See back*"},{itemNumber:9,description:"Drive line U-joints",status:"n/a",isSafetyItem:!1,reference:"Check play"},{itemNumber:10,description:"Springs and shocks",status:"n/a",isSafetyItem:!0,reference:"See back*"},{itemNumber:11,description:"Exhaust system",status:"n/a",isSafetyItem:!0,reference:"See back*"},{itemNumber:12,description:"Frame",status:"n/a",isSafetyItem:!0,reference:"See back*"},{itemNumber:13,description:"Tire and wheels",status:"n/a",isSafetyItem:!0,reference:"See back*"},{itemNumber:14,description:"Coupling devices / Emergency exit (buses)",status:"n/a",isSafetyItem:!1},{itemNumber:15,description:"Pump operation",status:"n/a",isSafetyItem:!1},{itemNumber:16,description:"Damage on incident",status:"n/a",isSafetyItem:!1},{itemNumber:17,description:"Other",status:"n/a",isSafetyItem:!1}],le=({formData:r,onChange:i,onNext:o,onBack:a,errors:n})=>{const[c,b]=h.useState(new Set(["pre-trip","safety","operational"])),s=r.inspectionItems||T,u=h.useMemo(()=>s.some(t=>t.isSafetyItem&&t.status==="fail")?"hold":"release",[s]),f=(l,t)=>{const x=s.map(k=>k.itemNumber===l?{...k,status:t}:k);i("inspectionItems",x)},m=(l,t,x)=>{l.preventDefault(),l.stopPropagation(),f(t,x)},N=l=>{const t=new Set(c);t.has(l)?t.delete(l):t.add(l),b(t)},w=l=>{const t=s.find(x=>x.itemNumber===l.itemNumber)||l;return e.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-start gap-3",children:[l.isSafetyItem&&e.jsx(P,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white",children:[l.itemNumber,". ",l.description]}),l.reference&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:l.reference})]})}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs("button",{type:"button",onClick:x=>m(x,l.itemNumber,"pass"),className:`
                  flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg
                  font-semibold transition-all border-2
                  ${t.status==="pass"?"bg-green-500 text-white border-green-600 shadow-lg":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600"}
                `,style:{minHeight:"48px",touchAction:"manipulation"},children:[e.jsx(R,{className:"w-4 h-4"}),"Pass"]}),e.jsxs("button",{type:"button",onClick:x=>m(x,l.itemNumber,"fail"),className:`
                  flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg
                  font-semibold transition-all border-2
                  ${t.status==="fail"?"bg-red-500 text-white border-red-600 shadow-lg":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600"}
                `,style:{minHeight:"48px",touchAction:"manipulation"},children:[e.jsx(K,{className:"w-4 h-4"}),"Fail"]}),e.jsx("button",{type:"button",onClick:x=>m(x,l.itemNumber,"n/a"),className:`
                  flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg
                  font-semibold transition-all border-2
                  ${t.status==="n/a"?"bg-gray-400 text-white border-gray-500 shadow-lg":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600"}
                `,style:{minHeight:"48px",touchAction:"manipulation"},children:"N/A"})]})]})]})},l.itemNumber)},d=(l,t,x,k)=>{const A=c.has(t);return e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>N(t),className:"w-full p-4 flex items-center justify-between hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:l}),k&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:k})]}),e.jsx(te,{className:`w-6 h-6 text-gray-600 dark:text-gray-400 transition-transform ${A?"rotate-180":""}`})]}),e.jsx(C,{children:A&&e.jsx(y.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:e.jsx("div",{className:"p-4 space-y-3",children:x.map(w)})})})]})};return e.jsxs(y.div,{className:"space-y-6 p-4 md:p-6",initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Vehicle Inspection"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Inspect all items and mark Pass, Fail, or N/A"})]}),e.jsx(y.div,{className:`
          p-4 rounded-xl border-2 flex items-center justify-between
          ${u==="hold"?"bg-red-50 border-red-500 dark:bg-red-900/20 dark:border-red-700":"bg-green-50 border-green-500 dark:bg-green-900/20 dark:border-green-700"}
        `,layout:!0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[u==="hold"?e.jsx(P,{className:"w-6 h-6 text-red-600 dark:text-red-400"}):e.jsx(R,{className:"w-6 h-6 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:`font-bold text-lg ${u==="hold"?"text-red-900 dark:text-red-100":"text-green-900 dark:text-green-100"}`,children:u==="hold"?"ðŸ”´ HOLD FOR REPAIRS":"ðŸŸ¢ RELEASED"}),u==="hold"&&e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Safety Item â€“ Do Not Release Until Repaired"})]})]})}),e.jsxs("div",{className:"space-y-4",children:[d("Pre-Trip Items","pre-trip",T.slice(0,5),"Items 1-5"),d("Safety Equipment","safety",T.slice(5,13),"âš ï¸ Items 6-13 - All Safety-Critical"),d("Operational Systems","operational",T.slice(13),"Items 14-17")]}),e.jsxs("div",{className:"flex gap-3 sticky bottom-4 bg-white dark:bg-gray-900 p-4 rounded-xl shadow-lg",children:[e.jsx(j,{onTap:()=>a(),hapticType:"light",children:e.jsx("button",{type:"button",onClick:a,className:`
              flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold
              py-4 px-6 rounded-xl transition-all
              focus:outline-none focus:ring-4 focus:ring-gray-300
            `,style:{minHeight:"56px"},children:"Back"})}),e.jsx(j,{onTap:()=>o(),hapticType:"medium",children:e.jsx("button",{type:"button",onClick:o,className:`
              flex-[2] bg-blue-600 hover:bg-blue-700 text-white font-bold
              py-4 px-6 rounded-xl transition-all shadow-lg hover:shadow-xl
              focus:outline-none focus:ring-4 focus:ring-blue-300
            `,style:{minHeight:"56px"},children:"Next: Comments"})})]})]})},de=({formData:r,onChange:i,onNext:o,onBack:a})=>{const n=h.useRef(null),c=2e3,b=(r.additionalComments||"").length;return h.useEffect(()=>{n.current&&(n.current.style.height="auto",n.current.style.height=`${n.current.scrollHeight}px`)},[r.additionalComments]),e.jsxs(y.div,{className:"space-y-6 p-4 md:p-6",initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Additional Comments"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add any notes, repair recommendations, or additional findings (optional)"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"additionalComments",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["Comments ",e.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),e.jsx("textarea",{ref:n,id:"additionalComments",value:r.additionalComments||"",onChange:s=>i("additionalComments",s.target.value),placeholder:"Enter any additional comments, notes, or repair recommendations...",maxLength:c,rows:10,className:`
            w-full px-4 py-3 text-base rounded-xl border-2 border-gray-300
            transition-all focus:outline-none focus:ring-4
            focus:border-blue-500 focus:ring-blue-100 resize-none
            dark:bg-gray-800 dark:border-gray-600 dark:text-white
          `,style:{minHeight:"200px"}}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Detailed notes help with repairs and maintenance tracking"}),e.jsxs("p",{className:`text-sm font-medium ${b>c*.9?"text-red-600":"text-gray-600"}`,children:[b," / ",c]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Quick Suggestions"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["No issues found","Minor wear observed","Requires immediate attention","Scheduled maintenance due","Pre-incident condition noted"].map(s=>e.jsxs("button",{type:"button",onClick:()=>{const u=r.additionalComments||"";i("additionalComments",`${u}${u?`
`:""}${s}`)},className:`
                px-3 py-2 text-sm rounded-lg bg-white dark:bg-gray-700
                border border-gray-300 dark:border-gray-600
                hover:bg-blue-50 hover:border-blue-300 dark:hover:bg-gray-600
                transition-colors text-gray-700 dark:text-gray-300
              `,children:["+ ",s]},s))})]}),e.jsxs("div",{className:"flex gap-3 sticky bottom-4 bg-white dark:bg-gray-900 p-4 rounded-xl shadow-lg",children:[e.jsx(j,{onTap:()=>a(),hapticType:"light",children:e.jsx("button",{type:"button",onClick:a,className:`
              flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold
              py-4 px-6 rounded-xl transition-all
              focus:outline-none focus:ring-4 focus:ring-gray-300
            `,style:{minHeight:"56px"},children:"Back"})}),e.jsx(j,{onTap:()=>o(),hapticType:"medium",children:e.jsx("button",{type:"button",onClick:o,className:`
              flex-[2] bg-blue-600 hover:bg-blue-700 text-white font-bold
              py-4 px-6 rounded-xl transition-all shadow-lg hover:shadow-xl
              focus:outline-none focus:ring-4 focus:ring-blue-300
            `,style:{minHeight:"56px"},children:"Next: Inspector Signature"})})]})]})},oe=({formData:r,onChange:i,onNext:o,onBack:a})=>{const[n,c]=h.useState(!!r.inspectorSignature),b=m=>{const N={imageData:m,signedAt:new Date().toISOString(),signedBy:r.inspectorNamePrint||"",ipAddress:void 0,deviceId:navigator.userAgent};i("inspectorSignature",N),c(!0),i("status","inspector_signed")},s=()=>{const m=new Date;return{date:m.toISOString().split("T")[0],time:m.toTimeString().slice(0,5)}},{date:u,time:f}=s();return e.jsxs(y.div,{className:"space-y-6 p-4 md:p-6",initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Inspector Signature"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sign to lock the inspection form and proceed to review"})]}),n&&e.jsx(y.div,{className:"bg-amber-50 dark:bg-amber-900/20 border-2 border-amber-500 rounded-xl p-4",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:"w-6 h-6 text-amber-600 dark:text-amber-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-amber-900 dark:text-amber-100",children:"Form Locked"}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"Inspector signature has been recorded. Form is read-only."})]})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"inspectorNamePrint",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Inspector Name (Print)"}),e.jsx("input",{type:"text",id:"inspectorNamePrint",value:r.inspectorNamePrint||"",onChange:m=>i("inspectorNamePrint",m.target.value),placeholder:"Enter your full name (recommended)",maxLength:100,disabled:n,className:`
            w-full px-4 py-3 text-base rounded-xl border-2 transition-all
            focus:outline-none focus:ring-4
            ${n?"bg-gray-100 dark:bg-gray-800 border-gray-300 cursor-not-allowed":"border-gray-300 focus:border-blue-500 focus:ring-blue-100"}
          `,style:{minHeight:"56px"}}),!r.inspectorNamePrint&&!n&&e.jsx("p",{className:"mt-1 text-sm text-amber-600 dark:text-amber-400",children:"ðŸ’¡ Recommended: Add your name for record keeping and accountability"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Date"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:new Date(r.inspectorDate||u).toLocaleDateString()})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Time"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:r.inspectorTime||f})]})]}),e.jsx("div",{children:e.jsx(U,{onSave:b,initialSignature:r.inspectorSignature?.imageData,disabled:n,label:"Inspector Signature"})}),n&&r.inspectorSignature&&e.jsx(y.div,{className:"bg-green-50 dark:bg-green-900/20 border-2 border-green-500 rounded-xl p-4",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{className:"w-6 h-6 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-green-900 dark:text-green-100",children:"Signature Recorded"}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:["Signed by ",r.inspectorNamePrint," on"," ",new Date(r.inspectorSignature.signedAt).toLocaleString()]})]})]})}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-blue-900 dark:text-blue-100",children:[e.jsx("strong",{children:"Notice:"})," By signing this form, you certify that the inspection was conducted in accordance with ICS-212 standards and that all information is accurate to the best of your knowledge."]})}),e.jsxs("div",{className:"flex gap-3 sticky bottom-4 bg-white dark:bg-gray-900 p-4 rounded-xl shadow-lg",children:[!n&&e.jsx(j,{onTap:()=>a(),hapticType:"light",children:e.jsx("button",{type:"button",onClick:a,className:`
                flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold
                py-4 px-6 rounded-xl transition-all
                focus:outline-none focus:ring-4 focus:ring-gray-300
              `,style:{minHeight:"56px"},children:"Back"})}),e.jsx(j,{onTap:()=>o(),hapticType:"medium",children:e.jsx("button",{type:"button",onClick:o,disabled:!n,className:`
              ${n?"flex-1":"flex-[2]"}
              font-bold py-4 px-6 rounded-xl transition-all shadow-lg
              focus:outline-none focus:ring-4
              ${n?"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-300 hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"}
            `,style:{minHeight:"56px"},children:n?"Next: Review & Submit":"Sign Form to Continue"})})]})]})},ce=({formData:r,onChange:i,onBack:o,onGoToStep:a,onSubmit:n})=>{const[c,b]=h.useState(!1),[s,u]=h.useState(!!r.operatorSignature),f=t=>{const x={imageData:t,signedAt:new Date().toISOString(),signedBy:r.operatorNamePrint||"",ipAddress:void 0,deviceId:navigator.userAgent};i("operatorSignature",x),i("operatorDate",new Date().toISOString().split("T")[0]),i("operatorTime",new Date().toTimeString().slice(0,5)),u(!0)},m=async()=>{if(!s){v.error("Operator signature required");return}b(!0);try{await n(),v.success("Form submitted successfully!")}catch(t){v.error("Submission failed. Please try again."),console.error("Submission error:",t)}finally{b(!1)}},N=r.inspectionItems?.filter(t=>t.status==="pass").length||0,w=r.inspectionItems?.filter(t=>t.status==="fail").length||0,d=r.inspectionItems?.filter(t=>t.status==="n/a").length||0,l=r.releaseStatus||"release";return e.jsxs(y.div,{className:"space-y-6 p-4 md:p-6 pb-24",initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Review & Submit"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Review all information before final submission"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Incident Information"}),e.jsxs("button",{type:"button",onClick:()=>a(0),className:"text-blue-600 hover:text-blue-700 flex items-center gap-1 text-sm",children:[e.jsx(F,{className:"w-4 h-4"})," Edit"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Incident Name"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:r.incidentName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Date/Time"}),e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[r.inspectorDate," ",r.inspectorTime]})]}),r.orderNo&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Order Number"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:r.orderNo})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Vehicle Information"}),e.jsxs("button",{type:"button",onClick:()=>a(1),className:"text-blue-600 hover:text-blue-700 flex items-center gap-1 text-sm",children:[e.jsx(F,{className:"w-4 h-4"})," Edit"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Vehicle ID"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:r.vehicleIdNo||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Odometer"}),e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[r.odometerReading?.toLocaleString()||"N/A"," mi"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"License Plate"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:r.vehicleLicenseNo||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Type"}),e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:r.vehicleType||"N/A"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Inspection Results"}),e.jsxs("button",{type:"button",onClick:()=>a(2),className:"text-blue-600 hover:text-blue-700 flex items-center gap-1 text-sm",children:[e.jsx(F,{className:"w-4 h-4"})," Edit"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:N}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Passed"})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:w}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Failed"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:d}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"N/A"})]})]}),e.jsx("div",{className:`
          p-4 rounded-lg text-center font-bold text-lg
          ${l==="hold"?"bg-red-100 text-red-900 dark:bg-red-900/30 dark:text-red-100":"bg-green-100 text-green-900 dark:bg-green-900/30 dark:text-green-100"}
        `,children:l==="hold"?"ðŸ”´ HOLD FOR REPAIRS":"ðŸŸ¢ RELEASED"})]}),r.additionalComments&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Additional Comments"}),e.jsxs("button",{type:"button",onClick:()=>a(3),className:"text-blue-600 hover:text-blue-700 flex items-center gap-1 text-sm",children:[e.jsx(F,{className:"w-4 h-4"})," Edit"]})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:r.additionalComments})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-3",children:"Inspector Signature"}),e.jsxs("div",{className:"flex items-center gap-4",children:[r.inspectorSignature?.imageData&&e.jsx("img",{src:r.inspectorSignature.imageData,alt:"Inspector signature",className:"h-20 border border-gray-300 rounded bg-white"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:r.inspectorNamePrint}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Signed: ",r.inspectorSignature&&new Date(r.inspectorSignature.signedAt).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl border-2 border-blue-200 dark:border-blue-800 p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-3",children:"Operator Signature Required"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"operatorNamePrint",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Operator Name (Print)"}),e.jsx("input",{type:"text",id:"operatorNamePrint",value:r.operatorNamePrint||"",onChange:t=>i("operatorNamePrint",t.target.value),placeholder:"Enter operator full name (recommended)",maxLength:100,disabled:s,className:`
                w-full px-4 py-3 text-base rounded-xl border-2 transition-all
                focus:outline-none focus:ring-4
                ${s?"bg-gray-100 dark:bg-gray-800 border-gray-300 cursor-not-allowed":"border-gray-300 focus:border-blue-500 focus:ring-blue-100"}
              `}),!r.operatorNamePrint&&!s&&e.jsx("p",{className:"mt-1 text-sm text-amber-600 dark:text-amber-400",children:"ðŸ’¡ Recommended: Add your name for record keeping and accountability"})]}),e.jsx(U,{onSave:f,initialSignature:r.operatorSignature?.imageData,disabled:s,label:"Operator Signature"})]})]}),e.jsx("div",{className:"sticky bottom-4 bg-white dark:bg-gray-900 p-4 rounded-xl shadow-lg",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(j,{onTap:()=>o(),hapticType:"light",children:e.jsx("button",{type:"button",onClick:o,disabled:c,className:`
                flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold
                py-4 px-6 rounded-xl transition-all
                focus:outline-none focus:ring-4 focus:ring-gray-300
                disabled:opacity-50 disabled:cursor-not-allowed
              `,style:{minHeight:"56px"},children:"Back"})}),e.jsx(j,{onTap:m,hapticType:"heavy",children:e.jsx("button",{type:"button",onClick:m,disabled:!s||c,className:`
                flex-[2] font-bold py-4 px-6 rounded-xl transition-all
                focus:outline-none focus:ring-4 flex items-center justify-center gap-2
                ${s&&!c?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-300 shadow-lg hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"}
              `,style:{minHeight:"56px"},children:c?e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"w-5 h-5 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-5 h-5"}),"Submit Final Form"]})})})]})})]})},I=[{id:0,title:"Incident Info",component:se},{id:1,title:"Vehicle",component:ne},{id:2,title:"Inspection",component:le},{id:3,title:"Comments",component:de},{id:4,title:"Inspector Sign",component:oe},{id:5,title:"Review & Submit",component:ce}],O={status:"draft",incidentName:"",orderNo:"",vehicleIdNo:"",vehicleLicenseNo:"",agencyRegUnit:"",vehicleType:"",selectedVehicleId:"",odometerReading:0,inspectionItems:T,additionalComments:"",releaseStatus:"release",inspectorDate:new Date().toISOString().split("T")[0],inspectorTime:new Date().toTimeString().slice(0,5),inspectorNamePrint:""},we=()=>{const[r,i]=h.useState(0),[o,a]=h.useState(O),[n,c]=h.useState({}),[b,s]=h.useState(!1),[u,f]=h.useState(!1),[m,N]=h.useState(null);h.useEffect(()=>{const g=setInterval(()=>{if(o&&!b&&r>0){const p={formData:o,currentStep:r,savedAt:new Date().toISOString(),expiresAt:new Date(Date.now()+6048e5).toISOString()};localStorage.setItem("ics212-draft",JSON.stringify(p)),v.success("Draft auto-saved",{duration:1500,icon:"ðŸ’¾"})}},3e4);return()=>clearInterval(g)},[o,r,b]),h.useEffect(()=>{const g=localStorage.getItem("ics212-draft");if(g)try{const p=JSON.parse(g);new Date(p.expiresAt)>new Date?(N(p),f(!0)):localStorage.removeItem("ics212-draft")}catch(p){console.error("Failed to parse draft:",p),localStorage.removeItem("ics212-draft")}},[]);const w=()=>{m&&(a(m.formData),i(m.currentStep),f(!1),v.success("Draft restored!"))},d=()=>{localStorage.removeItem("ics212-draft"),f(!1),N(null),v("Draft discarded",{icon:"ðŸ—‘ï¸"})},l=(g,p)=>{a(S=>({...S,[g]:p})),n[g]&&c(S=>{const E={...S};return delete E[g],E})},t=g=>{const p={};switch(g){case 0:(!o.incidentName||o.incidentName.length<3)&&(p.incidentName="Incident name must be at least 3 characters"),o.inspectorDate||(p.inspectorDate="Date is required"),o.inspectorTime||(p.inspectorTime="Time is required");break;case 1:o.selectedVehicleId||(p.vehicleIdNo="Please select a vehicle"),(!o.odometerReading||o.odometerReading<=0)&&(p.odometerReading="Odometer reading is required");break;case 4:o.inspectorSignature||(p.inspectorSignature="Signature is required");break}return c(p),Object.keys(p).length===0},x=()=>{t(r)?r<I.length-1&&i(r+1):v.error("Please complete all required fields")},k=()=>{r>0&&i(r-1)},A=g=>{g>=0&&g<I.length&&i(g)},M=()=>{const g={formData:o,currentStep:r,savedAt:new Date().toISOString(),expiresAt:new Date(Date.now()+6048e5).toISOString()};localStorage.setItem("ics212-draft",JSON.stringify(g)),v.success("Draft saved manually!",{icon:"ðŸ’¾"})},_=()=>{confirm("Are you sure you want to clear all form data? This cannot be undone.")&&(a(O),i(0),c({}),localStorage.removeItem("ics212-draft"),v("Form cleared",{icon:"ðŸ—‘ï¸"}))},q=async()=>{try{const g={...o,submittedAt:new Date().toISOString(),status:"submitted"},p=await fetch(G.submitForm,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(!p.ok)throw new Error("Submission failed");const S=await p.json();if(S.success)s(!0),localStorage.removeItem("ics212-draft"),v.success(`Form submitted! ID: ${S.formId}`),console.log("Submission result:",S);else throw new Error(S.error||"Submission failed")}catch(g){throw console.error("Submission error:",g),g}},B=I[r].component;return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 border-b border-blue-800 sticky top-0 z-50 shadow-lg",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("a",{href:"/",className:"flex items-center gap-2 text-white hover:bg-white/10 px-3 py-2 rounded-lg transition-colors",children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Back to Form Hub"})]}),e.jsxs("a",{href:"/admin",className:"flex items-center gap-2 text-white hover:bg-white/10 px-3 py-2 rounded-lg transition-colors",children:[e.jsx(W,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Admin Dashboard"})]})]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-[52px] z-40 shadow-sm",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/taskforce-io-logo.png",alt:"TASKFORCE IO",className:"w-10 h-10 object-contain"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"ICS-212 Vehicle Safety Inspection"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Step ",r+1," of ",I.length,": ",I[r].title]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:M,className:"p-2 rounded-lg bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors",title:"Save Draft",children:e.jsx(H,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:_,className:"p-2 rounded-lg bg-red-100 text-red-600 hover:bg-red-200 transition-colors",title:"Clear Form",children:e.jsx(Z,{className:"w-5 h-5"})})]})]}),e.jsx(J,{currentStep:r+1,totalSteps:I.length,labels:I.map(g=>g.title)})]})}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(C,{mode:"wait",children:e.jsx(y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:e.jsx(B,{formData:o,onChange:l,onNext:x,onBack:k,onGoToStep:A,onSubmit:q,errors:n})},r)})}),e.jsx(C,{children:u&&e.jsx(y.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(y.div,{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full p-6",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Resume Draft?"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:["We found a saved draft from"," ",m&&new Date(m.savedAt).toLocaleString(),". Would you like to resume where you left off?"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:d,className:"flex-1 px-4 py-3 bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold rounded-xl transition-colors",children:"Start Fresh"}),e.jsx("button",{type:"button",onClick:w,className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl transition-colors",children:"Resume Draft"})]})]})})}),e.jsx(C,{children:b&&e.jsx(y.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},children:e.jsxs(y.div,{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full p-8 text-center",initial:{scale:.9,y:20},animate:{scale:1,y:0},children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Form Submitted!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Your ICS-212 form has been successfully submitted and logged."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("a",{href:"/",className:"flex-1 px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx(L,{className:"w-5 h-5"}),"Back to Home"]}),e.jsx("button",{type:"button",onClick:()=>{s(!1),a(O),i(0)},className:"flex-1 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl transition-colors",children:"Start New Form"})]})]})})})]})};export{we as ICS212Form,we as default};
//# sourceMappingURL=ICS212Form-B7Ff8gt1.js.map
