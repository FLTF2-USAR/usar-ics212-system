{"version":3,"file":"ICS212AdminDashboard-CLmyNtf9.js","sources":["../../src/components/mobile/SwipeableListItem.tsx","../../src/components/mobile/PullToRefresh.tsx","../../src/components/mobile/BottomSheet.tsx","../../src/lib/config.ts","../../src/components/admin/FormDetail.tsx","../../src/components/admin/ICS218Detail.tsx","../../src/components/admin/FormsList.tsx","../../src/components/admin/AnalyticsDashboard.tsx","../../src/components/admin/VehicleManagement.tsx","../../src/components/admin/ICS212AdminDashboard.tsx"],"sourcesContent":["import React, { type ReactNode } from 'react';\r\nimport { motion, useMotionValue, useTransform, type PanInfo } from 'framer-motion';\r\n\r\ninterface SwipeAction {\r\n  label: string;\r\n  icon?: string;\r\n  color: string;\r\n  onTrigger: () => void;\r\n}\r\n\r\ninterface SwipeableListItemProps {\r\n  children: ReactNode;\r\n  leftAction?: SwipeAction;\r\n  rightAction?: SwipeAction;\r\n  threshold?: number;\r\n  className?: string;\r\n}\r\n\r\nexport const SwipeableListItem: React.FC<SwipeableListItemProps> = ({\r\n  children,\r\n  leftAction,\r\n  rightAction,\r\n  threshold = 80,\r\n  className = '',\r\n}) => {\r\n  const x = useMotionValue(0);\r\n  const backgroundColor = useTransform(\r\n    x,\r\n    [-threshold, 0, threshold],\r\n    [\r\n      rightAction?.color || '#ef4444',\r\n      '#ffffff',\r\n      leftAction?.color || '#10b981',\r\n    ]\r\n  );\r\n\r\n  const handleDragEnd = (_: any, info: PanInfo) => {\r\n    const offset = info.offset.x;\r\n\r\n    if (offset > threshold && leftAction) {\r\n      leftAction.onTrigger();\r\n      x.set(0);\r\n    } else if (offset < -threshold && rightAction) {\r\n      rightAction.onTrigger();\r\n      x.set(0);\r\n    } else {\r\n      x.set(0);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`relative overflow-hidden ${className}`}>\r\n      {/* Background actions */}\r\n      <div className=\"absolute inset-0 flex justify-between items-center px-6\">\r\n        {leftAction && (\r\n          <motion.div\r\n            className=\"flex items-center gap-2 text-white font-semibold\"\r\n            style={{ opacity: useTransform(x, [0, threshold], [0, 1]) }}\r\n          >\r\n            {leftAction.icon && <span>{leftAction.icon}</span>}\r\n            <span>{leftAction.label}</span>\r\n          </motion.div>\r\n        )}\r\n        {rightAction && (\r\n          <motion.div\r\n            className=\"flex items-center gap-2 text-white font-semibold ml-auto\"\r\n            style={{ opacity: useTransform(x, [-threshold, 0], [1, 0]) }}\r\n          >\r\n            <span>{rightAction.label}</span>\r\n            {rightAction.icon && <span>{rightAction.icon}</span>}\r\n          </motion.div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Draggable content */}\r\n      <motion.div\r\n        drag=\"x\"\r\n        dragConstraints={{ left: rightAction ? -threshold * 1.5 : 0, right: leftAction ? threshold * 1.5 : 0 }}\r\n        dragElastic={0.1}\r\n        onDragEnd={handleDragEnd}\r\n        style={{\r\n          x,\r\n          backgroundColor,\r\n        }}\r\n        className=\"relative z-10 bg-white dark:bg-gray-800 touch-pan-y\"\r\n      >\r\n        {children}\r\n      </motion.div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SwipeableListItem;\r\n","import React, { type ReactNode, useState, useRef } from 'react';\r\nimport { motion, useMotionValue, useTransform, type PanInfo } from 'framer-motion';\r\n\r\ninterface PullToRefreshProps {\r\n  children: ReactNode;\r\n  onRefresh: () => Promise<void>;\r\n  threshold?: number;\r\n  className?: string;\r\n}\r\n\r\nexport const PullToRefresh: React.FC<PullToRefreshProps> = ({\r\n  children,\r\n  onRefresh,\r\n  threshold = 80,\r\n  className = '',\r\n}) => {\r\n  const [isRefreshing, setIsRefreshing] = useState(false);\r\n  const y = useMotionValue(0);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  const opacity = useTransform(y, [0, threshold], [0, 1]);\r\n  const rotate = useTransform(y, [0, threshold], [0, 180]);\r\n\r\n  const handleDragEnd = async (_: any, info: PanInfo) => {\r\n    const offset = info.offset.y;\r\n\r\n    if (offset > threshold && !isRefreshing) {\r\n      setIsRefreshing(true);\r\n      try {\r\n        await onRefresh();\r\n      } finally {\r\n        setIsRefreshing(false);\r\n        y.set(0);\r\n      }\r\n    } else {\r\n      y.set(0);\r\n    }\r\n  };\r\n\r\n  const handleDrag = (_: any, info: PanInfo) => {\r\n    // Only allow pull down at the top of the scroll\r\n    const container = containerRef.current;\r\n    if (container && container.scrollTop === 0 && info.offset.y > 0) {\r\n      y.set(Math.min(info.offset.y, threshold * 1.5));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div ref={containerRef} className={`relative overflow-auto ${className}`}>\r\n      {/* Pull indicator */}\r\n      <motion.div\r\n        className=\"absolute top-0 left-0 right-0 flex items-center justify-center py-4 z-10\"\r\n        style={{\r\n          opacity,\r\n          height: useTransform(y, [0, threshold], [0, 60]),\r\n        }}\r\n      >\r\n        <motion.div\r\n          className=\"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full\"\r\n          style={{\r\n            rotate: isRefreshing ? undefined : rotate,\r\n          }}\r\n          animate={isRefreshing ? { rotate: 360 } : {}}\r\n          transition={{\r\n            repeat: isRefreshing ? Infinity : 0,\r\n            duration: 1,\r\n            ease: 'linear',\r\n          }}\r\n        />\r\n      </motion.div>\r\n\r\n      {/* Content */}\r\n      <motion.div\r\n        drag=\"y\"\r\n        dragConstraints={{ top: 0, bottom: 0 }}\r\n        dragElastic={0.1}\r\n        onDrag={handleDrag}\r\n        onDragEnd={handleDragEnd}\r\n        style={{ y }}\r\n        className=\"touch-pan-x\"\r\n      >\r\n        {children}\r\n      </motion.div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PullToRefresh;\r\n","import React, { type ReactNode } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport * as Dialog from '@radix-ui/react-dialog';\r\n\r\ninterface BottomSheetProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title?: string;\r\n  children: ReactNode;\r\n  snapPoints?: number[];\r\n  initialSnap?: number;\r\n  showHandle?: boolean;\r\n  className?: string;\r\n}\r\n\r\nexport const BottomSheet: React.FC<BottomSheetProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  title,\r\n  children,\r\n  showHandle = true,\r\n  className = '',\r\n}) => {\r\n  return (\r\n    <Dialog.Root open={isOpen} onOpenChange={(open) => !open && onClose()}>\r\n      <AnimatePresence>\r\n        {isOpen && (\r\n          <Dialog.Portal forceMount>\r\n            {/* Overlay */}\r\n            <Dialog.Overlay asChild>\r\n              <motion.div\r\n                className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-40\"\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n                transition={{ duration: 0.2 }}\r\n              />\r\n            </Dialog.Overlay>\r\n\r\n            {/* Bottom Sheet */}\r\n            <Dialog.Content asChild>\r\n              <motion.div\r\n                className={`\r\n                  fixed bottom-0 left-0 right-0 z-50\r\n                  bg-white dark:bg-gray-800\r\n                  rounded-t-3xl shadow-2xl\r\n                  max-h-[90vh] overflow-hidden\r\n                  ${className}\r\n                `}\r\n                initial={{ y: '100%' }}\r\n                animate={{ y: 0 }}\r\n                exit={{ y: '100%' }}\r\n                transition={{\r\n                  type: 'spring',\r\n                  stiffness: 300,\r\n                  damping: 30,\r\n                }}\r\n                drag=\"y\"\r\n                dragConstraints={{ top: 0, bottom: 0 }}\r\n                dragElastic={0.2}\r\n                onDragEnd={(_, info) => {\r\n                  if (info.offset.y > 100) {\r\n                    onClose();\r\n                  }\r\n                }}\r\n              >\r\n                {/* Drag handle */}\r\n                {showHandle && (\r\n                  <div className=\"flex justify-center pt-3 pb-2\">\r\n                    <div className=\"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full\" />\r\n                  </div>\r\n                )}\r\n\r\n                {/* Header */}\r\n                {title && (\r\n                  <div className=\"px-6 py-4 border-b border-gray-200 dark:border-gray-700\">\r\n                    <Dialog.Title className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n                      {title}\r\n                    </Dialog.Title>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Content */}\r\n                <div className=\"overflow-y-auto max-h-[calc(90vh-80px)] p-6\">\r\n                  {children}\r\n                </div>\r\n              </motion.div>\r\n            </Dialog.Content>\r\n          </Dialog.Portal>\r\n        )}\r\n      </AnimatePresence>\r\n    </Dialog.Root>\r\n  );\r\n};\r\n\r\nexport default BottomSheet;\r\n","import type { Apparatus } from '../types';\r\n\r\n/**\r\n * Cloudflare Worker URL for API requests\r\n */\r\nexport const WORKER_URL = import.meta.env.VITE_API_URL || 'https://usar-ics212.pdarleyjr.workers.dev';\r\n\r\n/**\r\n * API base URL (derives from WORKER_URL for consistency)\r\n */\r\nexport const API_BASE_URL = `${WORKER_URL}/api`;\r\n\r\n/**\r\n * API Endpoints Configuration\r\n */\r\nexport const API_ENDPOINTS = {\r\n  // ICS-212 Forms\r\n  ics212Forms: `${API_BASE_URL}/ics212/forms`,\r\n  formById: (id: string) => `${API_BASE_URL}/ics212/forms/${id}`,\r\n  analytics: `${API_BASE_URL}/ics212/analytics`,\r\n  submitForm: `${API_BASE_URL}/ics212/submit`,\r\n  emailForm: (id: string) => `${API_BASE_URL}/ics212/forms/${id}/email`,\r\n  \r\n  // ICS-218 Forms\r\n  ics218Forms: `${API_BASE_URL}/ics218/forms`,\r\n  ics218FormById: (id: string) => `${API_BASE_URL}/ics218/forms/${id}`,\r\n  ics218Submit: `${API_BASE_URL}/ics218/submit`,\r\n  ics218ValidatePassword: `${API_BASE_URL}/ics218/validate-password`,\r\n  ics218PdfDownload: (id: string) => `${API_BASE_URL}/ics218/pdf/${id}`,\r\n  \r\n  // Vehicles\r\n  vehicles: `${API_BASE_URL}/vehicles`,\r\n  vehicleAutocomplete: `${API_BASE_URL}/vehicles/autocomplete`,\r\n  vehicleById: (id: string) => `${API_BASE_URL}/vehicles/${id}`,\r\n  \r\n  // Inventory & Dynamic Forms\r\n  inventory: `${API_BASE_URL}/inventory`,\r\n  dynamicForms: `${API_BASE_URL}/forms`,\r\n  \r\n  // Health\r\n  health: `${API_BASE_URL}/health`,\r\n};\r\n\r\n/**\r\n * Feature flag for dynamic forms management\r\n * Set to false initially for safe rollout\r\n * When enabled, forms are loaded from D1 database instead of static JSON files\r\n */\r\nexport const FORMS_MANAGEMENT_ENABLED = true;\r\n\r\n/**\r\n * List of all apparatus in the MBFD fleet\r\n * Update this list when new apparatus are added to the system\r\n */\r\nexport const APPARATUS_LIST: Apparatus[]= [\r\n  'Engine 1', 'Engine 2', 'Engine 3', 'Engine 4',\r\n  'Ladder 1', 'Ladder 3',\r\n  'Rescue 1', 'Rescue 2', 'Rescue 3', 'Rescue 4',\r\n  'Rescue 11', 'Rescue 22', 'Rescue 44',\r\n  'Rope Inventory'\r\n];\r\n\r\n/**\r\n * GitHub issue label constants\r\n * These labels are used to categorize and filter issues\r\n */\r\nexport const LABELS = {\r\n  DEFECT: 'Defect',\r\n  LOG: 'Log',\r\n  DAMAGED: 'Damaged',\r\n  RESOLVED: 'Resolved',\r\n} as const;\r\n\r\n/**\r\n * Regular expression for parsing defect issue titles\r\n * Format: [Apparatus] Compartment: Item - Status\r\n */\r\nexport const DEFECT_TITLE_REGEX = /\\[(.+)\\]\\s+(.+):\\s+(.+?)\\s+-\\s+(Missing|Damaged)/;","/**\r\n * Form Detail Component\r\n * \r\n * Displays complete ICS-212 form information with PDF preview\r\n * Features:\r\n * - PDF preview in iframe\r\n * - Complete form metadata\r\n * - Download PDF button\r\n * - Email distribution button\r\n * - Vehicle history timeline\r\n */\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { API_BASE_URL } from '../../lib/config';\r\nimport { TouchFeedback } from '../mobile/TouchFeedback';\r\nimport { showToast } from '../mobile/Toast';\r\n\r\ninterface FormDetailProps {\r\n  formId: string;\r\n}\r\n\r\nexport function FormDetail({ formId }: FormDetailProps) {\r\n  const [loading, setLoading] = useState(true);\r\n  const [form, setForm] = useState<any>(null);\r\n\r\n  useEffect(() => {\r\n    fetchFormDetail();\r\n  }, [formId]);\r\n\r\n  const fetchFormDetail = async () => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/ics212/forms/${formId}`);\r\n      if (!response.ok) throw new Error('Failed to fetch form');\r\n      const data = await response.json();\r\n      setForm(data.form);\r\n    } catch (error) {\r\n      console.error('Error fetching form detail:', error);\r\n      showToast({ message: 'Failed to load form details', type: 'error' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDownloadPDF = () => {\r\n    if (form?.pdf_url) {\r\n      window.open(form.pdf_url, '_blank');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-4 space-y-4\">\r\n        <div className=\"animate-pulse space-y-3\">\r\n          <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4\"></div>\r\n          <div className=\"h-32 bg-gray-200 dark:bg-gray-700 rounded\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!form) {\r\n    return (\r\n      <div className=\"p-4 text-center\">\r\n        <p className=\"text-red-500\">Form not found</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4 max-h-[80vh] overflow-y-auto\">\r\n      {/* Header */}\r\n      <div className=\"sticky top-0 bg-white dark:bg-gray-800 p-4 border-b border-gray-200 dark:border-gray-700\">\r\n        <h3 className=\"font-bold text-xl text-gray-900 dark:text-white\">\r\n          {form.vehicle_id_no}\r\n        </h3>\r\n        <p className=\"text-sm text-gray-600 dark:text-gray-400\">{form.incident_name}</p>\r\n        <div className=\"mt-2\">\r\n          <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${\r\n            form.release_decision === 'hold' \r\n              ? 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200'\r\n              : 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\r\n          }`}>\r\n            {form.release_decision === 'hold' ? 'üî¥ HOLD' : 'üü¢ RELEASED'}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* PDF Preview */}\r\n      {form.pdf_url && (\r\n        <div className=\"px-4\">\r\n          <div className=\"border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-900\">\r\n            <iframe\r\n              src={form.pdf_url}\r\n              className=\"w-full\"\r\n              style={{ height: '400px' }}\r\n              title=\"PDF Preview\"\r\n            />\r\n          </div>\r\n          <TouchFeedback>\r\n            <button\r\n              onClick={handleDownloadPDF}\r\n              className=\"w-full mt-2 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors\"\r\n            >\r\n              üì• Download PDF\r\n            </button>\r\n          </TouchFeedback>\r\n        </div>\r\n      )}\r\n\r\n      {/* Form Details */}\r\n      <div className=\"px-4 space-y-3\">\r\n        <h4 className=\"font-semibold text-gray-900 dark:text-white\">Inspection Details</h4>\r\n        \r\n        <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n          <div>\r\n            <span className=\"font-medium text-gray-700 dark:text-gray-300\">Inspector:</span>\r\n            <p className=\"text-gray-900 dark:text-white\">{form.inspector_name_print}</p>\r\n          </div>\r\n          <div>\r\n            <span className=\"font-medium text-gray-700 dark:text-gray-300\">Date:</span>\r\n            <p className=\"text-gray-900 dark:text-white\">{form.inspector_date}</p>\r\n          </div>\r\n          <div>\r\n            <span className=\"font-medium text-gray-700 dark:text-gray-300\">Time:</span>\r\n            <p className=\"text-gray-900 dark:text-white\">{form.inspector_time}</p>\r\n          </div>\r\n          <div>\r\n            <span className=\"font-medium text-gray-700 dark:text-gray-300\">Vehicle Type:</span>\r\n            <p className=\"text-gray-900 dark:text-white\">{form.vehicle_type}</p>\r\n          </div>\r\n          <div>\r\n            <span className=\"font-medium text-gray-700 dark:text-gray-300\">License:</span>\r\n            <p className=\"text-gray-900 dark:text-white\">{form.vehicle_license_no}</p>\r\n          </div>\r\n          <div>\r\n            <span className=\"font-medium text-gray-700 dark:text-gray-300\">Agency/Unit:</span>\r\n            <p className=\"text-gray-900 dark:text-white\">{form.agency_reg_unit}</p>\r\n          </div>\r\n        </div>\r\n\r\n        {form.additional_comments && (\r\n          <div>\r\n            <span className=\"font-medium text-gray-700 dark:text-gray-300\">Comments:</span>\r\n            <p className=\"text-sm text-gray-900 dark:text-white mt-1 p-2 bg-gray-50 dark:bg-gray-700 rounded\">\r\n              {form.additional_comments}\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {form.github_issue_number && (\r\n          <TouchFeedback>\r\n            <a\r\n              href={`https://github.com/pdarleyjr/mbfd-checkout-system/issues/${form.github_issue_number}`}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              className=\"block w-full py-2 px-4 bg-gray-100 dark:bg-gray-700 text-blue-600 dark:text-blue-400 rounded-lg text-center font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors\"\r\n            >\r\n              View GitHub Issue #{form.github_issue_number} ‚Üí\r\n            </a>\r\n          </TouchFeedback>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * ICS 218 Form Detail Component\r\n * \r\n * Displays complete ICS 218 form details when admin clicks on a form\r\n * Shows incident info, vehicle table, prepared by info, PDF link, and GitHub issue\r\n */\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { API_ENDPOINTS } from '../../lib/config';\r\nimport { SkeletonLoader } from '../mobile/SkeletonLoader';\r\n\r\ninterface ICS218Vehicle {\r\n  id: string;\r\n  order_request_number?: string;\r\n  incident_id_no?: string;\r\n  classification: string;\r\n  make: string;\r\n  category_kind_type: string;\r\n  features?: string;\r\n  agency_owner: string;\r\n  operator_name_contact: string;\r\n  vehicle_license_id: string;\r\n  incident_assignment: string;\r\n  start_date_time: string;\r\n  release_date_time?: string;\r\n  row_order: number;\r\n}\r\n\r\ninterface ICS218FormData {\r\n  id: string;\r\n  incident_name: string;\r\n  incident_number: string;\r\n  date_prepared: string;\r\n  time_prepared: string;\r\n  vehicle_category: string;\r\n  prepared_by_name: string;\r\n  prepared_by_position: string;\r\n  signature_data: string;\r\n  signature_timestamp: string;\r\n  pdf_url?: string;\r\n  pdf_filename?: string;\r\n  github_issue_url?: string;\r\n  github_issue_number?: number;\r\n  created_at: string;\r\n  vehicles: ICS218Vehicle[];\r\n}\r\n\r\ninterface Props {\r\n  formId: string;\r\n}\r\n\r\nexport function ICS218Detail({ formId }: Props) {\r\n  const [form, setForm] = useState<ICS218FormData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    fetchFormDetails();\r\n  }, [formId]);\r\n\r\n  const fetchFormDetails = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await fetch(API_ENDPOINTS.ics218FormById(formId));\r\n      \r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch form details');\r\n      }\r\n\r\n      const data = await response.json();\r\n      setForm(data.form);\r\n    } catch (err) {\r\n      console.error('Error fetching ICS 218 form details:', err);\r\n      setError(err instanceof Error ? err.message : 'Unknown error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDownloadPDF = () => {\r\n    if (form?.pdf_url) {\r\n      window.open(form.pdf_url, '_blank');\r\n    }\r\n  };\r\n\r\n  const handleViewGitHub = () => {\r\n    if (form?.github_issue_url) {\r\n      window.open(form.github_issue_url, '_blank');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"space-y-4 p-4\">\r\n        <SkeletonLoader type=\"card\" />\r\n        <SkeletonLoader type=\"card\" />\r\n        <SkeletonLoader type=\"card\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !form) {\r\n    return (\r\n      <div className=\"p-4\">\r\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4\">\r\n          <p className=\"text-red-800 dark:text-red-200\">\r\n            {error || 'Form not found'}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6 p-4 max-h-[70vh] overflow-y-auto\">\r\n      {/* Header Section */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n            ICS 218 - Support Vehicle/Equipment Log\r\n          </h2>\r\n          <span className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200\">\r\n            ICS 218\r\n          </span>\r\n        </div>\r\n        \r\n        {/* Incident Info */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\r\n          <div>\r\n            <label className=\"font-semibold text-gray-700 dark:text-gray-300\">Incident Name:</label>\r\n            <p className=\"text-gray-900 dark:text-white\">{form.incident_name}</p>\r\n          </div>\r\n          <div>\r\n            <label className=\"font-semibold text-gray-700 dark:text-gray-300\">Incident Number:</label>\r\n            <p className=\"text-gray-900 dark:text-white\">{form.incident_number || 'N/A'}</p>\r\n          </div>\r\n          <div>\r\n            <label className=\"font-semibold text-gray-700 dark:text-gray-300\">Date Prepared:</label>\r\n            <p className=\"text-gray-900 dark:text-white\">\r\n              {new Date(form.date_prepared).toLocaleDateString()}\r\n            </p>\r\n          </div>\r\n          <div>\r\n            <label className=\"font-semibold text-gray-700 dark:text-gray-300\">Time Prepared:</label>\r\n            <p className=\"text-gray-900 dark:text-white\">{form.time_prepared}</p>\r\n          </div>\r\n          <div>\r\n            <label className=\"font-semibold text-gray-700 dark:text-gray-300\">Vehicle Category:</label>\r\n            <p className=\"text-gray-900 dark:text-white\">{form.vehicle_category}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Vehicles Table */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\r\n          Vehicles ({form.vehicles.length})\r\n        </h3>\r\n        \r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"min-w-full text-sm\">\r\n            <thead className=\"bg-gray-50 dark:bg-gray-700\">\r\n              <tr>\r\n                <th className=\"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300\">Classification</th>\r\n                <th className=\"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300\">Make/Type</th>\r\n                <th className=\"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300\">License ID</th>\r\n                <th className=\"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300\">Agency</th>\r\n                <th className=\"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300\">Operator</th>\r\n                <th className=\"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300\">Assignment</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n              {form.vehicles.map((vehicle) => (\r\n                <tr key={vehicle.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-700\">\r\n                  <td className=\"px-3 py-2 text-gray-900 dark:text-white\">{vehicle.classification}</td>\r\n                  <td className=\"px-3 py-2 text-gray-900 dark:text-white\">\r\n                    {vehicle.make} {vehicle.category_kind_type}\r\n                  </td>\r\n                  <td className=\"px-3 py-2 text-gray-900 dark:text-white\">{vehicle.vehicle_license_id}</td>\r\n                  <td className=\"px-3 py-2 text-gray-900 dark:text-white\">{vehicle.agency_owner}</td>\r\n                  <td className=\"px-3 py-2 text-gray-900 dark:text-white\">{vehicle.operator_name_contact}</td>\r\n                  <td className=\"px-3 py-2 text-gray-900 dark:text-white\">{vehicle.incident_assignment}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Prepared By Section */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\r\n          Prepared By\r\n        </h3>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\r\n          <div>\r\n            <label className=\"font-semibold text-gray-700 dark:text-gray-300\">Name:</label>\r\n            <p className=\"text-gray-900 dark:text-white\">{form.prepared_by_name}</p>\r\n          </div>\r\n          <div>\r\n            <label className=\"font-semibold text-gray-700 dark:text-gray-300\">Position/Title:</label>\r\n            <p className=\"text-gray-900 dark:text-white\">{form.prepared_by_position}</p>\r\n          </div>\r\n          <div>\r\n            <label className=\"font-semibold text-gray-700 dark:text-gray-300\">Signature Date/Time:</label>\r\n            <p className=\"text-gray-900 dark:text-white\">\r\n              {new Date(form.signature_timestamp).toLocaleString()}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Signature Preview */}\r\n        {form.signature_data && (\r\n          <div className=\"mt-4\">\r\n            <label className=\"font-semibold text-gray-700 dark:text-gray-300 block mb-2\">Signature:</label>\r\n            <div className=\"border border-gray-300 dark:border-gray-600 rounded-lg p-2 bg-white dark:bg-gray-900 inline-block\">\r\n              <img \r\n                src={form.signature_data} \r\n                alt=\"Signature\" \r\n                className=\"max-w-xs h-20\"\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Actions */}\r\n      <div className=\"flex gap-3\">\r\n        {form.pdf_url && (\r\n          <button\r\n            onClick={handleDownloadPDF}\r\n            className=\"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center gap-2\"\r\n          >\r\n            <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n            </svg>\r\n            Download PDF\r\n          </button>\r\n        )}\r\n        \r\n        {form.github_issue_url && (\r\n          <button\r\n            onClick={handleViewGitHub}\r\n            className=\"flex-1 px-4 py-3 bg-gray-800 text-white rounded-lg font-semibold hover:bg-gray-900 transition-colors flex items-center justify-center gap-2\"\r\n          >\r\n            <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path d=\"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z\"/>\r\n            </svg>\r\n            View GitHub Issue\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Meta Info */}\r\n      <div className=\"text-xs text-gray-500 dark:text-gray-400 text-center\">\r\n        Form ID: {form.id} | Submitted: {new Date(form.created_at).toLocaleString()}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Forms List Component\r\n * \r\n * Displays ICS-212 and ICS-218 forms with real-time search, filtering, and pagination\r\n * Features:\r\n * - Mobile-responsive card/list layout\r\n * - Form type filter (All, ICS 212, ICS 218)\r\n * - Real-time search across vehicle ID, incident name, inspector\r\n * - Filter by status (HOLD/RELEASED for ICS 212)\r\n * - Swipeable list items with quick actions\r\n * - Pull-to-refresh\r\n * - Infinite scroll pagination\r\n */\r\n\r\nimport { useState, useCallback, useEffect } from 'react';\r\nimport { SwipeableListItem } from '../mobile/SwipeableListItem';\r\nimport { PullToRefresh } from '../mobile/PullToRefresh';\r\nimport { SkeletonLoader } from '../mobile/SkeletonLoader';\r\nimport { TouchFeedback } from '../mobile/TouchFeedback';\r\nimport { Toast, showToast } from '../mobile/Toast';\r\nimport { BottomSheet } from '../mobile/BottomSheet';\r\nimport { FormDetail } from './FormDetail';\r\nimport { ICS218Detail } from './ICS218Detail';\r\nimport { API_BASE_URL, API_ENDPOINTS } from '../../lib/config';\r\n\r\ninterface ICS212Form {\r\n  id: number;\r\n  form_id: string;\r\n  incident_name: string;\r\n  vehicle_id_no: string;\r\n  vehicle_type: string;\r\n  release_decision: 'hold' | 'release';\r\n  inspector_name_print: string;\r\n  inspector_date: string;\r\n  inspector_time: string;\r\n  pdf_url?: string;\r\n  github_issue_number?: number;\r\n  created_at: string;\r\n  pass_count?: number;\r\n  fail_count?: number;\r\n  formType: 'ICS212';\r\n}\r\n\r\ninterface ICS218Form {\r\n  id: string;\r\n  incident_name: string;\r\n  incident_number: string;\r\n  date_prepared: string;\r\n  time_prepared: string;\r\n  vehicle_category: string;\r\n  prepared_by_name: string;\r\n  pdf_url?: string;\r\n  github_issue_number?: number;\r\n  created_at: string;\r\n  vehicleCount: number;\r\n  formType: 'ICS218';\r\n}\r\n\r\ntype UnifiedForm = ICS212Form | ICS218Form;\r\n\r\nexport function FormsList() {\r\n  const [forms, setForms] = useState<UnifiedForm[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [page, setPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [formTypeFilter, setFormTypeFilter] = useState<'all' | 'ICS212' | 'ICS218'>('all');\r\n  const [statusFilter, setStatusFilter] = useState<'all' | 'hold' | 'release'>('all');\r\n  const [dateFrom, setDateFrom] = useState('');\r\n  const [dateTo, setDateTo] = useState('');\r\n  const [selectedFormId, setSelectedFormId] = useState<string | null>(null);\r\n  const [selectedFormType, setSelectedFormType] = useState<'ICS212' | 'ICS218' | null>(null);\r\n\r\n  const fetchForms = useCallback(async (pageNum: number = 1, append: boolean = false) => {\r\n    if (!append) setLoading(true);\r\n\r\n    try {\r\n      const promises: Promise<any>[] = [];\r\n      \r\n      // Fetch ICS 212 forms if needed\r\n      if (formTypeFilter === 'all' || formTypeFilter === 'ICS212') {\r\n        const params = new URLSearchParams({\r\n          page: pageNum.toString(),\r\n          limit: '20',\r\n          sortBy: 'date',\r\n          sortOrder: 'desc',\r\n        });\r\n\r\n        if (searchTerm) params.set('search', searchTerm);\r\n        if (statusFilter !== 'all') params.set('status', statusFilter);\r\n        if (dateFrom) params.set('from', dateFrom);\r\n        if (dateTo) params.set('to', dateTo);\r\n\r\n        promises.push(\r\n          fetch(`${API_BASE_URL}/ics212/forms?${params}`)\r\n            .then(r => r.ok ? r.json() : { forms: [] })\r\n            .then(data => data.forms.map((f: ICS212Form) => ({ ...f, formType: 'ICS212' as const })))\r\n        );\r\n      }\r\n      \r\n      // Fetch ICS 218 forms if needed\r\n      if (formTypeFilter === 'all' || formTypeFilter === 'ICS218') {\r\n        const params = new URLSearchParams({\r\n          limit: '20',\r\n          offset: ((pageNum - 1) * 20).toString(),\r\n        });\r\n\r\n        if (searchTerm) params.set('incident', searchTerm);\r\n\r\n        promises.push(\r\n          fetch(`${API_ENDPOINTS.ics218Forms}?${params}`)\r\n            .then(r => r.ok ? r.json() : { forms: [] })\r\n            .then(data => data.forms.map((f: any) => ({ ...f, formType: 'ICS218' as const })))\r\n        );\r\n      }\r\n\r\n      const results = await Promise.all(promises);\r\n      const allForms = results.flat();\r\n      \r\n      // Sort by created_at date\r\n      allForms.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\r\n      \r\n      if (append) {\r\n        setForms(prev => [...prev, ...allForms]);\r\n      } else {\r\n        setForms(allForms);\r\n      }\r\n      \r\n      // For simplicity, set totalPages based on result count\r\n      setTotalPages(allForms.length >= 20 ? pageNum + 1 : pageNum);\r\n      setPage(pageNum);\r\n    } catch (error) {\r\n      console.error('Error fetching forms:', error);\r\n      showToast({ message: 'Failed to load forms', type: 'error' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [searchTerm, formTypeFilter, statusFilter, dateFrom, dateTo]);\r\n\r\n  useEffect(() => {\r\n    fetchForms(1, false);\r\n  }, [searchTerm, formTypeFilter, statusFilter, dateFrom, dateTo]);\r\n\r\n  const handleRefresh = async () => {\r\n    await fetchForms(1, false);\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    if (page < totalPages && !loading) {\r\n      fetchForms(page + 1, true);\r\n    }\r\n  };\r\n\r\n  const handleDownloadPDF = async (form: UnifiedForm) => {\r\n    if (!form.pdf_url) {\r\n      showToast({ message: 'PDF not available', type: 'error' });\r\n      return;\r\n    }\r\n    window.open(form.pdf_url, '_blank');\r\n  };\r\n\r\n  const handleViewForm = (formId: string, formType: 'ICS212' | 'ICS218') => {\r\n    setSelectedFormId(formId);\r\n    setSelectedFormType(formType);\r\n  };\r\n\r\n  const getFormTypeBadge = (formType: 'ICS212' | 'ICS218') => {\r\n    if (formType === 'ICS212') {\r\n      return (\r\n        <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\">\r\n          ICS 212\r\n        </span>\r\n      );\r\n    }\r\n    return (\r\n      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200\">\r\n        ICS 218\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const getStatusBadge = (status: 'hold' | 'release') => {\r\n    if (status === 'hold') {\r\n      return (\r\n        <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200\">\r\n          üî¥ HOLD\r\n        </span>\r\n      );\r\n    }\r\n    return (\r\n      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\">\r\n        üü¢ RELEASED\r\n      </span>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Search and Filters */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 space-y-4\">\r\n        {/* Search Input */}\r\n        <div>\r\n          <input\r\n            type=\"search\"\r\n            placeholder=\"Search by vehicle ID, incident, or inspector...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\r\n          />\r\n        </div>\r\n\r\n        {/* Form Type Filter Pills */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            Form Type\r\n          </label>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            <TouchFeedback>\r\n              <button\r\n                onClick={() => setFormTypeFilter('all')}\r\n                className={`px-4 py-2 rounded-full text-sm font-medium transition-colors ${\r\n                  formTypeFilter === 'all'\r\n                    ? 'bg-purple-600 text-white'\r\n                    : 'bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300'\r\n                }`}\r\n              >\r\n                All Forms\r\n              </button>\r\n            </TouchFeedback>\r\n            <TouchFeedback>\r\n              <button\r\n                onClick={() => setFormTypeFilter('ICS212')}\r\n                className={`px-4 py-2 rounded-full text-sm font-medium transition-colors ${\r\n                  formTypeFilter === 'ICS212'\r\n                    ? 'bg-blue-600 text-white'\r\n                    : 'bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300'\r\n                }`}\r\n              >\r\n                ICS 212\r\n              </button>\r\n            </TouchFeedback>\r\n            <TouchFeedback>\r\n              <button\r\n                onClick={() => setFormTypeFilter('ICS218')}\r\n                className={`px-4 py-2 rounded-full text-sm font-medium transition-colors ${\r\n                  formTypeFilter === 'ICS218'\r\n                    ? 'bg-orange-600 text-white'\r\n                    : 'bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300'\r\n                }`}\r\n              >\r\n                ICS 218\r\n              </button>\r\n            </TouchFeedback>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Status Filter (ICS 212 only) */}\r\n        {(formTypeFilter === 'all' || formTypeFilter === 'ICS212') && (\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              Status (ICS 212)\r\n            </label>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              <TouchFeedback>\r\n                <button\r\n                  onClick={() => setStatusFilter('all')}\r\n                  className={`px-4 py-2 rounded-full text-sm font-medium transition-colors ${\r\n                    statusFilter === 'all'\r\n                      ? 'bg-blue-600 text-white'\r\n                      : 'bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300'\r\n                  }`}\r\n                >\r\n                  All\r\n                </button>\r\n              </TouchFeedback>\r\n              <TouchFeedback>\r\n                <button\r\n                  onClick={() => setStatusFilter('hold')}\r\n                  className={`px-4 py-2 rounded-full text-sm font-medium transition-colors ${\r\n                    statusFilter === 'hold'\r\n                      ? 'bg-red-600 text-white'\r\n                      : 'bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300'\r\n                  }`}\r\n                >\r\n                  HOLD\r\n                </button>\r\n              </TouchFeedback>\r\n              <TouchFeedback>\r\n                <button\r\n                  onClick={() => setStatusFilter('release')}\r\n                  className={`px-4 py-2 rounded-full text-sm font-medium transition-colors ${\r\n                    statusFilter === 'release'\r\n                      ? 'bg-green-600 text-white'\r\n                      : 'bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300'\r\n                  }`}\r\n                >\r\n                  RELEASED\r\n                </button>\r\n              </TouchFeedback>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Date Range Filters */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              From Date\r\n            </label>\r\n            <input\r\n              type=\"date\"\r\n              value={dateFrom}\r\n              onChange={(e) => setDateFrom(e.target.value)}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              To Date\r\n            </label>\r\n            <input\r\n              type=\"date\"\r\n              value={dateTo}\r\n              onChange={(e) => setDateTo(e.target.value)}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Results Count */}\r\n      {!loading && (\r\n        <div className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n          Showing {forms.length} form{forms.length !== 1 ? 's' : ''}\r\n        </div>\r\n      )}\r\n\r\n      {/* Forms List */}\r\n      <PullToRefresh onRefresh={handleRefresh}>\r\n        <div className=\"space-y-3\">\r\n          {loading && page === 1 ? (\r\n            // Initial loading state\r\n            Array.from({ length: 5 }).map((_, i) => (\r\n              <SkeletonLoader key={i} type=\"card\" />\r\n            ))\r\n          ) : forms.length === 0 ? (\r\n            // Empty state\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center\">\r\n              <svg className=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n              </svg>\r\n              <h3 className=\"mt-2 text-sm font-medium text-gray-900 dark:text-white\">No forms found</h3>\r\n              <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\r\n                Try adjusting your search or filter criteria\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            // Forms list\r\n            forms.map((form) => (\r\n              <SwipeableListItem\r\n                key={`${form.formType}-${form.id}`}\r\n                leftAction={{\r\n                  label: 'View',\r\n                  color: '#3b82f6',\r\n                  onTrigger: () => handleViewForm(\r\n                    form.formType === 'ICS212' ? (form as ICS212Form).form_id : (form as ICS218Form).id,\r\n                    form.formType\r\n                  )\r\n                }}\r\n                rightAction={{\r\n                  label: 'Download',\r\n                  color: '#10b981',\r\n                  onTrigger: () => handleDownloadPDF(form)\r\n                }}\r\n              >\r\n                <TouchFeedback>\r\n                  <div\r\n                    onClick={() => handleViewForm(\r\n                      form.formType === 'ICS212' ? (form as ICS212Form).form_id : (form as ICS218Form).id,\r\n                      form.formType\r\n                    )}\r\n                    className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 cursor-pointer hover:shadow-md transition-shadow\"\r\n                  >\r\n                    <div className=\"flex items-start justify-between gap-4\">\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        {/* Form Type Badge and Primary Info */}\r\n                        <div className=\"flex items-center gap-2 mb-2 flex-wrap\">\r\n                          {getFormTypeBadge(form.formType)}\r\n                          {form.formType === 'ICS212' && (\r\n                            <>\r\n                              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white truncate\">\r\n                                {(form as ICS212Form).vehicle_id_no}\r\n                              </h3>\r\n                              {getStatusBadge((form as ICS212Form).release_decision)}\r\n                            </>\r\n                          )}\r\n                          {form.formType === 'ICS218' && (\r\n                            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white truncate\">\r\n                              {(form as ICS218Form).incident_name}\r\n                            </h3>\r\n                          )}\r\n                        </div>\r\n\r\n                        {/* Incident Name / Secondary Info */}\r\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2 truncate\">\r\n                          {form.formType === 'ICS212' ? (form as ICS212Form).incident_name : (form as ICS218Form).vehicle_category}\r\n                        </p>\r\n\r\n                        {/* Meta Info */}\r\n                        <div className=\"flex flex-wrap gap-x-4 gap-y-1 text-xs text-gray-500 dark:text-gray-400\">\r\n                          {form.formType === 'ICS212' && (\r\n                            <>\r\n                              <span>üîç {(form as ICS212Form).inspector_name_print}</span>\r\n                              <span>üìÖ {new Date((form as ICS212Form).inspector_date).toLocaleDateString()}</span>\r\n                              {(form as ICS212Form).pass_count !== undefined && (form as ICS212Form).fail_count !== undefined && (\r\n                                <span>\r\n                                  ‚úÖ {(form as ICS212Form).pass_count} / ‚ùå {(form as ICS212Form).fail_count}\r\n                                </span>\r\n                              )}\r\n                            </>\r\n                          )}\r\n                          {form.formType === 'ICS218' && (\r\n                            <>\r\n                              <span>üë§ {(form as ICS218Form).prepared_by_name}</span>\r\n                              <span>üìÖ {new Date((form as ICS218Form).date_prepared).toLocaleDateString()}</span>\r\n                              <span>üöó {(form as ICS218Form).vehicleCount} vehicle{(form as ICS218Form).vehicleCount !== 1 ? 's' : ''}</span>\r\n                            </>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Action Button */}\r\n                      <svg className=\"w-5 h-5 text-gray-400 flex-shrink-0\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n                      </svg>\r\n                    </div>\r\n                  </div>\r\n                </TouchFeedback>\r\n              </SwipeableListItem>\r\n            ))\r\n          )}\r\n\r\n          {/* Load More Button */}\r\n          {page < totalPages && !loading && (\r\n            <TouchFeedback>\r\n              <button\r\n                onClick={handleLoadMore}\r\n                className=\"w-full py-3 bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 rounded-lg shadow-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\r\n              >\r\n                Load More\r\n              </button>\r\n            </TouchFeedback>\r\n          )}\r\n\r\n          {/* Loading more indicator */}\r\n          {loading && page > 1 && (\r\n            <div className=\"text-center py-4\">\r\n              <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </PullToRefresh>\r\n\r\n      {/* Form Detail Bottom Sheet */}\r\n      {selectedFormId && selectedFormType && (\r\n        <BottomSheet\r\n          isOpen={!!selectedFormId}\r\n          onClose={() => {\r\n            setSelectedFormId(null);\r\n            setSelectedFormType(null);\r\n          }}\r\n          title=\"Form Details\"\r\n        >\r\n          {selectedFormType === 'ICS212' && <FormDetail formId={selectedFormId} />}\r\n          {selectedFormType === 'ICS218' && <ICS218Detail formId={selectedFormId} />}\r\n        </BottomSheet>\r\n      )}\r\n\r\n      {/* Toast Component */}\r\n      <Toast />\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Analytics Dashboard Component\r\n * \r\n * Displays statistics, trends, and insights for both ICS-212 and ICS-218 forms\r\n * Features:\r\n * - Key metrics cards (total forms, hold rate, etc.)\r\n * - Interactive charts using Recharts\r\n * - Mobile-responsive grid layout\r\n * - Real-time data updates\r\n * - Combined ICS 212 + ICS 218 analytics\r\n */\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { BarChart, Bar, LineChart, Line, PieChart, Pie, Cell, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend } from 'recharts';\r\nimport { API_BASE_URL, API_ENDPOINTS } from '../../lib/config';\r\nimport { SkeletonLoader } from '../mobile/SkeletonLoader';\r\n\r\ninterface AnalyticsData {\r\n  totalForms: number;\r\n  formsThisMonth: number;\r\n  formsThisWeek: number;\r\n  holdRate: number;\r\n  releaseRate: number;\r\n  topVehicles: Array<{ vehicleId: string; count: number}>;\r\n  safetyItemFailures: Array<{ item: string; count: number }>;\r\n  formsPerDay: Array<{ date: string; count: number }>;\r\n}\r\n\r\ninterface ICS218Analytics {\r\n  totalForms: number;\r\n  totalVehicles: number;\r\n  formsByCategory: Array<{ category: string; count: number }>;\r\n  formsThisMonth: number;\r\n}\r\n\r\nexport function AnalyticsDashboard() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [ics212Analytics, setIcs212Analytics] = useState<AnalyticsData | null>(null);\r\n  const [ics218Analytics, setIcs218Analytics] = useState<ICS218Analytics | null>(null);\r\n\r\n  useEffect(() => {\r\n    fetchAnalytics();\r\n    const interval = setInterval(fetchAnalytics, 60000); // Refresh every minute\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const fetchAnalytics = async () => {\r\n    try {\r\n      // Fetch ICS 212 analytics\r\n      const ics212Response = await fetch(`${API_BASE_URL}/ics212/analytics`);\r\n      if (ics212Response.ok) {\r\n        const ics212Data = await ics212Response.json();\r\n        setIcs212Analytics(ics212Data);\r\n      }\r\n\r\n      // Fetch ICS 218 forms to compute analytics\r\n      const ics218Response = await fetch(`${API_ENDPOINTS.ics218Forms}?limit=1000`);\r\n      if (ics218Response.ok) {\r\n        const ics218Data = await ics218Response.json();\r\n        const forms = ics218Data.forms || [];\r\n        \r\n        // Calculate ICS 218 analytics\r\n        const now = new Date();\r\n        const thisMonth = now.getMonth();\r\n        const thisYear = now.getFullYear();\r\n        \r\n        const formsThisMonth = forms.filter((f: any) => {\r\n          const formDate = new Date(f.created_at);\r\n          return formDate.getMonth() === thisMonth && formDate.getFullYear() === thisYear;\r\n        }).length;\r\n        \r\n        const totalVehicles = forms.reduce((sum: number, form: any) => sum + (form.vehicleCount || 0), 0);\r\n        \r\n        // Count by category\r\n        const categoryCount: Record<string, number> = {};\r\n        forms.forEach((form: any) => {\r\n          const category = form.vehicle_category || 'Unknown';\r\n          categoryCount[category] = (categoryCount[category] || 0) + 1;\r\n        });\r\n        \r\n        const formsByCategory = Object.entries(categoryCount).map(([category, count]) => ({\r\n          category,\r\n          count\r\n        }));\r\n        \r\n        setIcs218Analytics({\r\n          totalForms: forms.length,\r\n          totalVehicles,\r\n          formsByCategory,\r\n          formsThisMonth\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching analytics:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        {Array.from({ length: 4 }).map((_, i) => (\r\n          <SkeletonLoader key={i} type=\"card\" />\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!ics212Analytics) {\r\n    return <div className=\"text-center text-red-500 p-4\">Failed to load analytics</div>;\r\n  }\r\n\r\n  const pieData = [\r\n    { name: 'HOLD', value: Math.round(ics212Analytics.holdRate), color: '#ef4444' },\r\n    { name: 'RELEASED', value: Math.round(ics212Analytics.releaseRate), color: '#10b981' },\r\n  ];\r\n\r\n  // Combined form type comparison data\r\n  const formTypeData = [\r\n    { \r\n      name: 'ICS 212', \r\n      total: ics212Analytics.totalForms,\r\n      thisMonth: ics212Analytics.formsThisMonth,\r\n      color: '#3b82f6'\r\n    },\r\n    { \r\n      name: 'ICS 218', \r\n      total: ics218Analytics?.totalForms || 0,\r\n      thisMonth: ics218Analytics?.formsThisMonth || 0,\r\n      color: '#f97316'\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Key Metrics Cards */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        {/* Total ICS 212 Forms */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">ICS 212 Forms</p>\r\n              <p className=\"text-3xl font-bold text-blue-600 dark:text-blue-400 mt-1\">\r\n                {ics212Analytics.totalForms}\r\n              </p>\r\n            </div>\r\n            <div className=\"text-4xl\">üìã</div>\r\n          </div>\r\n          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\r\n            {ics212Analytics.formsThisMonth} this month\r\n          </p>\r\n        </div>\r\n\r\n        {/* Total ICS 218 Forms */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">ICS 218 Forms</p>\r\n              <p className=\"text-3xl font-bold text-orange-600 dark:text-orange-400 mt-1\">\r\n                {ics218Analytics?.totalForms || 0}\r\n              </p>\r\n            </div>\r\n            <div className=\"text-4xl\">üöó</div>\r\n          </div>\r\n          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\r\n            {ics218Analytics?.formsThisMonth || 0} this month\r\n          </p>\r\n        </div>\r\n\r\n        {/* HOLD Rate */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">HOLD Rate</p>\r\n              <p className=\"text-3xl font-bold text-red-600 dark:text-red-400 mt-1\">\r\n                {ics212Analytics.holdRate.toFixed(1)}%\r\n              </p>\r\n            </div>\r\n            <div className=\"text-4xl\">üî¥</div>\r\n          </div>\r\n          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\r\n            ICS 212 only\r\n          </p>\r\n        </div>\r\n\r\n        {/* Total Vehicles Tracked (ICS 218) */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">Vehicles Tracked</p>\r\n              <p className=\"text-3xl font-bold text-green-600 dark:text-green-400 mt-1\">\r\n                {ics218Analytics?.totalVehicles || 0}\r\n              </p>\r\n            </div>\r\n            <div className=\"text-4xl\">üöô</div>\r\n          </div>\r\n          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\r\n            ICS 218 vehicles\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Charts Grid */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Form Type Comparison Chart */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\r\n            Form Type Comparison\r\n          </h3>\r\n          <ResponsiveContainer width=\"100%\" height={300}>\r\n            <BarChart data={formTypeData}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#374151\" />\r\n              <XAxis dataKey=\"name\" stroke=\"#9ca3af\" />\r\n              <YAxis stroke=\"#9ca3af\" />\r\n              <Tooltip \r\n                contentStyle={{ backgroundColor: '#1f2937', border: 'none', borderRadius: '8px' }}\r\n                labelStyle={{ color: '#fff' }}\r\n              />\r\n              <Legend />\r\n              <Bar dataKey=\"total\" fill=\"#3b82f6\" name=\"Total Forms\" />\r\n              <Bar dataKey=\"thisMonth\" fill=\"#10b981\" name=\"This Month\" />\r\n            </BarChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n\r\n        {/* Release Decision Pie Chart (ICS 212) */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\r\n            ICS 212 Release Decisions\r\n          </h3>\r\n          <ResponsiveContainer width=\"100%\" height={300}>\r\n            <PieChart>\r\n              <Pie\r\n                data={pieData}\r\n                cx=\"50%\"\r\n                cy=\"50%\"\r\n                labelLine={false}\r\n                label={({ name, value }) => `${name}: ${value}%`}\r\n                outerRadius={100}\r\n                fill=\"#8884d8\"\r\n                dataKey=\"value\"\r\n              >\r\n                {pieData.map((entry, index) => (\r\n                  <Cell key={`cell-${index}`} fill={entry.color} />\r\n                ))}\r\n              </Pie>\r\n              <Tooltip />\r\n            </PieChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n\r\n        {/* ICS 212 Forms Per Day Line Chart */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\r\n            ICS 212 Forms Per Day (Last 30 Days)\r\n          </h3>\r\n          <ResponsiveContainer width=\"100%\" height={300}>\r\n            <LineChart data={ics212Analytics.formsPerDay}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#374151\" />\r\n              <XAxis \r\n                dataKey=\"date\" \r\n                stroke=\"#9ca3af\"\r\n                tick={{ fontSize: 12 }}\r\n              />\r\n              <YAxis stroke=\"#9ca3af\" />\r\n              <Tooltip \r\n                contentStyle={{ backgroundColor: '#1f2937', border: 'none', borderRadius: '8px' }}\r\n                labelStyle={{ color: '#fff' }}\r\n              />\r\n              <Line \r\n                type=\"monotone\" \r\n                dataKey=\"count\" \r\n                stroke=\"#3b82f6\" \r\n                strokeWidth={2}\r\n                dot={{ fill: '#3b82f6', r: 4 }}\r\n              />\r\n            </LineChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n\r\n        {/* ICS 218 Vehicle Categories */}\r\n        {ics218Analytics && ics218Analytics.formsByCategory.length > 0 && (\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\r\n              ICS 218 Vehicle Categories\r\n            </h3>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <BarChart data={ics218Analytics.formsByCategory} layout=\"horizontal\">\r\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#374151\" />\r\n                <XAxis type=\"number\" stroke=\"#9ca3af\" />\r\n                <YAxis \r\n                  type=\"category\" \r\n                  dataKey=\"category\" \r\n                  stroke=\"#9ca3af\"\r\n                  width={100}\r\n                  tick={{ fontSize: 11 }}\r\n                />\r\n                <Tooltip \r\n                  contentStyle={{ backgroundColor: '#1f2937', border: 'none', borderRadius: '8px' }}\r\n                  labelStyle={{ color: '#fff' }}\r\n                />\r\n                <Bar dataKey=\"count\" fill=\"#f97316\" />\r\n              </BarChart>\r\n            </ResponsiveContainer>\r\n          </div>\r\n        )}\r\n\r\n        {/* Top Vehicles by Inspection Count (ICS 212) */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\r\n            Top 10 Vehicles by ICS 212 Inspections\r\n          </h3>\r\n          <ResponsiveContainer width=\"100%\" height={300}>\r\n            <BarChart data={ics212Analytics.topVehicles.slice(0, 10)}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#374151\" />\r\n              <XAxis \r\n                dataKey=\"vehicleId\" \r\n                stroke=\"#9ca3af\"\r\n                angle={-45}\r\n                textAnchor=\"end\"\r\n                height={80}\r\n                tick={{ fontSize: 10 }}\r\n              />\r\n              <YAxis stroke=\"#9ca3af\" />\r\n              <Tooltip \r\n                contentStyle={{ backgroundColor: '#1f2937', border: 'none', borderRadius: '8px' }}\r\n                labelStyle={{ color: '#fff' }}\r\n              />\r\n              <Bar dataKey=\"count\" fill=\"#3b82f6\" />\r\n            </BarChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n\r\n        {/* Safety Item Failures */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\r\n            Top Safety Item Failures (ICS 212)\r\n          </h3>\r\n          <ResponsiveContainer width=\"100%\" height={300}>\r\n            <BarChart data={ics212Analytics.safetyItemFailures.slice(0, 8)} layout=\"vertical\">\r\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#374151\" />\r\n              <XAxis type=\"number\" stroke=\"#9ca3af\" />\r\n              <YAxis \r\n                type=\"category\" \r\n                dataKey=\"item\" \r\n                stroke=\"#9ca3af\"\r\n                width={150}\r\n                tick={{ fontSize: 10 }}\r\n              />\r\n              <Tooltip \r\n                contentStyle={{ backgroundColor: '#1f2937', border: 'none', borderRadius: '8px' }}\r\n                labelStyle={{ color: '#fff' }}\r\n              />\r\n              <Bar dataKey=\"count\" fill=\"#ef4444\" />\r\n            </BarChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Vehicle Management Component\r\n * \r\n * Manages vehicle database from Airtable\r\n * Features:\r\n * - List all vehicles\r\n * - View inspection history\r\n * - Quick links to inspect vehicle\r\n * - Mobile-responsive card layout\r\n */\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { API_BASE_URL } from '../../lib/config';\r\nimport { TouchFeedback } from '../mobile/TouchFeedback';\r\nimport { SkeletonLoader } from '../mobile/SkeletonLoader';\r\nimport { showToast } from '../mobile/Toast';\r\n\r\ninterface Vehicle {\r\n  id: string;\r\n  regUnit: string;\r\n  vehicleMake?: string;\r\n  vehicleModel?: string;\r\n  vehicleType?: string;\r\n  features?: string;\r\n  agency?: string;\r\n  licenseNumber?: string;\r\n  vehicleId?: string;\r\n  incidentId?: string;\r\n  vehicleStatus?: string;\r\n  lastInspectionDate?: string;\r\n  nextInspectionDue?: string;\r\n  inspectionFrequencyDays?: number;\r\n  notes?: string;\r\n}\r\n\r\nexport function VehicleManagement() {\r\n  const [vehicles, setVehicles] = useState<Vehicle[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchVehicles();\r\n  }, []);\r\n\r\n  const fetchVehicles = async () => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/vehicles`);\r\n      if (!response.ok) throw new Error('Failed to fetch vehicles');\r\n      const data = await response.json();\r\n      setVehicles(data.vehicles || []);\r\n    } catch (error) {\r\n      console.error('Error fetching vehicles:', error);\r\n      showToast({ message: 'Failed to load vehicles', type: 'error' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const filteredVehicles = vehicles.filter(vehicle => {\r\n    const searchLower = searchTerm.toLowerCase();\r\n    return (\r\n      vehicle.regUnit?.toLowerCase().includes(searchLower) ||\r\n      vehicle.vehicleMake?.toLowerCase().includes(searchLower) ||\r\n      vehicle.vehicleModel?.toLowerCase().includes(searchLower) ||\r\n      vehicle.licenseNumber?.toLowerCase().includes(searchLower)\r\n    );\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        {Array.from({ length: 5 }).map((_, i) => (\r\n          <SkeletonLoader key={i} type=\"card\" />\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Search Bar */}\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4\">\r\n        <input\r\n          type=\"search\"\r\n          placeholder=\"Search vehicles by name, make, model, or license plate...\"\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n          className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\r\n        />\r\n      </div>\r\n\r\n      {/* Results Count */}\r\n      <div className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n        Showing {filteredVehicles.length} vehicle{filteredVehicles.length !== 1 ? 's' : ''}\r\n      </div>\r\n\r\n      {/* Vehicles Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n        {filteredVehicles.length === 0 ? (\r\n          <div className=\"col-span-full bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center\">\r\n            <svg className=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\r\n            </svg>\r\n            <h3 className=\"mt-2 text-sm font-medium text-gray-900 dark:text-white\">No vehicles found</h3>\r\n            <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\r\n              Try a different search term\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          filteredVehicles.map((vehicle) => (\r\n            <TouchFeedback key={vehicle.id}>\r\n              <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow cursor-pointer\">\r\n                {/* Vehicle Icon & Name */}\r\n                <div className=\"flex items-start gap-3 mb-4\">\r\n                  <div className=\"text-4xl\">\r\n                    {vehicle.vehicleType?.toLowerCase().includes('truck') ? 'üöõ' : 'üöó'}\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white truncate\">\r\n                      {vehicle.regUnit}\r\n                    </h3>\r\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                      {vehicle.vehicleMake} {vehicle.vehicleModel}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Vehicle Details */}\r\n                <div className=\"space-y-2 text-sm\">\r\n                  {vehicle.licenseNumber && (\r\n                    <div className=\"flex items-center gap-2 text-gray-700 dark:text-gray-300\">\r\n                      <span className=\"font-medium\">License:</span>\r\n                      <span>{vehicle.licenseNumber}</span>\r\n                    </div>\r\n                  )}\r\n                  {vehicle.vehicleType && (\r\n                    <div className=\"flex items-center gap-2 text-gray-700 dark:text-gray-300\">\r\n                      <span className=\"font-medium\">Type:</span>\r\n                      <span>{vehicle.vehicleType}</span>\r\n                    </div>\r\n                  )}\r\n                  {vehicle.vehicleStatus && (\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <span className=\"font-medium text-gray-700 dark:text-gray-300\">Status:</span>\r\n                      <span className={`px-2 py-0.5 rounded-full text-xs font-medium ${\r\n                        vehicle.vehicleStatus === 'Active'\r\n                          ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\r\n                          : 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300'\r\n                      }`}>\r\n                        {vehicle.vehicleStatus}\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Notes */}\r\n                {vehicle.notes && (\r\n                  <div className=\"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700\">\r\n                    <p className=\"text-xs text-gray-600 dark:text-gray-400 line-clamp-2\">\r\n                      {vehicle.notes}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Quick Action */}\r\n                <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700\">\r\n                  <TouchFeedback>\r\n                    <a\r\n                      href={`/?vehicle=${encodeURIComponent(vehicle.regUnit)}`}\r\n                      className=\"block w-full py-2 px-4 bg-blue-600 text-white rounded-lg text-center text-sm font-medium hover:bg-blue-700 transition-colors\"\r\n                    >\r\n                      üìã New Inspection\r\n                    </a>\r\n                  </TouchFeedback>\r\n                </div>\r\n              </div>\r\n            </TouchFeedback>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * ICS-212 Admin Dashboard\r\n * \r\n * Main dashboard component for managing ICS-212 Vehicle Safety Inspection forms\r\n * Features:\r\n * - Mobile-first responsive design (320px+)\r\n * - Tab navigation (Forms, Analytics, Vehicles)\r\n * - Real-time search and filtering\r\n * - PDF preview and download\r\n * - Email distribution\r\n * - Dark mode support\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport { FormsList } from './FormsList';\r\nimport { AnalyticsDashboard } from './AnalyticsDashboard';\r\nimport { VehicleManagement } from './VehicleManagement';\r\nimport { TouchFeedback } from '../mobile/TouchFeedback';\r\n\r\ntype TabView = 'list' | 'analytics' | 'vehicles';\r\n\r\nexport function ICS212AdminDashboard() {\r\n  const [currentView, setCurrentView] = useState<TabView>('list');\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\r\n      {/* Mobile Header */}\r\n      <header className=\"sticky top-0 z-50 bg-white dark:bg-gray-800 shadow-md\">\r\n        <div className=\"px-4 py-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <svg className=\"w-8 h-8 text-blue-600 dark:text-blue-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n            </svg>\r\n            <div className=\"flex-1\">\r\n              <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\r\n                ICS-212 Admin\r\n              </h1>\r\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                Vehicle Safety Inspections\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Tab Navigation */}\r\n        <nav className=\"flex border-t border-gray-200 dark:border-gray-700\">\r\n          <TouchFeedback>\r\n            <button\r\n              onClick={() => setCurrentView('list')}\r\n              className={`flex-1 px-4 py-3 text-sm font-medium transition-colors ${\r\n                currentView === 'list'\r\n                  ? 'border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20'\r\n                  : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50'\r\n              }`}\r\n            >\r\n              <div className=\"flex items-center justify-center gap-2\">\r\n                <span>üìã</span>\r\n                <span className=\"hidden sm:inline\">Forms</span>\r\n              </div>\r\n            </button>\r\n          </TouchFeedback>\r\n          \r\n          <TouchFeedback>\r\n            <button\r\n              onClick={() => setCurrentView('analytics')}\r\n              className={`flex-1 px-4 py-3 text-sm font-medium transition-colors ${\r\n                currentView === 'analytics'\r\n                  ? 'border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20'\r\n                  : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50'\r\n              }`}\r\n            >\r\n              <div className=\"flex items-center justify-center gap-2\">\r\n                <span>üìä</span>\r\n                <span className=\"hidden sm:inline\">Analytics</span>\r\n              </div>\r\n            </button>\r\n          </TouchFeedback>\r\n          \r\n          <TouchFeedback>\r\n            <button\r\n              onClick={() => setCurrentView('vehicles')}\r\n              className={`flex-1 px-4 py-3 text-sm font-medium transition-colors ${\r\n                currentView === 'vehicles'\r\n                  ? 'border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20'\r\n                  : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50'\r\n              }`}\r\n            >\r\n              <div className=\"flex items-center justify-center gap-2\">\r\n                <span>üöó</span>\r\n                <span className=\"hidden sm:inline\">Vehicles</span>\r\n              </div>\r\n            </button>\r\n          </TouchFeedback>\r\n        </nav>\r\n      </header>\r\n      \r\n      {/* Content Area with padding for mobile */}\r\n      <main className=\"p-4 pb-20 md:p-6 lg:p-8\">\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          {currentView === 'list' && <FormsList />}\r\n          {currentView === 'analytics' && <AnalyticsDashboard />}\r\n          {currentView === 'vehicles' && <VehicleManagement />}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["SwipeableListItem","children","leftAction","rightAction","threshold","className","x","useMotionValue","backgroundColor","useTransform","handleDragEnd","_","info","offset","jsxs","motion","jsx","PullToRefresh","onRefresh","isRefreshing","setIsRefreshing","useState","y","containerRef","useRef","opacity","rotate","handleDrag","container","BottomSheet","isOpen","onClose","title","showHandle","Dialog.Root","open","AnimatePresence","Dialog.Portal","Dialog.Overlay","Dialog.Content","Dialog.Title","WORKER_URL","API_BASE_URL","API_ENDPOINTS","id","FormDetail","formId","loading","setLoading","form","setForm","useEffect","fetchFormDetail","response","data","error","showToast","handleDownloadPDF","TouchFeedback","ICS218Detail","setError","fetchFormDetails","err","handleViewGitHub","SkeletonLoader","vehicle","FormsList","forms","setForms","page","setPage","totalPages","setTotalPages","searchTerm","setSearchTerm","formTypeFilter","setFormTypeFilter","statusFilter","setStatusFilter","dateFrom","setDateFrom","dateTo","setDateTo","selectedFormId","setSelectedFormId","selectedFormType","setSelectedFormType","fetchForms","useCallback","pageNum","append","promises","params","r","f","allForms","a","b","prev","handleRefresh","handleLoadMore","handleViewForm","formType","getFormTypeBadge","getStatusBadge","status","e","i","Fragment","Toast","AnalyticsDashboard","ics212Analytics","setIcs212Analytics","ics218Analytics","setIcs218Analytics","fetchAnalytics","interval","ics212Response","ics212Data","ics218Response","now","thisMonth","thisYear","formsThisMonth","formDate","totalVehicles","sum","categoryCount","category","formsByCategory","count","pieData","formTypeData","ResponsiveContainer","BarChart","CartesianGrid","XAxis","YAxis","Tooltip","Legend","Bar","PieChart","Pie","name","value","entry","index","Cell","LineChart","Line","VehicleManagement","vehicles","setVehicles","fetchVehicles","filteredVehicles","searchLower","ICS212AdminDashboard","currentView","setCurrentView"],"mappings":"iaAkBO,MAAMA,GAAsD,CAAC,CAClE,SAAAC,EACA,WAAAC,EACA,YAAAC,EACA,UAAAC,EAAY,GACZ,UAAAC,EAAY,EACd,IAAM,CACJ,MAAMC,EAAIC,EAAe,CAAC,EACpBC,EAAkBC,EACtBH,EACA,CAAC,CAACF,EAAW,EAAGA,CAAS,EACzB,CACED,GAAa,OAAS,UACtB,UACAD,GAAY,OAAS,SAAA,CACvB,EAGIQ,EAAgB,CAACC,EAAQC,IAAkB,CAC/C,MAAMC,EAASD,EAAK,OAAO,EAEvBC,EAAST,GAAaF,GACxBA,EAAW,UAAA,EACXI,EAAE,IAAI,CAAC,IACEO,EAAS,CAACT,GAAaD,GAChCA,EAAY,UAAA,EACZG,EAAE,IAAI,CAAC,EAIX,EAEA,OACEQ,EAAAA,KAAC,MAAA,CAAI,UAAW,4BAA4BT,CAAS,GAEnD,SAAA,CAAAS,EAAAA,KAAC,MAAA,CAAI,UAAU,0DACZ,SAAA,CAAAZ,GACCY,EAAAA,KAACC,EAAO,IAAP,CACC,UAAU,mDACV,MAAO,CAAE,QAASN,EAAaH,EAAG,CAAC,EAAGF,CAAS,EAAG,CAAC,EAAG,CAAC,CAAC,CAAA,EAEvD,SAAA,CAAAF,EAAW,MAAQc,MAAC,OAAA,CAAM,SAAAd,EAAW,KAAK,EAC3Cc,EAAAA,IAAC,OAAA,CAAM,SAAAd,EAAW,KAAA,CAAM,CAAA,CAAA,CAAA,EAG3BC,GACCW,EAAAA,KAACC,EAAO,IAAP,CACC,UAAU,2DACV,MAAO,CAAE,QAASN,EAAaH,EAAG,CAAC,CAACF,EAAW,CAAC,EAAG,CAAC,EAAG,CAAC,CAAC,CAAA,EAEzD,SAAA,CAAAY,EAAAA,IAAC,OAAA,CAAM,WAAY,KAAA,CAAM,EACxBb,EAAY,MAAQa,MAAC,OAAA,CAAM,WAAY,IAAA,CAAK,CAAA,CAAA,CAAA,CAC/C,EAEJ,EAGAA,EAAAA,IAACD,EAAO,IAAP,CACC,KAAK,IACL,gBAAiB,CAAE,KAAMZ,EAAc,CAACC,EAAY,IAAM,EAAG,MAAOF,EAAaE,EAAY,IAAM,CAAA,EACnG,YAAa,GACb,UAAWM,EACX,MAAO,CACL,EAAAJ,EACA,gBAAAE,CAAA,EAEF,UAAU,sDAET,SAAAP,CAAA,CAAA,CACH,EACF,CAEJ,EChFagB,GAA8C,CAAC,CAC1D,SAAAhB,EACA,UAAAiB,EACA,UAAAd,EAAY,GACZ,UAAAC,EAAY,EACd,IAAM,CACJ,KAAM,CAACc,EAAcC,CAAe,EAAIC,EAAAA,SAAS,EAAK,EAChDC,EAAIf,EAAe,CAAC,EACpBgB,EAAeC,EAAAA,OAAuB,IAAI,EAE1CC,EAAUhB,EAAaa,EAAG,CAAC,EAAGlB,CAAS,EAAG,CAAC,EAAG,CAAC,CAAC,EAChDsB,EAASjB,EAAaa,EAAG,CAAC,EAAGlB,CAAS,EAAG,CAAC,EAAG,GAAG,CAAC,EAEjDM,EAAgB,MAAOC,EAAQC,IAAkB,CAGrD,GAFeA,EAAK,OAAO,EAEdR,GAAa,CAACe,EAAc,CACvCC,EAAgB,EAAI,EACpB,GAAI,CACF,MAAMF,EAAA,CACR,QAAA,CACEE,EAAgB,EAAK,EACrBE,EAAE,IAAI,CAAC,CACT,CACF,MACEA,EAAE,IAAI,CAAC,CAEX,EAEMK,EAAa,CAAChB,EAAQC,IAAkB,CAE5C,MAAMgB,EAAYL,EAAa,QAC3BK,GAAaA,EAAU,YAAc,GAAKhB,EAAK,OAAO,EAAI,GAC5DU,EAAE,IAAI,KAAK,IAAIV,EAAK,OAAO,EAAGR,EAAY,GAAG,CAAC,CAElD,EAEA,cACG,MAAA,CAAI,IAAKmB,EAAc,UAAW,0BAA0BlB,CAAS,GAEpE,SAAA,CAAAW,EAAAA,IAACD,EAAO,IAAP,CACC,UAAU,2EACV,MAAO,CACL,QAAAU,EACA,OAAQhB,EAAaa,EAAG,CAAC,EAAGlB,CAAS,EAAG,CAAC,EAAG,EAAE,CAAC,CAAA,EAGjD,SAAAY,EAAAA,IAACD,EAAO,IAAP,CACC,UAAU,qEACV,MAAO,CACL,OAAQI,EAAe,OAAYO,CAAA,EAErC,QAASP,EAAe,CAAE,OAAQ,GAAA,EAAQ,CAAA,EAC1C,WAAY,CACV,OAAQA,EAAe,IAAW,EAClC,SAAU,EACV,KAAM,QAAA,CACR,CAAA,CACF,CAAA,EAIFH,EAAAA,IAACD,EAAO,IAAP,CACC,KAAK,IACL,gBAAiB,CAAE,IAAK,EAAG,OAAQ,CAAA,EACnC,YAAa,GACb,OAAQY,EACR,UAAWjB,EACX,MAAO,CAAE,EAAAY,CAAA,EACT,UAAU,cAET,SAAArB,CAAA,CAAA,CACH,EACF,CAEJ,ECtEa4B,GAA0C,CAAC,CACtD,OAAAC,EACA,QAAAC,EACA,MAAAC,EACA,SAAA/B,EACA,WAAAgC,EAAa,GACb,UAAA5B,EAAY,EACd,IAEIW,EAAAA,IAACkB,EAAA,CAAY,KAAMJ,EAAQ,aAAeK,GAAS,CAACA,GAAQJ,EAAA,EAC1D,eAACK,GAAA,CACE,SAAAN,UACEO,GAAA,CAAc,WAAU,GAEvB,SAAA,CAAArB,EAAAA,IAACsB,GAAA,CAAe,QAAO,GACrB,SAAAtB,EAAAA,IAACD,EAAO,IAAP,CACC,UAAU,kDACV,QAAS,CAAE,QAAS,CAAA,EACpB,QAAS,CAAE,QAAS,CAAA,EACpB,KAAM,CAAE,QAAS,CAAA,EACjB,WAAY,CAAE,SAAU,EAAA,CAAI,CAAA,EAEhC,EAGAC,EAAAA,IAACuB,GAAA,CAAe,QAAO,GACrB,SAAAzB,EAAAA,KAACC,EAAO,IAAP,CACC,UAAW;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKPV,CAAS;AAAA,kBAEb,QAAS,CAAE,EAAG,MAAA,EACd,QAAS,CAAE,EAAG,CAAA,EACd,KAAM,CAAE,EAAG,MAAA,EACX,WAAY,CACV,KAAM,SACN,UAAW,IACX,QAAS,EAAA,EAEX,KAAK,IACL,gBAAiB,CAAE,IAAK,EAAG,OAAQ,CAAA,EACnC,YAAa,GACb,UAAW,CAACM,EAAGC,IAAS,CAClBA,EAAK,OAAO,EAAI,KAClBmB,EAAA,CAEJ,EAGC,SAAA,CAAAE,GACCjB,EAAAA,IAAC,OAAI,UAAU,gCACb,eAAC,MAAA,CAAI,UAAU,uDAAuD,CAAA,CACxE,EAIDgB,GACChB,EAAAA,IAAC,MAAA,CAAI,UAAU,0DACb,SAAAA,EAAAA,IAACwB,GAAA,CAAa,UAAU,kDACrB,SAAAR,CAAA,CACH,CAAA,CACF,EAIFhB,EAAAA,IAAC,MAAA,CAAI,UAAU,8CACZ,SAAAf,CAAA,CACH,CAAA,CAAA,CAAA,CACF,CACF,CAAA,CAAA,CACF,EAEJ,EACF,ECtFSwC,GAAa,4CAKbC,EAAe,GAAGD,EAAU,OAK5BE,EAAgB,CAE3B,YAAa,GAAGD,CAAY,gBAC5B,SAAWE,GAAe,GAAGF,CAAY,iBAAiBE,CAAE,GAC5D,UAAW,GAAGF,CAAY,oBAC1B,WAAY,GAAGA,CAAY,iBAC3B,UAAYE,GAAe,GAAGF,CAAY,iBAAiBE,CAAE,SAG7D,YAAa,GAAGF,CAAY,gBAC5B,eAAiBE,GAAe,GAAGF,CAAY,iBAAiBE,CAAE,GAClE,aAAc,GAAGF,CAAY,iBAC7B,uBAAwB,GAAGA,CAAY,4BACvC,kBAAoBE,GAAe,GAAGF,CAAY,eAAeE,CAAE,GAGnE,SAAU,GAAGF,CAAY,YACzB,oBAAqB,GAAGA,CAAY,yBACpC,YAAcE,GAAe,GAAGF,CAAY,aAAaE,CAAE,GAG3D,UAAW,GAAGF,CAAY,aAC1B,aAAc,GAAGA,CAAY,SAG7B,OAAQ,GAAGA,CAAY,SACzB,ECpBO,SAASG,GAAW,CAAE,OAAAC,GAA2B,CACtD,KAAM,CAACC,EAASC,CAAU,EAAI3B,EAAAA,SAAS,EAAI,EACrC,CAAC4B,EAAMC,CAAO,EAAI7B,EAAAA,SAAc,IAAI,EAE1C8B,EAAAA,UAAU,IAAM,CACdC,EAAA,CACF,EAAG,CAACN,CAAM,CAAC,EAEX,MAAMM,EAAkB,SAAY,CAClC,GAAI,CACF,MAAMC,EAAW,MAAM,MAAM,GAAGX,CAAY,iBAAiBI,CAAM,EAAE,EACrE,GAAI,CAACO,EAAS,GAAI,MAAM,IAAI,MAAM,sBAAsB,EACxD,MAAMC,EAAO,MAAMD,EAAS,KAAA,EAC5BH,EAAQI,EAAK,IAAI,CACnB,OAASC,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,EAClDC,EAAU,CAAE,QAAS,8BAA+B,KAAM,QAAS,CACrE,QAAA,CACER,EAAW,EAAK,CAClB,CACF,EAEMS,EAAoB,IAAM,CAC1BR,GAAM,SACR,OAAO,KAAKA,EAAK,QAAS,QAAQ,CAEtC,EAEA,OAAIF,QAEC,MAAA,CAAI,UAAU,gBACb,SAAAjC,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAE,EAAAA,IAAC,MAAA,CAAI,UAAU,gDAAA,CAAiD,EAChEA,EAAAA,IAAC,MAAA,CAAI,UAAU,2CAAA,CAA4C,CAAA,CAAA,CAC7D,CAAA,CACF,EAICiC,EASHnC,EAAAA,KAAC,MAAA,CAAI,UAAU,yCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,2FACb,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,kDACX,SAAAiC,EAAK,cACR,EACAjC,EAAAA,IAAC,IAAA,CAAE,UAAU,2CAA4C,WAAK,cAAc,QAC3E,MAAA,CAAI,UAAU,OACb,SAAAA,EAAAA,IAAC,OAAA,CAAK,UAAW,uEACfiC,EAAK,mBAAqB,OACtB,4DACA,mEACN,GACG,SAAAA,EAAK,mBAAqB,OAAS,UAAY,cAClD,CAAA,CACF,CAAA,EACF,EAGCA,EAAK,SACJnC,OAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAE,EAAAA,IAAC,MAAA,CAAI,UAAU,sGACb,SAAAA,EAAAA,IAAC,SAAA,CACC,IAAKiC,EAAK,QACV,UAAU,SACV,MAAO,CAAE,OAAQ,OAAA,EACjB,MAAM,aAAA,CAAA,EAEV,QACCS,EAAA,CACC,SAAA1C,EAAAA,IAAC,SAAA,CACC,QAASyC,EACT,UAAU,qGACX,SAAA,iBAAA,CAAA,CAED,CACF,CAAA,EACF,EAIF3C,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,8CAA8C,SAAA,qBAAkB,EAE9EF,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAE,EAAAA,IAAC,OAAA,CAAK,UAAU,+CAA+C,SAAA,aAAU,EACzEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,WAAK,oBAAA,CAAqB,CAAA,EAC1E,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,+CAA+C,SAAA,QAAK,EACpEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,WAAK,cAAA,CAAe,CAAA,EACpE,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,+CAA+C,SAAA,QAAK,EACpEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,WAAK,cAAA,CAAe,CAAA,EACpE,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,+CAA+C,SAAA,gBAAa,EAC5EA,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,WAAK,YAAA,CAAa,CAAA,EAClE,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,+CAA+C,SAAA,WAAQ,EACvEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,WAAK,kBAAA,CAAmB,CAAA,EACxE,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,+CAA+C,SAAA,eAAY,EAC3EA,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,WAAK,eAAA,CAAgB,CAAA,CAAA,CACrE,CAAA,EACF,EAECiC,EAAK,qBACJnC,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAE,EAAAA,IAAC,OAAA,CAAK,UAAU,+CAA+C,SAAA,YAAS,EACxEA,EAAAA,IAAC,IAAA,CAAE,UAAU,qFACV,WAAK,mBAAA,CACR,CAAA,EACF,EAGDiC,EAAK,qBACJjC,EAAAA,IAAC0C,EAAA,CACC,SAAA5C,EAAAA,KAAC,IAAA,CACC,KAAM,4DAA4DmC,EAAK,mBAAmB,GAC1F,OAAO,SACP,IAAI,sBACJ,UAAU,qLACX,SAAA,CAAA,sBACqBA,EAAK,oBAAoB,IAAA,CAAA,CAAA,CAC/C,CACF,CAAA,CAAA,CAEJ,CAAA,EACF,EApGEjC,EAAAA,IAAC,OAAI,UAAU,kBACb,eAAC,IAAA,CAAE,UAAU,eAAe,SAAA,gBAAA,CAAc,CAAA,CAC5C,CAoGN,CCjHO,SAAS2C,GAAa,CAAE,OAAAb,GAAiB,CAC9C,KAAM,CAACG,EAAMC,CAAO,EAAI7B,EAAAA,SAAgC,IAAI,EACtD,CAAC0B,EAASC,CAAU,EAAI3B,EAAAA,SAAS,EAAI,EACrC,CAACkC,EAAOK,CAAQ,EAAIvC,EAAAA,SAAwB,IAAI,EAEtD8B,EAAAA,UAAU,IAAM,CACdU,EAAA,CACF,EAAG,CAACf,CAAM,CAAC,EAEX,MAAMe,EAAmB,SAAY,CACnCb,EAAW,EAAI,EACfY,EAAS,IAAI,EAEb,GAAI,CACF,MAAMP,EAAW,MAAM,MAAMV,EAAc,eAAeG,CAAM,CAAC,EAEjE,GAAI,CAACO,EAAS,GACZ,MAAM,IAAI,MAAM,8BAA8B,EAGhD,MAAMC,EAAO,MAAMD,EAAS,KAAA,EAC5BH,EAAQI,EAAK,IAAI,CACnB,OAASQ,EAAK,CACZ,QAAQ,MAAM,uCAAwCA,CAAG,EACzDF,EAASE,aAAe,MAAQA,EAAI,QAAU,eAAe,CAC/D,QAAA,CACEd,EAAW,EAAK,CAClB,CACF,EAEMS,EAAoB,IAAM,CAC1BR,GAAM,SACR,OAAO,KAAKA,EAAK,QAAS,QAAQ,CAEtC,EAEMc,EAAmB,IAAM,CACzBd,GAAM,kBACR,OAAO,KAAKA,EAAK,iBAAkB,QAAQ,CAE/C,EAEA,OAAIF,EAEAjC,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAE,EAAAA,IAACgD,EAAA,CAAe,KAAK,MAAA,CAAO,EAC5BhD,EAAAA,IAACgD,EAAA,CAAe,KAAK,MAAA,CAAO,EAC5BhD,EAAAA,IAACgD,EAAA,CAAe,KAAK,MAAA,CAAO,CAAA,EAC9B,EAIAT,GAAS,CAACN,EAEVjC,EAAAA,IAAC,MAAA,CAAI,UAAU,MACb,eAAC,MAAA,CAAI,UAAU,wFACb,SAAAA,MAAC,KAAE,UAAU,iCACV,SAAAuC,GAAS,gBAAA,CACZ,EACF,EACF,EAKFzC,EAAAA,KAAC,MAAA,CAAI,UAAU,6CAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,kDAAkD,SAAA,0CAEhE,EACAA,EAAAA,IAAC,OAAA,CAAK,UAAU,4IAA4I,SAAA,SAAA,CAE5J,CAAA,EACF,EAGAF,EAAAA,KAAC,MAAA,CAAI,UAAU,gDACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAE,EAAAA,IAAC,QAAA,CAAM,UAAU,iDAAiD,SAAA,iBAAc,EAChFA,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,WAAK,aAAA,CAAc,CAAA,EACnE,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAU,iDAAiD,SAAA,mBAAgB,QACjF,IAAA,CAAE,UAAU,gCAAiC,SAAAiC,EAAK,iBAAmB,KAAA,CAAM,CAAA,EAC9E,SACC,MAAA,CACC,SAAA,CAAAjC,EAAAA,IAAC,QAAA,CAAM,UAAU,iDAAiD,SAAA,iBAAc,EAChFA,EAAAA,IAAC,IAAA,CAAE,UAAU,gCACV,SAAA,IAAI,KAAKiC,EAAK,aAAa,EAAE,mBAAA,CAAmB,CACnD,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAjC,EAAAA,IAAC,QAAA,CAAM,UAAU,iDAAiD,SAAA,iBAAc,EAChFA,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,WAAK,aAAA,CAAc,CAAA,EACnE,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAU,iDAAiD,SAAA,oBAAiB,EACnFA,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,WAAK,gBAAA,CAAiB,CAAA,CAAA,CACtE,CAAA,CAAA,CACF,CAAA,EACF,EAGAF,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,2DAA2D,SAAA,CAAA,aAC5DmC,EAAK,SAAS,OAAO,GAAA,EAClC,QAEC,MAAA,CAAI,UAAU,kBACb,SAAAnC,EAAAA,KAAC,QAAA,CAAM,UAAU,qBACf,SAAA,CAAAE,MAAC,QAAA,CAAM,UAAU,8BACf,SAAAF,EAAAA,KAAC,KAAA,CACC,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,qEAAqE,SAAA,iBAAc,EACjGA,EAAAA,IAAC,KAAA,CAAG,UAAU,qEAAqE,SAAA,YAAS,EAC5FA,EAAAA,IAAC,KAAA,CAAG,UAAU,qEAAqE,SAAA,aAAU,EAC7FA,EAAAA,IAAC,KAAA,CAAG,UAAU,qEAAqE,SAAA,SAAM,EACzFA,EAAAA,IAAC,KAAA,CAAG,UAAU,qEAAqE,SAAA,WAAQ,EAC3FA,EAAAA,IAAC,KAAA,CAAG,UAAU,qEAAqE,SAAA,YAAA,CAAU,CAAA,CAAA,CAC/F,CAAA,CACF,EACAA,EAAAA,IAAC,QAAA,CAAM,UAAU,gDACd,SAAAiC,EAAK,SAAS,IAAKgB,GAClBnD,EAAAA,KAAC,KAAA,CAAoB,UAAU,0CAC7B,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,0CAA2C,SAAAiD,EAAQ,eAAe,EAChFnD,EAAAA,KAAC,KAAA,CAAG,UAAU,0CACX,SAAA,CAAAmD,EAAQ,KAAK,IAAEA,EAAQ,kBAAA,EAC1B,EACAjD,EAAAA,IAAC,KAAA,CAAG,UAAU,0CAA2C,WAAQ,mBAAmB,EACpFA,EAAAA,IAAC,KAAA,CAAG,UAAU,0CAA2C,WAAQ,aAAa,EAC9EA,EAAAA,IAAC,KAAA,CAAG,UAAU,0CAA2C,WAAQ,sBAAsB,EACvFA,EAAAA,IAAC,KAAA,CAAG,UAAU,0CAA2C,WAAQ,mBAAA,CAAoB,CAAA,GAR9EiD,EAAQ,EASjB,CACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGAnD,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,2DAA2D,SAAA,cAEzE,EAEAF,EAAAA,KAAC,MAAA,CAAI,UAAU,gDACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAE,EAAAA,IAAC,QAAA,CAAM,UAAU,iDAAiD,SAAA,QAAK,EACvEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,WAAK,gBAAA,CAAiB,CAAA,EACtE,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAU,iDAAiD,SAAA,kBAAe,EACjFA,EAAAA,IAAC,IAAA,CAAE,UAAU,gCAAiC,WAAK,oBAAA,CAAqB,CAAA,EAC1E,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAU,iDAAiD,SAAA,uBAAoB,EACtFA,EAAAA,IAAC,IAAA,CAAE,UAAU,gCACV,SAAA,IAAI,KAAKiC,EAAK,mBAAmB,EAAE,eAAA,CAAe,CACrD,CAAA,CAAA,CACF,CAAA,EACF,EAGCA,EAAK,gBACJnC,OAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAE,EAAAA,IAAC,QAAA,CAAM,UAAU,4DAA4D,SAAA,aAAU,EACvFA,EAAAA,IAAC,MAAA,CAAI,UAAU,oGACb,SAAAA,EAAAA,IAAC,MAAA,CACC,IAAKiC,EAAK,eACV,IAAI,YACJ,UAAU,eAAA,CAAA,CACZ,CACF,CAAA,CAAA,CACF,CAAA,EAEJ,EAGAnC,EAAAA,KAAC,MAAA,CAAI,UAAU,aACZ,SAAA,CAAAmC,EAAK,SACJnC,EAAAA,KAAC,SAAA,CACC,QAAS2C,EACT,UAAU,8IAEV,SAAA,CAAAzC,EAAAA,IAAC,OAAI,UAAU,UAAU,KAAK,OAAO,QAAQ,YAAY,OAAO,eAC9D,eAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,kIAAkI,CAAA,CACzM,EAAM,cAAA,CAAA,CAAA,EAKTiC,EAAK,kBACJnC,EAAAA,KAAC,SAAA,CACC,QAASiD,EACT,UAAU,8IAEV,SAAA,CAAA/C,EAAAA,IAAC,MAAA,CAAI,UAAU,UAAU,KAAK,eAAe,QAAQ,YACnD,SAAAA,EAAAA,IAAC,OAAA,CAAK,EAAE,2sBAAA,CAA2sB,EACrtB,EAAM,mBAAA,CAAA,CAAA,CAER,EAEJ,EAGAF,EAAAA,KAAC,MAAA,CAAI,UAAU,uDAAuD,SAAA,CAAA,YAC1DmC,EAAK,GAAG,iBAAe,IAAI,KAAKA,EAAK,UAAU,EAAE,eAAA,CAAe,CAAA,CAC5E,CAAA,EACF,CAEJ,CC1MO,SAASiB,IAAY,CAC1B,KAAM,CAACC,EAAOC,CAAQ,EAAI/C,EAAAA,SAAwB,CAAA,CAAE,EAC9C,CAAC0B,EAASC,CAAU,EAAI3B,EAAAA,SAAS,EAAI,EACrC,CAACgD,EAAMC,CAAO,EAAIjD,EAAAA,SAAS,CAAC,EAC5B,CAACkD,EAAYC,CAAa,EAAInD,EAAAA,SAAS,CAAC,EACxC,CAACoD,EAAYC,CAAa,EAAIrD,EAAAA,SAAS,EAAE,EACzC,CAACsD,EAAgBC,CAAiB,EAAIvD,EAAAA,SAAsC,KAAK,EACjF,CAACwD,EAAcC,CAAe,EAAIzD,EAAAA,SAAqC,KAAK,EAC5E,CAAC0D,EAAUC,CAAW,EAAI3D,EAAAA,SAAS,EAAE,EACrC,CAAC4D,EAAQC,CAAS,EAAI7D,EAAAA,SAAS,EAAE,EACjC,CAAC8D,EAAgBC,CAAiB,EAAI/D,EAAAA,SAAwB,IAAI,EAClE,CAACgE,EAAkBC,CAAmB,EAAIjE,EAAAA,SAAqC,IAAI,EAEnFkE,EAAaC,EAAAA,YAAY,MAAOC,EAAkB,EAAGC,EAAkB,KAAU,CAChFA,GAAQ1C,EAAW,EAAI,EAE5B,GAAI,CACF,MAAM2C,EAA2B,CAAA,EAGjC,GAAIhB,IAAmB,OAASA,IAAmB,SAAU,CAC3D,MAAMiB,EAAS,IAAI,gBAAgB,CACjC,KAAMH,EAAQ,SAAA,EACd,MAAO,KACP,OAAQ,OACR,UAAW,MAAA,CACZ,EAEGhB,GAAYmB,EAAO,IAAI,SAAUnB,CAAU,EAC3CI,IAAiB,OAAOe,EAAO,IAAI,SAAUf,CAAY,EACzDE,GAAUa,EAAO,IAAI,OAAQb,CAAQ,EACrCE,GAAQW,EAAO,IAAI,KAAMX,CAAM,EAEnCU,EAAS,KACP,MAAM,GAAGjD,CAAY,iBAAiBkD,CAAM,EAAE,EAC3C,KAAKC,GAAKA,EAAE,GAAKA,EAAE,KAAA,EAAS,CAAE,MAAO,CAAA,CAAC,CAAG,EACzC,KAAKvC,GAAQA,EAAK,MAAM,IAAKwC,IAAmB,CAAE,GAAGA,EAAG,SAAU,QAAA,EAAoB,CAAC,CAAA,CAE9F,CAGA,GAAInB,IAAmB,OAASA,IAAmB,SAAU,CAC3D,MAAMiB,EAAS,IAAI,gBAAgB,CACjC,MAAO,KACP,SAAUH,EAAU,GAAK,IAAI,SAAA,CAAS,CACvC,EAEGhB,GAAYmB,EAAO,IAAI,WAAYnB,CAAU,EAEjDkB,EAAS,KACP,MAAM,GAAGhD,EAAc,WAAW,IAAIiD,CAAM,EAAE,EAC3C,QAAUC,EAAE,GAAKA,EAAE,KAAA,EAAS,CAAE,MAAO,CAAA,CAAC,CAAG,EACzC,KAAKvC,GAAQA,EAAK,MAAM,IAAKwC,IAAY,CAAE,GAAGA,EAAG,SAAU,QAAA,EAAoB,CAAC,CAAA,CAEvF,CAGA,MAAMC,GADU,MAAM,QAAQ,IAAIJ,CAAQ,GACjB,KAAA,EAGzBI,EAAS,KAAK,CAACC,EAAGC,IAAM,IAAI,KAAKA,EAAE,UAAU,EAAE,QAAA,EAAY,IAAI,KAAKD,EAAE,UAAU,EAAE,SAAS,EAGzF5B,EADEsB,KACe,CAAC,GAAGQ,EAAM,GAAGH,CAAQ,EAE7BA,CAF8B,EAMzCvB,EAAcuB,EAAS,QAAU,GAAKN,EAAU,EAAIA,CAAO,EAC3DnB,EAAQmB,CAAO,CACjB,OAASlC,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,EAC5CC,EAAU,CAAE,QAAS,uBAAwB,KAAM,QAAS,CAC9D,QAAA,CACER,EAAW,EAAK,CAClB,CACF,EAAG,CAACyB,EAAYE,EAAgBE,EAAcE,EAAUE,CAAM,CAAC,EAE/D9B,EAAAA,UAAU,IAAM,CACdoC,EAAW,EAAG,EAAK,CACrB,EAAG,CAACd,EAAYE,EAAgBE,EAAcE,EAAUE,CAAM,CAAC,EAE/D,MAAMkB,EAAgB,SAAY,CAChC,MAAMZ,EAAW,EAAG,EAAK,CAC3B,EAEMa,EAAiB,IAAM,CACvB/B,EAAOE,GAAc,CAACxB,GACxBwC,EAAWlB,EAAO,EAAG,EAAI,CAE7B,EAEMZ,EAAoB,MAAOR,GAAsB,CACrD,GAAI,CAACA,EAAK,QAAS,CACjBO,EAAU,CAAE,QAAS,oBAAqB,KAAM,QAAS,EACzD,MACF,CACA,OAAO,KAAKP,EAAK,QAAS,QAAQ,CACpC,EAEMoD,EAAiB,CAACvD,EAAgBwD,IAAkC,CACxElB,EAAkBtC,CAAM,EACxBwC,EAAoBgB,CAAQ,CAC9B,EAEMC,EAAoBD,GACpBA,IAAa,SAEbtF,EAAAA,IAAC,OAAA,CAAK,UAAU,wIAAwI,SAAA,UAExJ,EAIFA,EAAAA,IAAC,OAAA,CAAK,UAAU,gJAAgJ,SAAA,UAEhK,EAIEwF,EAAkBC,GAClBA,IAAW,OAEXzF,EAAAA,IAAC,OAAA,CAAK,UAAU,oIAAoI,SAAA,UAEpJ,EAIFA,EAAAA,IAAC,OAAA,CAAK,UAAU,4IAA4I,SAAA,cAE5J,EAIJ,OACEF,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+DAEb,SAAA,CAAAE,MAAC,MAAA,CACC,SAAAA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,YAAY,kDACZ,MAAOyD,EACP,SAAWiC,GAAMhC,EAAcgC,EAAE,OAAO,KAAK,EAC7C,UAAU,2IAAA,CAAA,EAEd,SAGC,MAAA,CACC,SAAA,CAAA1F,EAAAA,IAAC,QAAA,CAAM,UAAU,kEAAkE,SAAA,YAEnF,EACAF,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAE,MAAC0C,EAAA,CACC,SAAA1C,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM4D,EAAkB,KAAK,EACtC,UAAW,gEACTD,IAAmB,MACf,2BACA,+DACN,GACD,SAAA,WAAA,CAAA,EAGH,QACCjB,EAAA,CACC,SAAA1C,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM4D,EAAkB,QAAQ,EACzC,UAAW,gEACTD,IAAmB,SACf,yBACA,+DACN,GACD,SAAA,SAAA,CAAA,EAGH,QACCjB,EAAA,CACC,SAAA1C,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM4D,EAAkB,QAAQ,EACzC,UAAW,gEACTD,IAAmB,SACf,2BACA,+DACN,GACD,SAAA,SAAA,CAAA,CAED,CACF,CAAA,CAAA,CACF,CAAA,EACF,GAGEA,IAAmB,OAASA,IAAmB,kBAC9C,MAAA,CACC,SAAA,CAAA3D,EAAAA,IAAC,QAAA,CAAM,UAAU,kEAAkE,SAAA,mBAEnF,EACAF,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAE,MAAC0C,EAAA,CACC,SAAA1C,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM8D,EAAgB,KAAK,EACpC,UAAW,gEACTD,IAAiB,MACb,yBACA,+DACN,GACD,SAAA,KAAA,CAAA,EAGH,QACCnB,EAAA,CACC,SAAA1C,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM8D,EAAgB,MAAM,EACrC,UAAW,gEACTD,IAAiB,OACb,wBACA,+DACN,GACD,SAAA,MAAA,CAAA,EAGH,QACCnB,EAAA,CACC,SAAA1C,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM8D,EAAgB,SAAS,EACxC,UAAW,gEACTD,IAAiB,UACb,0BACA,+DACN,GACD,SAAA,UAAA,CAAA,CAED,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAIF/D,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAE,EAAAA,IAAC,QAAA,CAAM,UAAU,kEAAkE,SAAA,YAEnF,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAO+D,EACP,SAAW2B,GAAM1B,EAAY0B,EAAE,OAAO,KAAK,EAC3C,UAAU,2IAAA,CAAA,CACZ,EACF,SACC,MAAA,CACC,SAAA,CAAA1F,EAAAA,IAAC,QAAA,CAAM,UAAU,kEAAkE,SAAA,UAEnF,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOiE,EACP,SAAWyB,GAAMxB,EAAUwB,EAAE,OAAO,KAAK,EACzC,UAAU,2IAAA,CAAA,CACZ,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAGC,CAAC3D,GACAjC,EAAAA,KAAC,MAAA,CAAI,UAAU,2CAA2C,SAAA,CAAA,WAC/CqD,EAAM,OAAO,QAAMA,EAAM,SAAW,EAAI,IAAM,EAAA,EACzD,QAIDlD,GAAA,CAAc,UAAWkF,EACxB,SAAArF,EAAAA,KAAC,MAAA,CAAI,UAAU,YACZ,SAAA,CAAAiC,GAAWsB,IAAS,EAEnB,MAAM,KAAK,CAAE,OAAQ,CAAA,CAAG,EAAE,IAAI,CAAC1D,EAAGgG,IAChC3F,EAAAA,IAACgD,EAAA,CAAuB,KAAK,MAAA,EAAR2C,CAAe,CACrC,EACCxC,EAAM,SAAW,EAEnBrD,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAE,EAAAA,IAAC,OAAI,UAAU,kCAAkC,KAAK,OAAO,QAAQ,YAAY,OAAO,eACtF,eAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,uHAAuH,CAAA,CAC9L,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,yDAAyD,SAAA,iBAAc,EACrFA,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,8CAAA,CAE7D,CAAA,CAAA,CACF,EAGAmD,EAAM,IAAKlB,GACTjC,EAAAA,IAAChB,GAAA,CAEC,WAAY,CACV,MAAO,OACP,MAAO,UACP,UAAW,IAAMqG,EACfpD,EAAK,WAAa,SAAYA,EAAoB,QAAWA,EAAoB,GACjFA,EAAK,QAAA,CACP,EAEF,YAAa,CACX,MAAO,WACP,MAAO,UACP,UAAW,IAAMQ,EAAkBR,CAAI,CAAA,EAGzC,eAACS,EAAA,CACC,SAAA1C,EAAAA,IAAC,MAAA,CACC,QAAS,IAAMqF,EACbpD,EAAK,WAAa,SAAYA,EAAoB,QAAWA,EAAoB,GACjFA,EAAK,QAAA,EAEP,UAAU,sGAEV,SAAAnC,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iBAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACZ,SAAA,CAAAyF,EAAiBtD,EAAK,QAAQ,EAC9BA,EAAK,WAAa,UACjBnC,EAAAA,KAAA8F,EAAAA,SAAA,CACE,SAAA,CAAA5F,EAAAA,IAAC,KAAA,CAAG,UAAU,+DACV,SAAAiC,EAAoB,cACxB,EACCuD,EAAgBvD,EAAoB,gBAAgB,CAAA,EACvD,EAEDA,EAAK,WAAa,UACjBjC,EAAAA,IAAC,MAAG,UAAU,+DACV,WAAoB,aAAA,CACxB,CAAA,EAEJ,EAGAA,EAAAA,IAAC,IAAA,CAAE,UAAU,yDACV,SAAAiC,EAAK,WAAa,SAAYA,EAAoB,cAAiBA,EAAoB,gBAAA,CAC1F,EAGAnC,EAAAA,KAAC,MAAA,CAAI,UAAU,0EACZ,SAAA,CAAAmC,EAAK,WAAa,UACjBnC,EAAAA,KAAA8F,EAAAA,SAAA,CACE,SAAA,CAAA9F,OAAC,OAAA,CAAK,SAAA,CAAA,MAAKmC,EAAoB,oBAAA,EAAqB,SACnD,OAAA,CAAK,SAAA,CAAA,MAAI,IAAI,KAAMA,EAAoB,cAAc,EAAE,mBAAA,CAAmB,EAAE,EAC3EA,EAAoB,aAAe,QAAcA,EAAoB,aAAe,eACnF,OAAA,CAAK,SAAA,CAAA,KACAA,EAAoB,WAAW,QAAOA,EAAoB,UAAA,CAAA,CAChE,CAAA,EAEJ,EAEDA,EAAK,WAAa,UACjBnC,EAAAA,KAAA8F,EAAAA,SAAA,CACE,SAAA,CAAA9F,OAAC,OAAA,CAAK,SAAA,CAAA,MAAKmC,EAAoB,gBAAA,EAAiB,SAC/C,OAAA,CAAK,SAAA,CAAA,MAAI,IAAI,KAAMA,EAAoB,aAAa,EAAE,mBAAA,CAAmB,EAAE,SAC3E,OAAA,CAAK,SAAA,CAAA,MAAKA,EAAoB,aAAa,WAAUA,EAAoB,eAAiB,EAAI,IAAM,EAAA,CAAA,CAAG,CAAA,CAAA,CAC1G,CAAA,CAAA,CAEJ,CAAA,EACF,EAGAjC,EAAAA,IAAC,OAAI,UAAU,sCAAsC,KAAK,OAAO,QAAQ,YAAY,OAAO,eAC1F,eAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,eAAe,CAAA,CACtF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CACF,CAAA,EA7EK,GAAGiC,EAAK,QAAQ,IAAIA,EAAK,EAAE,EAAA,CA+EnC,EAIFoB,EAAOE,GAAc,CAACxB,SACpBW,EAAA,CACC,SAAA1C,EAAAA,IAAC,SAAA,CACC,QAASoF,EACT,UAAU,oKACX,SAAA,WAAA,CAAA,EAGH,EAIDrD,GAAWsB,EAAO,GACjBrD,EAAAA,IAAC,MAAA,CAAI,UAAU,mBACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,2EAAA,CAA4E,CAAA,CAC7F,CAAA,CAAA,CAEJ,CAAA,CACF,EAGCmE,GAAkBE,GACjBvE,EAAAA,KAACe,GAAA,CACC,OAAQ,CAAC,CAACsD,EACV,QAAS,IAAM,CACbC,EAAkB,IAAI,EACtBE,EAAoB,IAAI,CAC1B,EACA,MAAM,eAEL,SAAA,CAAAD,IAAqB,UAAYrE,EAAAA,IAAC6B,GAAA,CAAW,OAAQsC,EAAgB,EACrEE,IAAqB,UAAYrE,EAAAA,IAAC2C,GAAA,CAAa,OAAQwB,CAAA,CAAgB,CAAA,CAAA,CAAA,QAK3E0B,GAAA,CAAA,CAAM,CAAA,EACT,CAEJ,CC/bO,SAASC,IAAqB,CACnC,KAAM,CAAC/D,EAASC,CAAU,EAAI3B,EAAAA,SAAS,EAAI,EACrC,CAAC0F,EAAiBC,CAAkB,EAAI3F,EAAAA,SAA+B,IAAI,EAC3E,CAAC4F,EAAiBC,CAAkB,EAAI7F,EAAAA,SAAiC,IAAI,EAEnF8B,EAAAA,UAAU,IAAM,CACdgE,EAAA,EACA,MAAMC,EAAW,YAAYD,EAAgB,GAAK,EAClD,MAAO,IAAM,cAAcC,CAAQ,CACrC,EAAG,CAAA,CAAE,EAEL,MAAMD,EAAiB,SAAY,CACjC,GAAI,CAEF,MAAME,EAAiB,MAAM,MAAM,GAAG3E,CAAY,mBAAmB,EACrE,GAAI2E,EAAe,GAAI,CACrB,MAAMC,EAAa,MAAMD,EAAe,KAAA,EACxCL,EAAmBM,CAAU,CAC/B,CAGA,MAAMC,EAAiB,MAAM,MAAM,GAAG5E,EAAc,WAAW,aAAa,EAC5E,GAAI4E,EAAe,GAAI,CAErB,MAAMpD,GADa,MAAMoD,EAAe,KAAA,GACf,OAAS,CAAA,EAG5BC,MAAU,KACVC,EAAYD,EAAI,SAAA,EAChBE,EAAWF,EAAI,YAAA,EAEfG,EAAiBxD,EAAM,OAAQ2B,GAAW,CAC9C,MAAM8B,EAAW,IAAI,KAAK9B,EAAE,UAAU,EACtC,OAAO8B,EAAS,SAAA,IAAeH,GAAaG,EAAS,gBAAkBF,CACzE,CAAC,EAAE,OAEGG,EAAgB1D,EAAM,OAAO,CAAC2D,EAAa7E,IAAc6E,GAAO7E,EAAK,cAAgB,GAAI,CAAC,EAG1F8E,EAAwC,CAAA,EAC9C5D,EAAM,QAASlB,GAAc,CAC3B,MAAM+E,EAAW/E,EAAK,kBAAoB,UAC1C8E,EAAcC,CAAQ,GAAKD,EAAcC,CAAQ,GAAK,GAAK,CAC7D,CAAC,EAED,MAAMC,EAAkB,OAAO,QAAQF,CAAa,EAAE,IAAI,CAAC,CAACC,EAAUE,CAAK,KAAO,CAChF,SAAAF,EACA,MAAAE,CAAA,EACA,EAEFhB,EAAmB,CACjB,WAAY/C,EAAM,OAClB,cAAA0D,EACA,gBAAAI,EACA,eAAAN,CAAA,CACD,CACH,CACF,OAASpE,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,CAClD,QAAA,CACEP,EAAW,EAAK,CAClB,CACF,EAEA,GAAID,EACF,OACE/B,MAAC,OAAI,UAAU,YACZ,eAAM,KAAK,CAAE,OAAQ,CAAA,CAAG,EAAE,IAAI,CAACL,EAAG,IACjCK,EAAAA,IAACgD,GAAuB,KAAK,MAAA,EAAR,CAAe,CACrC,EACH,EAIJ,GAAI,CAAC+C,EACH,OAAO/F,EAAAA,IAAC,MAAA,CAAI,UAAU,+BAA+B,SAAA,2BAAwB,EAG/E,MAAMmH,EAAU,CACd,CAAE,KAAM,OAAQ,MAAO,KAAK,MAAMpB,EAAgB,QAAQ,EAAG,MAAO,SAAA,EACpE,CAAE,KAAM,WAAY,MAAO,KAAK,MAAMA,EAAgB,WAAW,EAAG,MAAO,SAAA,CAAU,EAIjFqB,EAAe,CACnB,CACE,KAAM,UACN,MAAOrB,EAAgB,WACvB,UAAWA,EAAgB,eAC3B,MAAO,SAAA,EAET,CACE,KAAM,UACN,MAAOE,GAAiB,YAAc,EACtC,UAAWA,GAAiB,gBAAkB,EAC9C,MAAO,SAAA,CACT,EAGF,OACEnG,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,uDAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAE,EAAAA,IAAC,IAAA,CAAE,UAAU,uDAAuD,SAAA,gBAAa,EACjFA,EAAAA,IAAC,IAAA,CAAE,UAAU,2DACV,WAAgB,UAAA,CACnB,CAAA,EACF,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,WAAW,SAAA,IAAA,CAAE,CAAA,EAC9B,EACAF,EAAAA,KAAC,IAAA,CAAE,UAAU,gDACV,SAAA,CAAAiG,EAAgB,eAAe,aAAA,CAAA,CAClC,CAAA,EACF,EAGAjG,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAE,EAAAA,IAAC,IAAA,CAAE,UAAU,uDAAuD,SAAA,gBAAa,QAChF,IAAA,CAAE,UAAU,+DACV,SAAAiG,GAAiB,YAAc,CAAA,CAClC,CAAA,EACF,EACAjG,EAAAA,IAAC,MAAA,CAAI,UAAU,WAAW,SAAA,IAAA,CAAE,CAAA,EAC9B,EACAF,EAAAA,KAAC,IAAA,CAAE,UAAU,gDACV,SAAA,CAAAmG,GAAiB,gBAAkB,EAAE,aAAA,CAAA,CACxC,CAAA,EACF,EAGAnG,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAE,EAAAA,IAAC,IAAA,CAAE,UAAU,uDAAuD,SAAA,YAAS,EAC7EF,EAAAA,KAAC,IAAA,CAAE,UAAU,yDACV,SAAA,CAAAiG,EAAgB,SAAS,QAAQ,CAAC,EAAE,GAAA,CAAA,CACvC,CAAA,EACF,EACA/F,EAAAA,IAAC,MAAA,CAAI,UAAU,WAAW,SAAA,IAAA,CAAE,CAAA,EAC9B,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,cAAA,CAE7D,CAAA,EACF,EAGAF,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAE,EAAAA,IAAC,IAAA,CAAE,UAAU,uDAAuD,SAAA,mBAAgB,QACnF,IAAA,CAAE,UAAU,6DACV,SAAAiG,GAAiB,eAAiB,CAAA,CACrC,CAAA,EACF,EACAjG,EAAAA,IAAC,MAAA,CAAI,UAAU,WAAW,SAAA,IAAA,CAAE,CAAA,EAC9B,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,kBAAA,CAE7D,CAAA,CAAA,CACF,CAAA,EACF,EAGAF,EAAAA,KAAC,MAAA,CAAI,UAAU,wCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,2DAA2D,SAAA,uBAEzE,EACAA,EAAAA,IAACqH,GAAoB,MAAM,OAAO,OAAQ,IACxC,SAAAvH,EAAAA,KAACwH,EAAA,CAAS,KAAMF,EACd,SAAA,CAAApH,EAAAA,IAACuH,EAAA,CAAc,gBAAgB,MAAM,OAAO,UAAU,EACtDvH,EAAAA,IAACwH,EAAA,CAAM,QAAQ,OAAO,OAAO,UAAU,EACvCxH,EAAAA,IAACyH,EAAA,CAAM,OAAO,SAAA,CAAU,EACxBzH,EAAAA,IAAC0H,EAAA,CACC,aAAc,CAAE,gBAAiB,UAAW,OAAQ,OAAQ,aAAc,KAAA,EAC1E,WAAY,CAAE,MAAO,MAAA,CAAO,CAAA,QAE7BC,GAAA,EAAO,QACPC,EAAA,CAAI,QAAQ,QAAQ,KAAK,UAAU,KAAK,cAAc,QACtDA,EAAA,CAAI,QAAQ,YAAY,KAAK,UAAU,KAAK,YAAA,CAAa,CAAA,CAAA,CAC5D,CAAA,CACF,CAAA,EACF,EAGA9H,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,2DAA2D,SAAA,4BAEzE,QACCqH,EAAA,CAAoB,MAAM,OAAO,OAAQ,IACxC,gBAACQ,GAAA,CACC,SAAA,CAAA7H,EAAAA,IAAC8H,GAAA,CACC,KAAMX,EACN,GAAG,MACH,GAAG,MACH,UAAW,GACX,MAAO,CAAC,CAAE,KAAAY,EAAM,MAAAC,KAAY,GAAGD,CAAI,KAAKC,CAAK,IAC7C,YAAa,IACb,KAAK,UACL,QAAQ,QAEP,SAAAb,EAAQ,IAAI,CAACc,EAAOC,IACnBlI,EAAAA,IAACmI,GAAA,CAA2B,KAAMF,EAAM,KAAA,EAA7B,QAAQC,CAAK,EAAuB,CAChD,CAAA,CAAA,QAEFR,EAAA,CAAA,CAAQ,CAAA,CAAA,CACX,CAAA,CACF,CAAA,EACF,EAGA5H,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,2DAA2D,SAAA,uCAEzE,EACAA,EAAAA,IAACqH,EAAA,CAAoB,MAAM,OAAO,OAAQ,IACxC,SAAAvH,EAAAA,KAACsI,GAAA,CAAU,KAAMrC,EAAgB,YAC/B,SAAA,CAAA/F,EAAAA,IAACuH,EAAA,CAAc,gBAAgB,MAAM,OAAO,UAAU,EACtDvH,EAAAA,IAACwH,EAAA,CACC,QAAQ,OACR,OAAO,UACP,KAAM,CAAE,SAAU,EAAA,CAAG,CAAA,EAEvBxH,EAAAA,IAACyH,EAAA,CAAM,OAAO,SAAA,CAAU,EACxBzH,EAAAA,IAAC0H,EAAA,CACC,aAAc,CAAE,gBAAiB,UAAW,OAAQ,OAAQ,aAAc,KAAA,EAC1E,WAAY,CAAE,MAAO,MAAA,CAAO,CAAA,EAE9B1H,EAAAA,IAACqI,GAAA,CACC,KAAK,WACL,QAAQ,QACR,OAAO,UACP,YAAa,EACb,IAAK,CAAE,KAAM,UAAW,EAAG,CAAA,CAAE,CAAA,CAC/B,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGCpC,GAAmBA,EAAgB,gBAAgB,OAAS,GAC3DnG,OAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,2DAA2D,SAAA,6BAEzE,EACAA,EAAAA,IAACqH,EAAA,CAAoB,MAAM,OAAO,OAAQ,IACxC,SAAAvH,EAAAA,KAACwH,EAAA,CAAS,KAAMrB,EAAgB,gBAAiB,OAAO,aACtD,SAAA,CAAAjG,EAAAA,IAACuH,EAAA,CAAc,gBAAgB,MAAM,OAAO,UAAU,EACtDvH,EAAAA,IAACwH,EAAA,CAAM,KAAK,SAAS,OAAO,UAAU,EACtCxH,EAAAA,IAACyH,EAAA,CACC,KAAK,WACL,QAAQ,WACR,OAAO,UACP,MAAO,IACP,KAAM,CAAE,SAAU,EAAA,CAAG,CAAA,EAEvBzH,EAAAA,IAAC0H,EAAA,CACC,aAAc,CAAE,gBAAiB,UAAW,OAAQ,OAAQ,aAAc,KAAA,EAC1E,WAAY,CAAE,MAAO,MAAA,CAAO,CAAA,EAE9B1H,EAAAA,IAAC4H,EAAA,CAAI,QAAQ,QAAQ,KAAK,SAAA,CAAU,CAAA,CAAA,CACtC,CAAA,CACF,CAAA,EACF,EAIF9H,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,2DAA2D,SAAA,yCAEzE,EACAA,EAAAA,IAACqH,EAAA,CAAoB,MAAM,OAAO,OAAQ,IACxC,SAAAvH,EAAAA,KAACwH,EAAA,CAAS,KAAMvB,EAAgB,YAAY,MAAM,EAAG,EAAE,EACrD,SAAA,CAAA/F,EAAAA,IAACuH,EAAA,CAAc,gBAAgB,MAAM,OAAO,UAAU,EACtDvH,EAAAA,IAACwH,EAAA,CACC,QAAQ,YACR,OAAO,UACP,MAAO,IACP,WAAW,MACX,OAAQ,GACR,KAAM,CAAE,SAAU,EAAA,CAAG,CAAA,EAEvBxH,EAAAA,IAACyH,EAAA,CAAM,OAAO,SAAA,CAAU,EACxBzH,EAAAA,IAAC0H,EAAA,CACC,aAAc,CAAE,gBAAiB,UAAW,OAAQ,OAAQ,aAAc,KAAA,EAC1E,WAAY,CAAE,MAAO,MAAA,CAAO,CAAA,EAE9B1H,EAAAA,IAAC4H,EAAA,CAAI,QAAQ,QAAQ,KAAK,SAAA,CAAU,CAAA,CAAA,CACtC,CAAA,CACF,CAAA,EACF,EAGA9H,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,2DAA2D,SAAA,qCAEzE,QACCqH,EAAA,CAAoB,MAAM,OAAO,OAAQ,IACxC,SAAAvH,EAAAA,KAACwH,EAAA,CAAS,KAAMvB,EAAgB,mBAAmB,MAAM,EAAG,CAAC,EAAG,OAAO,WACrE,SAAA,CAAA/F,EAAAA,IAACuH,EAAA,CAAc,gBAAgB,MAAM,OAAO,UAAU,EACtDvH,EAAAA,IAACwH,EAAA,CAAM,KAAK,SAAS,OAAO,UAAU,EACtCxH,EAAAA,IAACyH,EAAA,CACC,KAAK,WACL,QAAQ,OACR,OAAO,UACP,MAAO,IACP,KAAM,CAAE,SAAU,EAAA,CAAG,CAAA,EAEvBzH,EAAAA,IAAC0H,EAAA,CACC,aAAc,CAAE,gBAAiB,UAAW,OAAQ,OAAQ,aAAc,KAAA,EAC1E,WAAY,CAAE,MAAO,MAAA,CAAO,CAAA,EAE9B1H,EAAAA,IAAC4H,EAAA,CAAI,QAAQ,QAAQ,KAAK,SAAA,CAAU,CAAA,CAAA,CACtC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ,CCtUO,SAASU,IAAoB,CAClC,KAAM,CAACC,EAAUC,CAAW,EAAInI,EAAAA,SAAoB,CAAA,CAAE,EAChD,CAAC0B,EAASC,CAAU,EAAI3B,EAAAA,SAAS,EAAI,EACrC,CAACoD,EAAYC,CAAa,EAAIrD,EAAAA,SAAS,EAAE,EAE/C8B,EAAAA,UAAU,IAAM,CACdsG,EAAA,CACF,EAAG,CAAA,CAAE,EAEL,MAAMA,EAAgB,SAAY,CAChC,GAAI,CACF,MAAMpG,EAAW,MAAM,MAAM,GAAGX,CAAY,WAAW,EACvD,GAAI,CAACW,EAAS,GAAI,MAAM,IAAI,MAAM,0BAA0B,EAC5D,MAAMC,EAAO,MAAMD,EAAS,KAAA,EAC5BmG,EAAYlG,EAAK,UAAY,EAAE,CACjC,OAASC,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,EAC/CC,EAAU,CAAE,QAAS,0BAA2B,KAAM,QAAS,CACjE,QAAA,CACER,EAAW,EAAK,CAClB,CACF,EAEM0G,EAAmBH,EAAS,OAAOtF,GAAW,CAClD,MAAM0F,EAAclF,EAAW,YAAA,EAC/B,OACER,EAAQ,SAAS,YAAA,EAAc,SAAS0F,CAAW,GACnD1F,EAAQ,aAAa,YAAA,EAAc,SAAS0F,CAAW,GACvD1F,EAAQ,cAAc,YAAA,EAAc,SAAS0F,CAAW,GACxD1F,EAAQ,eAAe,cAAc,SAAS0F,CAAW,CAE7D,CAAC,EAED,OAAI5G,EAEA/B,MAAC,OAAI,UAAU,YACZ,eAAM,KAAK,CAAE,OAAQ,CAAA,CAAG,EAAE,IAAI,CAACL,EAAGgG,IACjC3F,EAAAA,IAACgD,GAAuB,KAAK,MAAA,EAAR2C,CAAe,CACrC,EACH,EAKF7F,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAE,EAAAA,IAAC,MAAA,CAAI,UAAU,qDACb,SAAAA,EAAAA,IAAC,QAAA,CACC,KAAK,SACL,YAAY,4DACZ,MAAOyD,EACP,SAAWiC,GAAMhC,EAAcgC,EAAE,OAAO,KAAK,EAC7C,UAAU,2IAAA,CAAA,EAEd,EAGA5F,EAAAA,KAAC,MAAA,CAAI,UAAU,2CAA2C,SAAA,CAAA,WAC/C4I,EAAiB,OAAO,WAASA,EAAiB,SAAW,EAAI,IAAM,EAAA,EAClF,EAGA1I,EAAAA,IAAC,MAAA,CAAI,UAAU,uDACZ,SAAA0I,EAAiB,SAAW,EAC3B5I,EAAAA,KAAC,MAAA,CAAI,UAAU,+EACb,SAAA,CAAAE,EAAAA,IAAC,OAAI,UAAU,kCAAkC,KAAK,OAAO,QAAQ,YAAY,OAAO,eACtF,eAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,4IAA4I,CAAA,CACnN,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,yDAAyD,SAAA,oBAAiB,EACxFA,EAAAA,IAAC,IAAA,CAAE,UAAU,gDAAgD,SAAA,6BAAA,CAE7D,CAAA,CAAA,CACF,EAEA0I,EAAiB,IAAKzF,SACnBP,EAAA,CACC,SAAA5C,EAAAA,KAAC,MAAA,CAAI,UAAU,sGAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAE,EAAAA,IAAC,MAAA,CAAI,UAAU,WACZ,SAAAiD,EAAQ,aAAa,YAAA,EAAc,SAAS,OAAO,EAAI,KAAO,IAAA,CACjE,EACAnD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,+DACX,SAAAiD,EAAQ,QACX,EACAnD,EAAAA,KAAC,IAAA,CAAE,UAAU,2CACV,SAAA,CAAAmD,EAAQ,YAAY,IAAEA,EAAQ,YAAA,CAAA,CACjC,CAAA,CAAA,CACF,CAAA,EACF,EAGAnD,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACZ,SAAA,CAAAmD,EAAQ,eACPnD,OAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAE,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,WAAQ,EACtCA,EAAAA,IAAC,OAAA,CAAM,SAAAiD,EAAQ,aAAA,CAAc,CAAA,EAC/B,EAEDA,EAAQ,aACPnD,OAAC,MAAA,CAAI,UAAU,2DACb,SAAA,CAAAE,EAAAA,IAAC,OAAA,CAAK,UAAU,cAAc,SAAA,QAAK,EACnCA,EAAAA,IAAC,OAAA,CAAM,SAAAiD,EAAQ,WAAA,CAAY,CAAA,EAC7B,EAEDA,EAAQ,eACPnD,OAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAE,EAAAA,IAAC,OAAA,CAAK,UAAU,+CAA+C,SAAA,UAAO,EACtEA,EAAAA,IAAC,OAAA,CAAK,UAAW,gDACfiD,EAAQ,gBAAkB,SACtB,oEACA,+DACN,GACG,SAAAA,EAAQ,aAAA,CACX,CAAA,CAAA,CACF,CAAA,EAEJ,EAGCA,EAAQ,OACPjD,MAAC,MAAA,CAAI,UAAU,0DACb,SAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,wDACV,SAAAiD,EAAQ,KAAA,CACX,EACF,EAIFjD,MAAC,MAAA,CAAI,UAAU,0DACb,eAAC0C,EAAA,CACC,SAAA1C,EAAAA,IAAC,IAAA,CACC,KAAM,aAAa,mBAAmBiD,EAAQ,OAAO,CAAC,GACtD,UAAU,+HACX,SAAA,mBAAA,CAAA,EAGH,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EAjEkBA,EAAQ,EAkE5B,CACD,CAAA,CAEL,CAAA,EACF,CAEJ,CCjKO,SAAS2F,IAAuB,CACrC,KAAM,CAACC,EAAaC,CAAc,EAAIzI,EAAAA,SAAkB,MAAM,EAE9D,OACEP,EAAAA,KAAC,MAAA,CAAI,UAAU,2CAEb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CAAO,UAAU,wDAChB,SAAA,CAAAE,EAAAA,IAAC,OAAI,UAAU,YACb,SAAAF,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAE,EAAAA,IAAC,OAAI,UAAU,2CAA2C,KAAK,OAAO,QAAQ,YAAY,OAAO,eAC/F,eAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,uHAAuH,CAAA,CAC9L,EACAF,EAAAA,KAAC,MAAA,CAAI,UAAU,SACb,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAG,UAAU,mDAAmD,SAAA,gBAEjE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,2CAA2C,SAAA,4BAAA,CAExD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAGAF,EAAAA,KAAC,MAAA,CAAI,UAAU,qDACb,SAAA,CAAAE,MAAC0C,EAAA,CACC,SAAA1C,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM8I,EAAe,MAAM,EACpC,UAAW,0DACTD,IAAgB,OACZ,6FACA,uHACN,GAEA,SAAA/I,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAE,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,EACRA,EAAAA,IAAC,OAAA,CAAK,UAAU,mBAAmB,SAAA,OAAA,CAAK,CAAA,CAAA,CAC1C,CAAA,CAAA,EAEJ,QAEC0C,EAAA,CACC,SAAA1C,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM8I,EAAe,WAAW,EACzC,UAAW,0DACTD,IAAgB,YACZ,6FACA,uHACN,GAEA,SAAA/I,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAE,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,EACRA,EAAAA,IAAC,OAAA,CAAK,UAAU,mBAAmB,SAAA,WAAA,CAAS,CAAA,CAAA,CAC9C,CAAA,CAAA,EAEJ,QAEC0C,EAAA,CACC,SAAA1C,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM8I,EAAe,UAAU,EACxC,UAAW,0DACTD,IAAgB,WACZ,6FACA,uHACN,GAEA,SAAA/I,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAE,EAAAA,IAAC,QAAK,SAAA,IAAA,CAAE,EACRA,EAAAA,IAAC,OAAA,CAAK,UAAU,mBAAmB,SAAA,UAAA,CAAQ,CAAA,CAAA,CAC7C,CAAA,CAAA,CACF,CACF,CAAA,CAAA,CACF,CAAA,EACF,QAGC,OAAA,CAAK,UAAU,0BACd,SAAAF,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACZ,SAAA,CAAA+I,IAAgB,cAAW3F,GAAA,CAAA,CAAU,EACrC2F,IAAgB,aAAe7I,MAAC8F,GAAA,CAAA,CAAmB,EACnD+C,IAAgB,YAAc7I,MAACsI,GAAA,CAAA,CAAkB,CAAA,CAAA,CACpD,CAAA,CACF,CAAA,EACF,CAEJ"}