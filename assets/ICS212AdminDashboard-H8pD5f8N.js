import{u as ee,a as A,j as e,m as T,R as se,A as ae,P as re,O as le,C as ie,T as de}from"./ui-qyH4TQhP.js";import{r as o,u as ne}from"./vendor-Duk_Y8N0.js";import{a as P,T as te,S as oe}from"./SkeletonLoader-Cc15p0aF.js";import{T as p}from"./TouchFeedback-BRUDPQK4.js";import{c as Q,s as D,T as ce}from"./index-BeEw5Xir.js";import{R as V,B as W,C as U,X as O,Y as B,T as R,L as xe,a as H,P as he,b as ge,c as me,d as ye,e as ue}from"./charts-BOXCqqn5.js";import{H as be}from"./house-C35IISgf.js";const pe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],fe=Q("pen",pe);const je=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ke=Q("plus",je);const ve=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ne=Q("x",ve),we=({children:n,leftAction:a,rightAction:r,threshold:l=80,className:c=""})=>{const g=ee(0),x=A(g,[-l,0,l],[r?.color||"#ef4444","#ffffff",a?.color||"#10b981"]),h=(y,u)=>{const i=u.offset.x;i>l&&a?(a.onTrigger(),g.set(0)):(i<-l&&r&&r.onTrigger(),g.set(0))};return e.jsxs("div",{className:`relative overflow-hidden ${c}`,children:[e.jsxs("div",{className:"absolute inset-0 flex justify-between items-center px-6",children:[a&&e.jsxs(T.div,{className:"flex items-center gap-2 text-white font-semibold",style:{opacity:A(g,[0,l],[0,1])},children:[a.icon&&e.jsx("span",{children:a.icon}),e.jsx("span",{children:a.label})]}),r&&e.jsxs(T.div,{className:"flex items-center gap-2 text-white font-semibold ml-auto",style:{opacity:A(g,[-l,0],[1,0])},children:[e.jsx("span",{children:r.label}),r.icon&&e.jsx("span",{children:r.icon})]})]}),e.jsx(T.div,{drag:"x",dragConstraints:{left:r?-l*1.5:0,right:a?l*1.5:0},dragElastic:.1,onDragEnd:h,style:{x:g,backgroundColor:x},className:"relative z-10 bg-white dark:bg-gray-800 touch-pan-y",children:n})]})},Se=({children:n,onRefresh:a,threshold:r=80,className:l=""})=>{const[c,g]=o.useState(!1),x=ee(0),h=o.useRef(null),y=A(x,[0,r],[0,1]),u=A(x,[0,r],[0,180]),i=async(f,N)=>{if(N.offset.y>r&&!c){g(!0);try{await a()}finally{g(!1),x.set(0)}}else x.set(0)},v=(f,N)=>{const d=h.current;d&&d.scrollTop===0&&N.offset.y>0&&x.set(Math.min(N.offset.y,r*1.5))};return e.jsxs("div",{ref:h,className:`relative overflow-auto ${l}`,children:[e.jsx(T.div,{className:"absolute top-0 left-0 right-0 flex items-center justify-center py-4 z-10",style:{opacity:y,height:A(x,[0,r],[0,60])},children:e.jsx(T.div,{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full",style:{rotate:c?void 0:u},animate:c?{rotate:360}:{},transition:{repeat:c?1/0:0,duration:1,ease:"linear"}})}),e.jsx(T.div,{drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.1,onDrag:v,onDragEnd:i,style:{y:x},className:"touch-pan-x",children:n})]})},Ce=({isOpen:n,onClose:a,title:r,children:l,showHandle:c=!0,className:g=""})=>e.jsx(se,{open:n,onOpenChange:x=>!x&&a(),children:e.jsx(ae,{children:n&&e.jsxs(re,{forceMount:!0,children:[e.jsx(le,{asChild:!0,children:e.jsx(T.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}})}),e.jsx(ie,{asChild:!0,children:e.jsxs(T.div,{className:`
                  fixed bottom-0 left-0 right-0 z-50
                  bg-white dark:bg-gray-800
                  rounded-t-3xl shadow-2xl
                  max-h-[90vh] overflow-hidden
                  ${g}
                `,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:300,damping:30},drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.2,onDragEnd:(x,h)=>{h.offset.y>100&&a()},children:[c&&e.jsx("div",{className:"flex justify-center pt-3 pb-2",children:e.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),r&&e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx(de,{className:"text-xl font-bold text-gray-900 dark:text-white",children:r})}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)] p-6",children:l})]})})]})})}),_e="https://usar-ics212.pdarleyjr.workers.dev",m=`${_e}/api`,Z={ics212Forms:`${m}/ics212/forms`,formById:n=>`${m}/ics212/forms/${n}`,analytics:`${m}/ics212/analytics`,submitForm:`${m}/ics212/submit`,emailForm:n=>`${m}/ics212/forms/${n}/email`,ics218Forms:`${m}/ics218/forms`,ics218FormById:n=>`${m}/ics218/forms/${n}`,ics218Submit:`${m}/ics218/submit`,ics218ValidatePassword:`${m}/ics218/validate-password`,ics218PdfDownload:n=>`${m}/ics218/pdf/${n}`,vehicles:`${m}/vehicles`,vehicleAutocomplete:`${m}/vehicles/autocomplete`,vehicleById:n=>`${m}/vehicles/${n}`,inventory:`${m}/inventory`,dynamicForms:`${m}/forms`,health:`${m}/health`};function Ie({formId:n}){const[a,r]=o.useState(!0),[l,c]=o.useState(null);o.useEffect(()=>{g()},[n]);const g=async()=>{try{const h=await fetch(`${m}/ics212/forms/${n}`);if(!h.ok)throw new Error("Failed to fetch form");const y=await h.json();c(y.form)}catch(h){console.error("Error fetching form detail:",h),D({message:"Failed to load form details",type:"error"})}finally{r(!1)}},x=()=>{l?.pdf_url&&window.open(l.pdf_url,"_blank")};return a?e.jsx("div",{className:"p-4 space-y-4",children:e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"})]})}):l?e.jsxs("div",{className:"space-y-4 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white",children:l.vehicle_id_no}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:l.incident_name}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${l.release_decision==="hold"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}`,children:l.release_decision==="hold"?"ğŸ”´ HOLD":"ğŸŸ¢ RELEASED"})})]}),l.pdf_url&&e.jsxs("div",{className:"px-4",children:[e.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-900",children:e.jsx("iframe",{src:l.pdf_url,className:"w-full",style:{height:"400px"},title:"PDF Preview"})}),e.jsx(p,{children:e.jsx("button",{onClick:x,className:"w-full mt-2 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"ğŸ“¥ Download PDF"})})]}),e.jsxs("div",{className:"px-4 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Inspection Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Inspector:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:l.inspector_name_print})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Date:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:l.inspector_date})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Time:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:l.inspector_time})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Vehicle Type:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:l.vehicle_type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"License:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:l.vehicle_license_no})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Agency/Unit:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:l.agency_reg_unit})]})]}),l.additional_comments&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Comments:"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:l.additional_comments})]}),l.github_issue_number&&e.jsx(p,{children:e.jsxs("a",{href:`https://github.com/pdarleyjr/mbfd-checkout-system/issues/${l.github_issue_number}`,target:"_blank",rel:"noopener noreferrer",className:"block w-full py-2 px-4 bg-gray-100 dark:bg-gray-700 text-blue-600 dark:text-blue-400 rounded-lg text-center font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:["View GitHub Issue #",l.github_issue_number," â†’"]})})]})]}):e.jsx("div",{className:"p-4 text-center",children:e.jsx("p",{className:"text-red-500",children:"Form not found"})})}function Fe({formId:n}){const[a,r]=o.useState(null),[l,c]=o.useState(!0),[g,x]=o.useState(null);o.useEffect(()=>{h()},[n]);const h=async()=>{c(!0),x(null);try{const i=await fetch(Z.ics218FormById(n));if(!i.ok)throw new Error("Failed to fetch form details");const v=await i.json();r(v.form)}catch(i){console.error("Error fetching ICS 218 form details:",i),x(i instanceof Error?i.message:"Unknown error")}finally{c(!1)}},y=()=>{a?.pdf_url&&window.open(a.pdf_url,"_blank")},u=()=>{a?.github_issue_url&&window.open(a.github_issue_url,"_blank")};return l?e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsx(P,{type:"card"}),e.jsx(P,{type:"card"}),e.jsx(P,{type:"card"})]}):g||!a?e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800 dark:text-red-200",children:g||"Form not found"})})}):e.jsxs("div",{className:"space-y-6 p-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"ICS 218 - Support Vehicle/Equipment Log"}),e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"ICS 218"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Incident Name:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:a.incident_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Incident Number:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:a.incident_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Date Prepared:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:new Date(a.date_prepared).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Time Prepared:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:a.time_prepared})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Vehicle Category:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:a.vehicle_category})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Vehicles (",a.vehicles.length,")"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Classification"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Make/Type"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"License ID"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Agency"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Operator"}),e.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Assignment"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:a.vehicles.map(i=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:i.classification}),e.jsxs("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:[i.make," ",i.category_kind_type]}),e.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:i.vehicle_license_id}),e.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:i.agency_owner}),e.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:i.operator_name_contact}),e.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:i.incident_assignment})]},i.id))})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Prepared By"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Name:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:a.prepared_by_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Position/Title:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:a.prepared_by_position})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Signature Date/Time:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:new Date(a.signature_timestamp).toLocaleString()})]})]}),a.signature_data&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300 block mb-2",children:"Signature:"}),e.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-2 bg-white dark:bg-gray-900 inline-block",children:e.jsx("img",{src:a.signature_data,alt:"Signature",className:"max-w-xs h-20"})})]})]}),e.jsxs("div",{className:"flex gap-3",children:[a.pdf_url&&e.jsxs("button",{onClick:y,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download PDF"]}),a.github_issue_url&&e.jsxs("button",{onClick:u,className:"flex-1 px-4 py-3 bg-gray-800 text-white rounded-lg font-semibold hover:bg-gray-900 transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"View GitHub Issue"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["Form ID: ",a.id," | Submitted: ",new Date(a.created_at).toLocaleString()]})]})}function De(){const[n,a]=o.useState([]),[r,l]=o.useState(!0),[c,g]=o.useState(1),[x,h]=o.useState(1),[y,u]=o.useState(""),[i,v]=o.useState("all"),[f,N]=o.useState("all"),[d,j]=o.useState(""),[k,M]=o.useState(""),[I,E]=o.useState(null),[C,w]=o.useState(null),$=o.useCallback(async(s=1,F=!1)=>{F||l(!0);try{const t=[];if(i==="all"||i==="ICS212"){const S=new URLSearchParams({page:s.toString(),limit:"20",sortBy:"date",sortOrder:"desc"});y&&S.set("search",y),f!=="all"&&S.set("status",f),d&&S.set("from",d),k&&S.set("to",k),t.push(fetch(`${m}/ics212/forms?${S}`).then(_=>_.ok?_.json():{forms:[]}).then(_=>_.forms.map(J=>({...J,formType:"ICS212"}))))}if(i==="all"||i==="ICS218"){const S=new URLSearchParams({limit:"20",offset:((s-1)*20).toString()});y&&S.set("incident",y),t.push(fetch(`${Z.ics218Forms}?${S}`).then(_=>_.ok?_.json():{forms:[]}).then(_=>_.forms.map(J=>({...J,formType:"ICS218"}))))}const L=(await Promise.all(t)).flat();L.sort((S,_)=>new Date(_.created_at).getTime()-new Date(S.created_at).getTime()),a(F?S=>[...S,...L]:L),h(L.length>=20?s+1:s),g(s)}catch(t){console.error("Error fetching forms:",t),D({message:"Failed to load forms",type:"error"})}finally{l(!1)}},[y,i,f,d,k]);o.useEffect(()=>{$(1,!1)},[y,i,f,d,k]);const z=async()=>{await $(1,!1)},G=()=>{c<x&&!r&&$(c+1,!0)},Y=async s=>{if(!s.pdf_url){D({message:"PDF not available",type:"error"});return}window.open(s.pdf_url,"_blank")},K=(s,F)=>{E(s),w(F)},q=s=>s==="ICS212"?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"ICS 212"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"ICS 218"}),X=s=>s==="hold"?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"ğŸ”´ HOLD"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"ğŸŸ¢ RELEASED"});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 space-y-4",children:[e.jsx("div",{children:e.jsx("input",{type:"search",placeholder:"Search by vehicle ID, incident, or inspector...",value:y,onChange:s=>u(s.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Form Type"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(p,{children:e.jsx("button",{onClick:()=>v("all"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${i==="all"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"All Forms"})}),e.jsx(p,{children:e.jsx("button",{onClick:()=>v("ICS212"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${i==="ICS212"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"ICS 212"})}),e.jsx(p,{children:e.jsx("button",{onClick:()=>v("ICS218"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${i==="ICS218"?"bg-orange-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"ICS 218"})})]})]}),(i==="all"||i==="ICS212")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status (ICS 212)"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(p,{children:e.jsx("button",{onClick:()=>N("all"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${f==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"All"})}),e.jsx(p,{children:e.jsx("button",{onClick:()=>N("hold"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${f==="hold"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"HOLD"})}),e.jsx(p,{children:e.jsx("button",{onClick:()=>N("release"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${f==="release"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"RELEASED"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"From Date"}),e.jsx("input",{type:"date",value:d,onChange:s=>j(s.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"To Date"}),e.jsx("input",{type:"date",value:k,onChange:s=>M(s.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]})]}),!r&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",n.length," form",n.length!==1?"s":""]}),e.jsx(Se,{onRefresh:z,children:e.jsxs("div",{className:"space-y-3",children:[r&&c===1?Array.from({length:5}).map((s,F)=>e.jsx(P,{type:"card"},F)):n.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No forms found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search or filter criteria"})]}):n.map(s=>e.jsx(we,{leftAction:{label:"View",color:"#3b82f6",onTrigger:()=>K(s.formType==="ICS212"?s.form_id:s.id,s.formType)},rightAction:{label:"Download",color:"#10b981",onTrigger:()=>Y(s)},children:e.jsx(p,{children:e.jsx("div",{onClick:()=>K(s.formType==="ICS212"?s.form_id:s.id,s.formType),className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[q(s.formType),s.formType==="ICS212"&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:s.vehicle_id_no}),X(s.release_decision)]}),s.formType==="ICS218"&&e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:s.incident_name})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 truncate",children:s.formType==="ICS212"?s.incident_name:s.vehicle_category}),e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-gray-500 dark:text-gray-400",children:[s.formType==="ICS212"&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:["ğŸ” ",s.inspector_name_print]}),e.jsxs("span",{children:["ğŸ“… ",new Date(s.inspector_date).toLocaleDateString()]}),s.pass_count!==void 0&&s.fail_count!==void 0&&e.jsxs("span",{children:["âœ… ",s.pass_count," / âŒ ",s.fail_count]})]}),s.formType==="ICS218"&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:["ğŸ‘¤ ",s.prepared_by_name]}),e.jsxs("span",{children:["ğŸ“… ",new Date(s.date_prepared).toLocaleDateString()]}),e.jsxs("span",{children:["ğŸš— ",s.vehicleCount," vehicle",s.vehicleCount!==1?"s":""]})]})]})]}),e.jsx("svg",{className:"w-5 h-5 text-gray-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})})},`${s.formType}-${s.id}`)),c<x&&!r&&e.jsx(p,{children:e.jsx("button",{onClick:G,className:"w-full py-3 bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 rounded-lg shadow-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Load More"})}),r&&c>1&&e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})}),I&&C&&e.jsxs(Ce,{isOpen:!!I,onClose:()=>{E(null),w(null)},title:"Form Details",children:[C==="ICS212"&&e.jsx(Ie,{formId:I}),C==="ICS218"&&e.jsx(Fe,{formId:I})]}),e.jsx(ce,{})]})}function Te(){const[n,a]=o.useState(!0),[r,l]=o.useState(null),[c,g]=o.useState(null);o.useEffect(()=>{x();const u=setInterval(x,6e4);return()=>clearInterval(u)},[]);const x=async()=>{try{const u=await fetch(`${m}/ics212/analytics`);if(u.ok){const v=await u.json();l(v)}const i=await fetch(`${Z.ics218Forms}?limit=1000`);if(i.ok){const f=(await i.json()).forms||[],N=new Date,d=N.getMonth(),j=N.getFullYear(),k=f.filter(C=>{const w=new Date(C.created_at);return w.getMonth()===d&&w.getFullYear()===j}).length,M=f.reduce((C,w)=>C+(w.vehicleCount||0),0),I={};f.forEach(C=>{const w=C.vehicle_category||"Unknown";I[w]=(I[w]||0)+1});const E=Object.entries(I).map(([C,w])=>({category:C,count:w}));g({totalForms:f.length,totalVehicles:M,formsByCategory:E,formsThisMonth:k})}}catch(u){console.error("Error fetching analytics:",u)}finally{a(!1)}};if(n)return e.jsx("div",{className:"space-y-4",children:Array.from({length:4}).map((u,i)=>e.jsx(P,{type:"card"},i))});if(!r)return e.jsx("div",{className:"text-center text-red-500 p-4",children:"Failed to load analytics"});const h=[{name:"HOLD",value:Math.round(r.holdRate),color:"#ef4444"},{name:"RELEASED",value:Math.round(r.releaseRate),color:"#10b981"}],y=[{name:"ICS 212",total:r.totalForms,thisMonth:r.formsThisMonth,color:"#3b82f6"},{name:"ICS 218",total:c?.totalForms||0,thisMonth:c?.formsThisMonth||0,color:"#f97316"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"ICS 212 Forms"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:r.totalForms})]}),e.jsx("div",{className:"text-4xl",children:"ğŸ“‹"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[r.formsThisMonth," this month"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"ICS 218 Forms"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400 mt-1",children:c?.totalForms||0})]}),e.jsx("div",{className:"text-4xl",children:"ğŸš—"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[c?.formsThisMonth||0," this month"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"HOLD Rate"}),e.jsxs("p",{className:"text-3xl font-bold text-red-600 dark:text-red-400 mt-1",children:[r.holdRate.toFixed(1),"%"]})]}),e.jsx("div",{className:"text-4xl",children:"ğŸ”´"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"ICS 212 only"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Vehicles Tracked"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-1",children:c?.totalVehicles||0})]}),e.jsx("div",{className:"text-4xl",children:"ğŸš™"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"ICS 218 vehicles"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Form Type Comparison"}),e.jsx(V,{width:"100%",height:300,children:e.jsxs(W,{data:y,children:[e.jsx(U,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(O,{dataKey:"name",stroke:"#9ca3af"}),e.jsx(B,{stroke:"#9ca3af"}),e.jsx(R,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),e.jsx(xe,{}),e.jsx(H,{dataKey:"total",fill:"#3b82f6",name:"Total Forms"}),e.jsx(H,{dataKey:"thisMonth",fill:"#10b981",name:"This Month"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"ICS 212 Release Decisions"}),e.jsx(V,{width:"100%",height:300,children:e.jsxs(he,{children:[e.jsx(ge,{data:h,cx:"50%",cy:"50%",labelLine:!1,label:({name:u,value:i})=>`${u}: ${i}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:h.map((u,i)=>e.jsx(me,{fill:u.color},`cell-${i}`))}),e.jsx(R,{})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"ICS 212 Forms Per Day (Last 30 Days)"}),e.jsx(V,{width:"100%",height:300,children:e.jsxs(ye,{data:r.formsPerDay,children:[e.jsx(U,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(O,{dataKey:"date",stroke:"#9ca3af",tick:{fontSize:12}}),e.jsx(B,{stroke:"#9ca3af"}),e.jsx(R,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),e.jsx(ue,{type:"monotone",dataKey:"count",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",r:4}})]})})]}),c&&c.formsByCategory.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"ICS 218 Vehicle Categories"}),e.jsx(V,{width:"100%",height:300,children:e.jsxs(W,{data:c.formsByCategory,layout:"horizontal",children:[e.jsx(U,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(O,{type:"number",stroke:"#9ca3af"}),e.jsx(B,{type:"category",dataKey:"category",stroke:"#9ca3af",width:100,tick:{fontSize:11}}),e.jsx(R,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),e.jsx(H,{dataKey:"count",fill:"#f97316"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top 10 Vehicles by ICS 212 Inspections"}),e.jsx(V,{width:"100%",height:300,children:e.jsxs(W,{data:r.topVehicles.slice(0,10),children:[e.jsx(U,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(O,{dataKey:"vehicleId",stroke:"#9ca3af",angle:-45,textAnchor:"end",height:80,tick:{fontSize:10}}),e.jsx(B,{stroke:"#9ca3af"}),e.jsx(R,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),e.jsx(H,{dataKey:"count",fill:"#3b82f6"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top Safety Item Failures (ICS 212)"}),e.jsx(V,{width:"100%",height:300,children:e.jsxs(W,{data:r.safetyItemFailures.slice(0,8),layout:"vertical",children:[e.jsx(U,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(O,{type:"number",stroke:"#9ca3af"}),e.jsx(B,{type:"category",dataKey:"item",stroke:"#9ca3af",width:150,tick:{fontSize:10}}),e.jsx(R,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),e.jsx(H,{dataKey:"count",fill:"#ef4444"})]})})]})]})]})}function Ee({isOpen:n,onClose:a,title:r,children:l}){return n?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:a}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(Ne,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6",children:l})]})]})}):null}function $e({isOpen:n,onClose:a,onConfirm:r,vehicleName:l,isDeleting:c}){return n?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:a}),e.jsx("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Delete Vehicle"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",e.jsx("strong",{children:l}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:a,disabled:c,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{onClick:r,disabled:c,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-4 h-4"}),"Delete"]})})]})]})})]})}):null}function Le(){const[n,a]=o.useState([]),[r,l]=o.useState(!0),[c,g]=o.useState(""),[x,h]=o.useState(!1),[y,u]=o.useState("add"),[i,v]=o.useState(null),[f,N]=o.useState(!1),[d,j]=o.useState({regUnit:"",agency:"",vehicleMake:"",vehicleType:"",incidentId:"",vehicleId:"",features:"",licenseNumber:"",notes:"",vehicleStatus:"Active"}),[k,M]=o.useState({}),[I,E]=o.useState(!1),[C,w]=o.useState(!1);o.useEffect(()=>{$()},[]);const $=async()=>{try{const t=await fetch(`${m}/vehicles`);if(!t.ok)throw new Error("Failed to fetch vehicles");const b=await t.json();a(b.vehicles||[])}catch(t){console.error("Error fetching vehicles:",t),D({message:"Failed to load vehicles",type:"error"})}finally{l(!1)}},z=()=>{j({regUnit:"",agency:"",vehicleMake:"",vehicleType:"",incidentId:"",vehicleId:"",features:"",licenseNumber:"",notes:"",vehicleStatus:"Active"}),M({})},G=()=>{z(),u("add"),v(null),h(!0)},Y=t=>{j({regUnit:t.regUnit||"",agency:t.agency||"",vehicleMake:t.vehicleMake||"",vehicleType:t.vehicleType||"",incidentId:t.incidentId||"",vehicleId:t.vehicleId||"",features:t.features||"",licenseNumber:t.licenseNumber||"",notes:t.notes||"",vehicleStatus:t.vehicleStatus||"Active"}),u("edit"),v(t),h(!0)},K=t=>{v(t),N(!0)},q=()=>{const t={};return d.regUnit.trim()?d.regUnit.length>100&&(t.regUnit="Registered Unit must be 100 characters or less"):t.regUnit="Registered Unit is required",d.vehicleMake.trim()||(t.vehicleMake="Vehicle Make is required"),[d.agency,d.vehicleType,d.incidentId,d.vehicleId,d.features,d.licenseNumber,d.notes].some(L=>L.trim())||(t.general="At least one additional field must be filled"),M(t),Object.keys(t).length===0},X=async t=>{if(t.preventDefault(),!q()){D({message:"Please fix the validation errors",type:"error"});return}E(!0);try{const b=y==="add"?`${m}/vehicles`:`${m}/vehicles/${i?.id}`,S=await fetch(b,{method:y==="add"?"POST":"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!S.ok){const _=await S.json();throw new Error(_.message||"Failed to save vehicle")}D({message:y==="add"?"Vehicle created successfully":"Vehicle updated successfully",type:"success"}),h(!1),z(),await $()}catch(b){console.error("Error saving vehicle:",b),D({message:b instanceof Error?b.message:"Failed to save vehicle",type:"error"})}finally{E(!1)}},s=async()=>{if(i){w(!0);try{const t=await fetch(`${m}/vehicles/${i.id}`,{method:"DELETE"});if(!t.ok){const b=await t.json();throw new Error(b.message||"Failed to delete vehicle")}D({message:"Vehicle deleted successfully",type:"success"}),N(!1),v(null),await $()}catch(t){console.error("Error deleting vehicle:",t),D({message:t instanceof Error?t.message:"Failed to delete vehicle",type:"error"})}finally{w(!1)}}},F=n.filter(t=>{const b=c.toLowerCase();return t.regUnit?.toLowerCase().includes(b)||t.vehicleMake?.toLowerCase().includes(b)||t.vehicleType?.toLowerCase().includes(b)||t.licenseNumber?.toLowerCase().includes(b)});return r?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((t,b)=>e.jsx(P,{type:"card"},b))}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-stretch sm:items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Vehicle Management"}),e.jsx(p,{children:e.jsxs("button",{onClick:G,className:"flex items-center justify-center gap-2 px-4 py-2 bg-[#0066FF] text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[e.jsx(ke,{className:"w-5 h-5"}),"Add New Vehicle"]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:e.jsx("input",{type:"search",placeholder:"Search vehicles by name, make, model, or license plate...",value:c,onChange:t=>g(t.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",F.length," vehicle",F.length!==1?"s":""]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:F.length===0?e.jsxs("div",{className:"col-span-full bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No vehicles found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:c?"Try a different search term":"Get started by adding a new vehicle"})]}):F.map(t=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"text-4xl",children:t.vehicleType?.toLowerCase().includes("truck")?"ğŸš›":"ğŸš—"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:t.regUnit}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.vehicleMake," ",t.vehicleType]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[t.licenseNumber&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"License:"}),e.jsx("span",{children:t.licenseNumber})]}),t.agency&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Agency:"}),e.jsx("span",{children:t.agency})]}),t.vehicleStatus&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Status:"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${t.vehicleStatus==="Active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:t.vehicleStatus})]})]}),t.notes&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 line-clamp-2",children:t.notes})}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-2",children:[e.jsx(p,{children:e.jsx("a",{href:`/?vehicle=${encodeURIComponent(t.regUnit)}`,className:"flex-1 py-2 px-4 bg-[#0066FF] text-white rounded-lg text-center text-sm font-medium hover:bg-blue-700 transition-colors",children:"ğŸ“‹ New Inspection"})}),e.jsx(p,{children:e.jsx("button",{onClick:()=>Y(t),className:"p-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:"Edit Vehicle",children:e.jsx(fe,{className:"w-4 h-4"})})}),e.jsx(p,{children:e.jsx("button",{onClick:()=>K(t),className:"p-2 border border-red-300 dark:border-red-600 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Delete Vehicle",children:e.jsx(te,{className:"w-4 h-4"})})})]})]},t.id))}),e.jsx(Ee,{isOpen:x,onClose:()=>h(!1),title:y==="add"?"Add New Vehicle":"Edit Vehicle",children:e.jsxs("form",{onSubmit:X,className:"space-y-4",children:[k.general&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm",children:k.general}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Registered Unit ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:d.regUnit,onChange:t=>j({...d,regUnit:t.target.value}),className:`w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:text-white ${k.regUnit?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., USAR-01"}),k.regUnit&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:k.regUnit})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Agency"}),e.jsx("input",{type:"text",value:d.agency,onChange:t=>j({...d,agency:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., FEMA"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Make ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:d.vehicleMake,onChange:t=>j({...d,vehicleMake:t.target.value}),className:`w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:text-white ${k.vehicleMake?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., Ford, Chevrolet, International"}),k.vehicleMake&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:k.vehicleMake})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category/Type"}),e.jsx("input",{type:"text",value:d.vehicleType,onChange:t=>j({...d,vehicleType:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., Heavy Rescue Truck, Cargo Trailer"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Incident ID"}),e.jsx("input",{type:"text",value:d.incidentId,onChange:t=>j({...d,incidentId:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., INC-2024-001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Classification"}),e.jsx("input",{type:"text",value:d.vehicleId,onChange:t=>j({...d,vehicleId:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., VEHICLE-001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Features"}),e.jsx("textarea",{value:d.features,onChange:t=>j({...d,features:t.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"Describe special features, equipment, or capabilities"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"License Number"}),e.jsx("input",{type:"text",value:d.licenseNumber,onChange:t=>j({...d,licenseNumber:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., ABC-1234"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Insurance Status"}),e.jsxs("select",{value:d.vehicleStatus,onChange:t=>j({...d,vehicleStatus:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"}),e.jsx("option",{value:"Maintenance",children:"Maintenance"}),e.jsx("option",{value:"Deployed",children:"Deployed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),e.jsx("textarea",{value:d.notes,onChange:t=>j({...d,notes:t.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"Additional notes or comments"})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),disabled:I,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:I,className:"px-4 py-2 bg-[#0066FF] text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:I?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"w-4 h-4"}),y==="add"?"Create Vehicle":"Update Vehicle"]})})]})]})}),e.jsx($e,{isOpen:f,onClose:()=>N(!1),onConfirm:s,vehicleName:i?.regUnit||"",isDeleting:C})]})}function Be(){const[n,a]=o.useState("list"),r=ne();return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("header",{className:"sticky top-0 z-50 bg-white dark:bg-gray-800 shadow-md",children:[e.jsx("div",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/taskforce-io-logo.png",alt:"TASKFORCE IO",className:"w-10 h-10 object-contain"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"TASKFORCE IO Admin"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Vehicle Safety Inspections"})]}),e.jsx(p,{children:e.jsxs("button",{onClick:()=>r("/"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",title:"Return to Home",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Home"})]})})]})}),e.jsxs("nav",{className:"flex border-t border-gray-200 dark:border-gray-700",children:[e.jsx(p,{children:e.jsx("button",{onClick:()=>a("list"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${n==="list"?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"ğŸ“‹"}),e.jsx("span",{className:"hidden sm:inline",children:"Forms"})]})})}),e.jsx(p,{children:e.jsx("button",{onClick:()=>a("analytics"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${n==="analytics"?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"ğŸ“Š"}),e.jsx("span",{className:"hidden sm:inline",children:"Analytics"})]})})}),e.jsx(p,{children:e.jsx("button",{onClick:()=>a("vehicles"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${n==="vehicles"?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"ğŸš—"}),e.jsx("span",{className:"hidden sm:inline",children:"Vehicles"})]})})})]})]}),e.jsx("main",{className:"p-4 pb-20 md:p-6 lg:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[n==="list"&&e.jsx(De,{}),n==="analytics"&&e.jsx(Te,{}),n==="vehicles"&&e.jsx(Le,{})]})})]})}export{Be as ICS212AdminDashboard};
//# sourceMappingURL=ICS212AdminDashboard-H8pD5f8N.js.map
