import{u as Xt,a as Se,j as t,m as q,R as Jt,A as bt,P as Qt,O as Zt,C as er,T as tr}from"./ui-D7Zc9tn1.js";import{r as d,G as j,a as Ar,R as Ft,u as Or}from"./vendor-B7m-6-nt.js";import{S as yt}from"./SkeletonLoader-1ZpraJm7.js";import{T as C}from"./TouchFeedback-DCDl4U_0.js";import{c as Re,s as O,z as rt}from"./index-DctzUakt.js";import{FormDetail as Mr}from"./FormDetail-D9sgy4yQ.js";import{ICS218Detail as Lr}from"./ICS218Detail-B1jtcJML.js";import{A as ie,a as Ur}from"./config-BPfxE8rv.js";import{X as vt,C as Vr,S as Hr,P as Br}from"./x-pEMQFM3T.js";import{T as He}from"./triangle-alert-D-weTLsL.js";import{C as Tt}from"./circle-check-big-C0jYMoEG.js";import{w as Wr,R as Me,P as zr,a as Kr,C as qr,T as Le,L as Yr,b as at,X as nt,Y as st,c as Gr,B as It,d as Dt}from"./charts-B6BcPGoj.js";import{D as Xr}from"./download-BhxoZfmm.js";import{T as Pt}from"./trending-up-CsQyyCC_.js";import{T as rr}from"./trash-2-Dv0Xc_3X.js";import{S as Jr}from"./save-CHy7IXMf.js";import{H as Qr}from"./house-CMV3Yf72.js";const Zr=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],ea=Re("cloud-download",Zr);const ta=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ar=Re("mail",ta);const ra=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],aa=Re("pen",ra);const na=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Rt=Re("refresh-cw",na);const sa=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],_t=Re("send",sa),la=({children:e,leftAction:r,rightAction:a,threshold:n=80,className:s=""})=>{const i=Xt(0),c=Se(i,[-n,0,n],[a?.color||"#ef4444","#ffffff",r?.color||"#10b981"]),o=(l,m)=>{const h=m.offset.x;h>n&&r?(r.onTrigger(),i.set(0)):(h<-n&&a&&a.onTrigger(),i.set(0))};return t.jsxs("div",{className:`relative overflow-hidden ${s}`,children:[t.jsxs("div",{className:"absolute inset-0 flex justify-between items-center px-6",children:[r&&t.jsxs(q.div,{className:"flex items-center gap-2 text-white font-semibold",style:{opacity:Se(i,[0,n],[0,1])},children:[r.icon&&t.jsx("span",{children:r.icon}),t.jsx("span",{children:r.label})]}),a&&t.jsxs(q.div,{className:"flex items-center gap-2 text-white font-semibold ml-auto",style:{opacity:Se(i,[-n,0],[1,0])},children:[t.jsx("span",{children:a.label}),a.icon&&t.jsx("span",{children:a.icon})]})]}),t.jsx(q.div,{drag:"x",dragConstraints:{left:a?-n*1.5:0,right:r?n*1.5:0},dragElastic:.1,onDragEnd:o,style:{x:i,backgroundColor:c},className:"relative z-10 bg-white dark:bg-gray-800 touch-pan-y",children:e})]})},ia=({children:e,onRefresh:r,threshold:a=80,className:n=""})=>{const[s,i]=d.useState(!1),c=Xt(0),o=d.useRef(null),l=Se(c,[0,a],[0,1]),m=Se(c,[0,a],[0,180]),h=async(u,p)=>{if(p.offset.y>a&&!s){i(!0);try{await r()}finally{i(!1),c.set(0)}}else c.set(0)},b=(u,p)=>{const f=o.current;f&&f.scrollTop===0&&p.offset.y>0&&c.set(Math.min(p.offset.y,a*1.5))};return t.jsxs("div",{ref:o,className:`relative overflow-auto ${n}`,children:[t.jsx(q.div,{className:"absolute top-0 left-0 right-0 flex items-center justify-center py-4 z-10",style:{opacity:l,height:Se(c,[0,a],[0,60])},children:t.jsx(q.div,{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full",style:{rotate:s?void 0:m},animate:s?{rotate:360}:{},transition:{repeat:s?1/0:0,duration:1,ease:"linear"}})}),t.jsx(q.div,{drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.1,onDrag:b,onDragEnd:h,style:{y:c},className:"touch-pan-x",children:e})]})},At=({isOpen:e,onClose:r,title:a,children:n,showHandle:s=!0,className:i=""})=>t.jsx(Jt,{open:e,onOpenChange:c=>!c&&r(),children:t.jsx(bt,{children:e&&t.jsxs(Qt,{forceMount:!0,children:[t.jsx(Zt,{asChild:!0,children:t.jsx(q.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}})}),t.jsx(er,{asChild:!0,children:t.jsxs(q.div,{className:`
                  fixed bottom-0 left-0 right-0 z-50
                  bg-white dark:bg-gray-800
                  rounded-t-3xl shadow-2xl
                  max-h-[90vh] overflow-hidden
                  ${i}
                `,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:300,damping:30},drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.2,onDragEnd:(c,o)=>{o.offset.y>100&&r()},children:[s&&t.jsx("div",{className:"flex justify-center pt-3 pb-2",children:t.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),a&&t.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:t.jsx(tr,{className:"text-xl font-bold text-gray-900 dark:text-white",children:a})}),t.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)] p-6",children:n})]})})]})})});function oa({isOpen:e,onClose:r,submission:a,onSave:n}){const[s,i]=d.useState(null),[c,o]=d.useState(!1);d.useEffect(()=>{if(a&&e){const u=typeof a.inspection_items=="string"?JSON.parse(a.inspection_items):a.inspection_items||[];i({...a,inspection_items:u})}},[a,e]);const l=d.useMemo(()=>s?.inspection_items?s.inspection_items.some(p=>p.isSafetyItem&&p.status==="fail")?"hold":"release":s?.release_decision||"release",[s?.inspection_items]),m=(u,p)=>{i(f=>({...f,[u]:p}))},h=(u,p)=>{i(f=>({...f,inspection_items:f.inspection_items.map(y=>y.itemNumber===u?{...y,status:p}:y)}))},b=async()=>{if(!(!s||!a?.form_id)){o(!0);try{const u={incident_name:s.incident_name,inspector_date:s.inspector_date,inspector_time:s.inspector_time,order_no:s.order_no,vehicle_type:s.vehicle_type,vehicle_license_no:s.vehicle_license_no,agency_reg_unit:s.agency_reg_unit,vehicle_id_no:s.vehicle_id_no,inspection_items:JSON.stringify(s.inspection_items),additional_comments:s.additional_comments,release_decision:l,inspector_name_print:s.inspector_name_print},p=await fetch(`${ie}/ics212/forms/${a.form_id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!p.ok){const f=await p.json();throw new Error(f.error||"Failed to update submission")}O({message:"Submission updated successfully",type:"success"}),n(),r()}catch(u){console.error("Error updating submission:",u),O({message:u instanceof Error?u.message:"Failed to update submission",type:"error"})}finally{o(!1)}}};return s?t.jsx(Jt,{open:e,onOpenChange:u=>!u&&r(),children:t.jsx(bt,{children:e&&t.jsxs(Qt,{forceMount:!0,children:[t.jsx(Zt,{asChild:!0,children:t.jsx(q.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}})}),t.jsx(er,{asChild:!0,children:t.jsxs(q.div,{className:"fixed inset-0 md:inset-auto md:left-1/2 md:top-1/2 md:-translate-x-1/2 md:-translate-y-1/2 z-50 w-full md:w-full md:max-w-4xl bg-white dark:bg-gray-800 md:rounded-lg shadow-xl overflow-hidden flex flex-col md:max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},children:[t.jsxs("div",{className:"flex-shrink-0 px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between bg-white dark:bg-gray-800",children:[t.jsx(tr,{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Edit ICS-212 Submission"}),t.jsx(C,{children:t.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:c,children:t.jsx(vt,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:`
                      p-4 rounded-xl border-2 flex items-center gap-3
                      ${l==="hold"?"bg-red-50 border-red-500 dark:bg-red-900/20 dark:border-red-700":"bg-green-50 border-green-500 dark:bg-green-900/20 dark:border-green-700"}
                    `,children:[l==="hold"?t.jsx(He,{className:"w-6 h-6 text-red-600 dark:text-red-400"}):t.jsx(Tt,{className:"w-6 h-6 text-green-600 dark:text-green-400"}),t.jsxs("div",{children:[t.jsx("p",{className:`font-bold text-lg ${l==="hold"?"text-red-900 dark:text-red-100":"text-green-900 dark:text-green-100"}`,children:l==="hold"?"ðŸ”´ HOLD FOR REPAIRS":"ðŸŸ¢ RELEASED"}),l==="hold"&&t.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Safety Item â€“ Do Not Release Until Repaired"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Incident Information"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Incident Name *"}),t.jsx("input",{type:"text",value:s.incident_name||"",onChange:u=>m("incident_name",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date *"}),t.jsx("input",{type:"date",value:s.inspector_date||"",onChange:u=>m("inspector_date",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Time *"}),t.jsx("input",{type:"time",value:s.inspector_time||"",onChange:u=>m("inspector_time",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Order Number"}),t.jsx("input",{type:"text",value:s.order_no||"",onChange:u=>m("order_no",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Vehicle Information"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Vehicle Type *"}),t.jsx("input",{type:"text",value:s.vehicle_type||"",onChange:u=>m("vehicle_type",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"License Number *"}),t.jsx("input",{type:"text",value:s.vehicle_license_no||"",onChange:u=>m("vehicle_license_no",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Agency Reg/Unit *"}),t.jsx("input",{type:"text",value:s.agency_reg_unit||"",onChange:u=>m("agency_reg_unit",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Vehicle ID"}),t.jsx("input",{type:"text",value:s.vehicle_id_no||"",onChange:u=>m("vehicle_id_no",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Inspection Items"}),t.jsx("div",{className:"space-y-3",children:s.inspection_items?.map(u=>t.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:t.jsxs("div",{className:"flex items-start gap-3",children:[u.isSafetyItem&&t.jsx(He,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-1"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"mb-3",children:[t.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white",children:[u.itemNumber,". ",u.description]}),u.reference&&t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:u.reference})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(C,{children:t.jsxs("button",{type:"button",onClick:()=>h(u.itemNumber,"pass"),className:`
                                        flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg
                                        font-medium transition-all border-2
                                        ${u.status==="pass"?"bg-green-500 text-white border-green-600 shadow-md":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600"}
                                      `,children:[t.jsx(Tt,{className:"w-4 h-4"}),"Pass"]})}),t.jsx(C,{children:t.jsxs("button",{type:"button",onClick:()=>h(u.itemNumber,"fail"),className:`
                                        flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg
                                        font-medium transition-all border-2
                                        ${u.status==="fail"?"bg-red-500 text-white border-red-600 shadow-md":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600"}
                                      `,children:[t.jsx(Vr,{className:"w-4 h-4"}),"Fail"]})}),t.jsx(C,{children:t.jsx("button",{type:"button",onClick:()=>h(u.itemNumber,"n/a"),className:`
                                        flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg
                                        font-medium transition-all border-2
                                        ${u.status==="n/a"?"bg-gray-400 text-white border-gray-500 shadow-md":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600"}
                                      `,children:"N/A"})})]})]})]})},u.itemNumber))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Additional Comments"}),t.jsx("textarea",{value:s.additional_comments||"",onChange:u=>m("additional_comments",u.target.value),rows:4,placeholder:"Any additional notes or observations...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white resize-none"})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Inspector Information"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Inspector Name *"}),t.jsx("input",{type:"text",value:s.inspector_name_print||"",onChange:u=>m("inspector_name_print",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.inspector_signature&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Inspector Signature (Read-only)"}),t.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-900",children:t.jsx("img",{src:s.inspector_signature,alt:"Inspector Signature",className:"max-w-xs h-auto"})})]})]})]})]})}),t.jsxs("div",{className:"flex-shrink-0 px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3 bg-white dark:bg-gray-800",children:[t.jsx(C,{children:t.jsx("button",{onClick:r,className:"px-6 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 font-medium transition-colors",disabled:c,children:"Cancel"})}),t.jsx(C,{children:t.jsxs("button",{onClick:b,className:"px-6 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:c,children:[c&&t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c?"Saving...":"Save Changes"]})})]})]})})]})})}):null}var da=Object.defineProperty,ca=(e,r,a)=>r in e?da(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,lt=(e,r,a)=>(ca(e,typeof r!="symbol"?r+"":r,a),a);let ua=class{constructor(){lt(this,"current",this.detect()),lt(this,"handoffState","pending"),lt(this,"currentId",0)}set(r){this.current!==r&&(this.handoffState="pending",this.currentId=0,this.current=r)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},ee=new ua;function _e(e){var r;return ee.isServer?null:e==null?document:(r=e?.ownerDocument)!=null?r:document}function ut(e){var r,a;return ee.isServer?null:e==null?document:(a=(r=e?.getRootNode)==null?void 0:r.call(e))!=null?a:document}function nr(e){var r,a;return(a=(r=ut(e))==null?void 0:r.activeElement)!=null?a:null}function ma(e){return nr(e)===e}function Ke(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(r=>setTimeout(()=>{throw r}))}function ce(){let e=[],r={addEventListener(a,n,s,i){return a.addEventListener(n,s,i),r.add(()=>a.removeEventListener(n,s,i))},requestAnimationFrame(...a){let n=requestAnimationFrame(...a);return r.add(()=>cancelAnimationFrame(n))},nextFrame(...a){return r.requestAnimationFrame(()=>r.requestAnimationFrame(...a))},setTimeout(...a){let n=setTimeout(...a);return r.add(()=>clearTimeout(n))},microTask(...a){let n={current:!0};return Ke(()=>{n.current&&a[0]()}),r.add(()=>{n.current=!1})},style(a,n,s){let i=a.style.getPropertyValue(n);return Object.assign(a.style,{[n]:s}),this.add(()=>{Object.assign(a.style,{[n]:i})})},group(a){let n=ce();return a(n),this.add(()=>n.dispose())},add(a){return e.includes(a)||e.push(a),()=>{let n=e.indexOf(a);if(n>=0)for(let s of e.splice(n,1))s()}},dispose(){for(let a of e.splice(0))a()}};return r}function qe(){let[e]=d.useState(ce);return d.useEffect(()=>()=>e.dispose(),[e]),e}let H=(e,r)=>{ee.isServer?d.useEffect(e,r):d.useLayoutEffect(e,r)};function je(e){let r=d.useRef(e);return H(()=>{r.current=e},[e]),r}let F=function(e){let r=je(e);return j.useCallback((...a)=>r.current(...a),[r])};function Ae(e){return d.useMemo(()=>e,Object.values(e))}let ga=d.createContext(void 0);function fa(){return d.useContext(ga)}function mt(...e){return Array.from(new Set(e.flatMap(r=>typeof r=="string"?r.split(" "):[]))).filter(Boolean).join(" ")}function de(e,r,...a){if(e in r){let s=r[e];return typeof s=="function"?s(...a):s}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(r).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,de),n}var Be=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Be||{}),me=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(me||{});function Y(){let e=xa();return d.useCallback(r=>ha({mergeRefs:e,...r}),[e])}function ha({ourProps:e,theirProps:r,slot:a,defaultTag:n,features:s,visible:i=!0,name:c,mergeRefs:o}){o=o??pa;let l=sr(r,e);if(i)return Ue(l,a,n,c,o);let m=s??0;if(m&2){let{static:h=!1,...b}=l;if(h)return Ue(b,a,n,c,o)}if(m&1){let{unmount:h=!0,...b}=l;return de(h?0:1,{0(){return null},1(){return Ue({...b,hidden:!0,style:{display:"none"}},a,n,c,o)}})}return Ue(l,a,n,c,o)}function Ue(e,r={},a,n,s){let{as:i=a,children:c,refName:o="ref",...l}=it(e,["unmount","static"]),m=e.ref!==void 0?{[o]:e.ref}:{},h=typeof c=="function"?c(r):c;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(r)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let b={};if(r){let u=!1,p=[];for(let[f,y]of Object.entries(r))typeof y=="boolean"&&(u=!0),y===!0&&p.push(f.replace(/([A-Z])/g,v=>`-${v.toLowerCase()}`));if(u){b["data-headlessui-state"]=p.join(" ");for(let f of p)b[`data-${f}`]=""}}if(Ie(i)&&(Object.keys(pe(l)).length>0||Object.keys(pe(b)).length>0))if(!d.isValidElement(h)||Array.isArray(h)&&h.length>1||ya(h)){if(Object.keys(pe(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(pe(l)).concat(Object.keys(pe(b))).map(u=>`  - ${u}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(u=>`  - ${u}`).join(`
`)].join(`
`))}else{let u=h.props,p=u?.className,f=typeof p=="function"?(...w)=>mt(p(...w),l.className):mt(p,l.className),y=f?{className:f}:{},v=sr(h.props,pe(it(l,["ref"])));for(let w in b)w in v&&delete b[w];return d.cloneElement(h,Object.assign({},v,b,m,{ref:s(ba(h),m.ref)},y))}return d.createElement(i,Object.assign({},it(l,["ref"]),!Ie(i)&&m,!Ie(i)&&b),h)}function xa(){let e=d.useRef([]),r=d.useCallback(a=>{for(let n of e.current)n!=null&&(typeof n=="function"?n(a):n.current=a)},[]);return(...a)=>{if(!a.every(n=>n==null))return e.current=a,r}}function pa(...e){return e.every(r=>r==null)?void 0:r=>{for(let a of e)a!=null&&(typeof a=="function"?a(r):a.current=r)}}function sr(...e){if(e.length===0)return{};if(e.length===1)return e[0];let r={},a={};for(let n of e)for(let s in n)s.startsWith("on")&&typeof n[s]=="function"?(a[s]!=null||(a[s]=[]),a[s].push(n[s])):r[s]=n[s];if(r.disabled||r["aria-disabled"])for(let n in a)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(a[n]=[s=>{var i;return(i=s?.preventDefault)==null?void 0:i.call(s)}]);for(let n in a)Object.assign(r,{[n](s,...i){let c=a[n];for(let o of c){if((s instanceof Event||s?.nativeEvent instanceof Event)&&s.defaultPrevented)return;o(s,...i)}}});return r}function B(e){var r;return Object.assign(d.forwardRef(e),{displayName:(r=e.displayName)!=null?r:e.name})}function pe(e){let r=Object.assign({},e);for(let a in r)r[a]===void 0&&delete r[a];return r}function it(e,r=[]){let a=Object.assign({},e);for(let n of r)n in a&&delete a[n];return a}function ba(e){return j.version.split(".")[0]>="19"?e.props.ref:e.ref}function Ie(e){return e===d.Fragment||e===Symbol.for("react.fragment")}function ya(e){return Ie(e.type)}let va="span";var We=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(We||{});function ja(e,r){var a;let{features:n=1,...s}=e,i={ref:r,"aria-hidden":(n&2)===2?!0:(a=s["aria-hidden"])!=null?a:void 0,hidden:(n&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return Y()({ourProps:i,theirProps:s,slot:{},defaultTag:va,name:"Hidden"})}let gt=B(ja);function ka(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function fe(e){return ka(e)&&"tagName"in e}function ve(e){return fe(e)&&"accessKey"in e}function ge(e){return fe(e)&&"tabIndex"in e}function wa(e){return fe(e)&&"style"in e}function Na(e){return ve(e)&&e.nodeName==="IFRAME"}function Sa(e){return ve(e)&&e.nodeName==="INPUT"}let lr=Symbol();function Ca(e,r=!0){return Object.assign(e,{[lr]:r})}function te(...e){let r=d.useRef(e);d.useEffect(()=>{r.current=e},[e]);let a=F(n=>{for(let s of r.current)s!=null&&(typeof s=="function"?s(n):s.current=n)});return e.every(n=>n==null||n?.[lr])?void 0:a}let jt=d.createContext(null);jt.displayName="DescriptionContext";function ir(){let e=d.useContext(jt);if(e===null){let r=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(r,ir),r}return e}function Ea(){let[e,r]=d.useState([]);return[e.length>0?e.join(" "):void 0,d.useMemo(()=>function(a){let n=F(i=>(r(c=>[...c,i]),()=>r(c=>{let o=c.slice(),l=o.indexOf(i);return l!==-1&&o.splice(l,1),o}))),s=d.useMemo(()=>({register:n,slot:a.slot,name:a.name,props:a.props,value:a.value}),[n,a.slot,a.name,a.props,a.value]);return j.createElement(jt.Provider,{value:s},a.children)},[r])]}let $a="p";function Fa(e,r){let a=d.useId(),n=fa(),{id:s=`headlessui-description-${a}`,...i}=e,c=ir(),o=te(r);H(()=>c.register(s),[s,c.register]);let l=Ae({...c.slot,disabled:n||!1}),m={ref:o,...c.props,id:s};return Y()({ourProps:m,theirProps:i,slot:l,defaultTag:$a,name:c.name||"Description"})}let Ta=B(Fa),Ia=Object.assign(Ta,{});var or=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(or||{});let Da=d.createContext(()=>{});function Pa({value:e,children:r}){return j.createElement(Da.Provider,{value:e},r)}let dr=class extends Map{constructor(r){super(),this.factory=r}get(r){let a=super.get(r);return a===void 0&&(a=this.factory(r),this.set(r,a)),a}};var Ra=Object.defineProperty,_a=(e,r,a)=>r in e?Ra(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,Aa=(e,r,a)=>(_a(e,r+"",a),a),cr=(e,r,a)=>{if(!r.has(e))throw TypeError("Cannot "+a)},K=(e,r,a)=>(cr(e,r,"read from private field"),a?a.call(e):r.get(e)),ot=(e,r,a)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,a)},Ot=(e,r,a,n)=>(cr(e,r,"write to private field"),r.set(e,a),a),Z,$e,Fe;let Oa=class{constructor(r){ot(this,Z,{}),ot(this,$e,new dr(()=>new Set)),ot(this,Fe,new Set),Aa(this,"disposables",ce()),Ot(this,Z,r),ee.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return K(this,Z)}subscribe(r,a){if(ee.isServer)return()=>{};let n={selector:r,callback:a,current:r(K(this,Z))};return K(this,Fe).add(n),this.disposables.add(()=>{K(this,Fe).delete(n)})}on(r,a){return ee.isServer?()=>{}:(K(this,$e).get(r).add(a),this.disposables.add(()=>{K(this,$e).get(r).delete(a)}))}send(r){let a=this.reduce(K(this,Z),r);if(a!==K(this,Z)){Ot(this,Z,a);for(let n of K(this,Fe)){let s=n.selector(K(this,Z));ur(n.current,s)||(n.current=s,n.callback(s))}for(let n of K(this,$e).get(r.type))n(K(this,Z),r)}}};Z=new WeakMap,$e=new WeakMap,Fe=new WeakMap;function ur(e,r){return Object.is(e,r)?!0:typeof e!="object"||e===null||typeof r!="object"||r===null?!1:Array.isArray(e)&&Array.isArray(r)?e.length!==r.length?!1:dt(e[Symbol.iterator](),r[Symbol.iterator]()):e instanceof Map&&r instanceof Map||e instanceof Set&&r instanceof Set?e.size!==r.size?!1:dt(e.entries(),r.entries()):Mt(e)&&Mt(r)?dt(Object.entries(e)[Symbol.iterator](),Object.entries(r)[Symbol.iterator]()):!1}function dt(e,r){do{let a=e.next(),n=r.next();if(a.done&&n.done)return!0;if(a.done||n.done||!Object.is(a.value,n.value))return!1}while(!0)}function Mt(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let r=Object.getPrototypeOf(e);return r===null||Object.getPrototypeOf(r)===null}var Ma=Object.defineProperty,La=(e,r,a)=>r in e?Ma(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,Lt=(e,r,a)=>(La(e,typeof r!="symbol"?r+"":r,a),a),Ua=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(Ua||{});let Va={0(e,r){let a=r.id,n=e.stack,s=e.stack.indexOf(a);if(s!==-1){let i=e.stack.slice();return i.splice(s,1),i.push(a),n=i,{...e,stack:n}}return{...e,stack:[...e.stack,a]}},1(e,r){let a=r.id,n=e.stack.indexOf(a);if(n===-1)return e;let s=e.stack.slice();return s.splice(n,1),{...e,stack:s}}},Ha=class mr extends Oa{constructor(){super(...arguments),Lt(this,"actions",{push:r=>this.send({type:0,id:r}),pop:r=>this.send({type:1,id:r})}),Lt(this,"selectors",{isTop:(r,a)=>r.stack[r.stack.length-1]===a,inStack:(r,a)=>r.stack.includes(a)})}static new(){return new mr({stack:[]})}reduce(r,a){return de(a.type,Va,r,a)}};const gr=new dr(()=>Ha.new());function fr(e,r,a=ur){return Wr.useSyncExternalStoreWithSelector(F(n=>e.subscribe(Ba,n)),F(()=>e.state),F(()=>e.state),F(r),a)}function Ba(e){return e}function Oe(e,r){let a=d.useId(),n=gr.get(r),[s,i]=fr(n,d.useCallback(c=>[n.selectors.isTop(c,a),n.selectors.inStack(c,a)],[n,a]));return H(()=>{if(e)return n.actions.push(a),()=>n.actions.pop(a)},[n,e,a]),e?i?s:!0:!1}let ft=new Map,De=new Map;function Ut(e){var r;let a=(r=De.get(e))!=null?r:0;return De.set(e,a+1),a!==0?()=>Vt(e):(ft.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Vt(e))}function Vt(e){var r;let a=(r=De.get(e))!=null?r:1;if(a===1?De.delete(e):De.set(e,a-1),a!==1)return;let n=ft.get(e);n&&(n["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",n["aria-hidden"]),e.inert=n.inert,ft.delete(e))}function Wa(e,{allowed:r,disallowed:a}={}){let n=Oe(e,"inert-others");H(()=>{var s,i;if(!n)return;let c=ce();for(let l of(s=a?.())!=null?s:[])l&&c.add(Ut(l));let o=(i=r?.())!=null?i:[];for(let l of o){if(!l)continue;let m=_e(l);if(!m)continue;let h=l.parentElement;for(;h&&h!==m.body;){for(let b of h.children)o.some(u=>b.contains(u))||c.add(Ut(b));h=h.parentElement}}return c.dispose},[n,r,a])}function za(e,r,a){let n=je(s=>{let i=s.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&a()});d.useEffect(()=>{if(!e)return;let s=r===null?null:ve(r)?r:r.current;if(!s)return;let i=ce();if(typeof ResizeObserver<"u"){let c=new ResizeObserver(()=>n.current(s));c.observe(s),i.add(()=>c.disconnect())}if(typeof IntersectionObserver<"u"){let c=new IntersectionObserver(()=>n.current(s));c.observe(s),i.add(()=>c.disconnect())}return()=>i.dispose()},[r,n,e])}let ze=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),Ka=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var le=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(le||{}),ht=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(ht||{}),qa=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(qa||{});function Ya(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(ze)).sort((r,a)=>Math.sign((r.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}function Ga(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Ka)).sort((r,a)=>Math.sign((r.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}var hr=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(hr||{});function Xa(e,r=0){var a;return e===((a=_e(e))==null?void 0:a.body)?!1:de(r,{0(){return e.matches(ze)},1(){let n=e;for(;n!==null;){if(n.matches(ze))return!0;n=n.parentElement}return!1}})}var Ja=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Ja||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function oe(e){e?.focus({preventScroll:!0})}let Qa=["textarea","input"].join(",");function Za(e){var r,a;return(a=(r=e?.matches)==null?void 0:r.call(e,Qa))!=null?a:!1}function en(e,r=a=>a){return e.slice().sort((a,n)=>{let s=r(a),i=r(n);if(s===null||i===null)return 0;let c=s.compareDocumentPosition(i);return c&Node.DOCUMENT_POSITION_FOLLOWING?-1:c&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Pe(e,r,{sorted:a=!0,relativeTo:n=null,skipElements:s=[]}={}){let i=Array.isArray(e)?e.length>0?ut(e[0]):document:ut(e),c=Array.isArray(e)?a?en(e):e:r&64?Ga(e):Ya(e);s.length>0&&c.length>1&&(c=c.filter(p=>!s.some(f=>f!=null&&"current"in f?f?.current===p:f===p))),n=n??i?.activeElement;let o=(()=>{if(r&5)return 1;if(r&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(r&1)return 0;if(r&2)return Math.max(0,c.indexOf(n))-1;if(r&4)return Math.max(0,c.indexOf(n))+1;if(r&8)return c.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),m=r&32?{preventScroll:!0}:{},h=0,b=c.length,u;do{if(h>=b||h+b<=0)return 0;let p=l+h;if(r&16)p=(p+b)%b;else{if(p<0)return 3;if(p>=b)return 1}u=c[p],u?.focus(m),h+=o}while(u!==nr(u));return r&6&&Za(u)&&u.select(),2}function xr(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function tn(){return/Android/gi.test(window.navigator.userAgent)}function Ht(){return xr()||tn()}function Ve(e,r,a,n){let s=je(a);d.useEffect(()=>{if(!e)return;function i(c){s.current(c)}return document.addEventListener(r,i,n),()=>document.removeEventListener(r,i,n)},[e,r,n])}function pr(e,r,a,n){let s=je(a);d.useEffect(()=>{if(!e)return;function i(c){s.current(c)}return window.addEventListener(r,i,n),()=>window.removeEventListener(r,i,n)},[e,r,n])}const Bt=30;function rn(e,r,a){let n=je(a),s=d.useCallback(function(o,l){if(o.defaultPrevented)return;let m=l(o);if(m===null||!m.getRootNode().contains(m)||!m.isConnected)return;let h=(function b(u){return typeof u=="function"?b(u()):Array.isArray(u)||u instanceof Set?u:[u]})(r);for(let b of h)if(b!==null&&(b.contains(m)||o.composed&&o.composedPath().includes(b)))return;return!Xa(m,hr.Loose)&&m.tabIndex!==-1&&o.preventDefault(),n.current(o,m)},[n,r]),i=d.useRef(null);Ve(e,"pointerdown",o=>{var l,m;Ht()||(i.current=((m=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:m[0])||o.target)},!0),Ve(e,"pointerup",o=>{if(Ht()||!i.current)return;let l=i.current;return i.current=null,s(o,()=>l)},!0);let c=d.useRef({x:0,y:0});Ve(e,"touchstart",o=>{c.current.x=o.touches[0].clientX,c.current.y=o.touches[0].clientY},!0),Ve(e,"touchend",o=>{let l={x:o.changedTouches[0].clientX,y:o.changedTouches[0].clientY};if(!(Math.abs(l.x-c.current.x)>=Bt||Math.abs(l.y-c.current.y)>=Bt))return s(o,()=>ge(o.target)?o.target:null)},!0),pr(e,"blur",o=>s(o,()=>Na(window.document.activeElement)?window.document.activeElement:null),!0)}function kt(...e){return d.useMemo(()=>_e(...e),[...e])}function br(e,r,a,n){let s=je(a);d.useEffect(()=>{e=e??window;function i(c){s.current(c)}return e.addEventListener(r,i,n),()=>e.removeEventListener(r,i,n)},[e,r,n])}function an(e){return d.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function nn(e,r){let a=e(),n=new Set;return{getSnapshot(){return a},subscribe(s){return n.add(s),()=>n.delete(s)},dispatch(s,...i){let c=r[s].call(a,...i);c&&(a=c,n.forEach(o=>o()))}}}function sn(){let e;return{before({doc:r}){var a;let n=r.documentElement,s=(a=r.defaultView)!=null?a:window;e=Math.max(0,s.innerWidth-n.clientWidth)},after({doc:r,d:a}){let n=r.documentElement,s=Math.max(0,n.clientWidth-n.offsetWidth),i=Math.max(0,e-s);a.style(n,"paddingRight",`${i}px`)}}}function ln(){return xr()?{before({doc:e,d:r,meta:a}){function n(s){for(let i of a().containers)for(let c of i())if(c.contains(s))return!0;return!1}r.microTask(()=>{var s;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let o=ce();o.style(e.documentElement,"scrollBehavior","auto"),r.add(()=>r.microTask(()=>o.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,c=null;r.addEventListener(e,"click",o=>{if(ge(o.target))try{let l=o.target.closest("a");if(!l)return;let{hash:m}=new URL(l.href),h=e.querySelector(m);ge(h)&&!n(h)&&(c=h)}catch{}},!0),r.group(o=>{r.addEventListener(e,"touchstart",l=>{if(o.dispose(),ge(l.target)&&wa(l.target))if(n(l.target)){let m=l.target;for(;m.parentElement&&n(m.parentElement);)m=m.parentElement;o.style(m,"overscrollBehavior","contain")}else o.style(l.target,"touchAction","none")})}),r.addEventListener(e,"touchmove",o=>{if(ge(o.target)){if(Sa(o.target))return;if(n(o.target)){let l=o.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&o.preventDefault()}else o.preventDefault()}},{passive:!1}),r.add(()=>{var o;let l=(o=window.scrollY)!=null?o:window.pageYOffset;i!==l&&window.scrollTo(0,i),c&&c.isConnected&&(c.scrollIntoView({block:"nearest"}),c=null)})})}}:{}}function on(){return{before({doc:e,d:r}){r.style(e.documentElement,"overflow","hidden")}}}function Wt(e){let r={};for(let a of e)Object.assign(r,a(r));return r}let ye=nn(()=>new Map,{PUSH(e,r){var a;let n=(a=this.get(e))!=null?a:{doc:e,count:0,d:ce(),meta:new Set,computedMeta:{}};return n.count++,n.meta.add(r),n.computedMeta=Wt(n.meta),this.set(e,n),this},POP(e,r){let a=this.get(e);return a&&(a.count--,a.meta.delete(r),a.computedMeta=Wt(a.meta)),this},SCROLL_PREVENT(e){let r={doc:e.doc,d:e.d,meta(){return e.computedMeta}},a=[ln(),sn(),on()];a.forEach(({before:n})=>n?.(r)),a.forEach(({after:n})=>n?.(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ye.subscribe(()=>{let e=ye.getSnapshot(),r=new Map;for(let[a]of e)r.set(a,a.documentElement.style.overflow);for(let a of e.values()){let n=r.get(a.doc)==="hidden",s=a.count!==0;(s&&!n||!s&&n)&&ye.dispatch(a.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",a),a.count===0&&ye.dispatch("TEARDOWN",a)}});function dn(e,r,a=()=>({containers:[]})){let n=an(ye),s=r?n.get(r):void 0,i=s?s.count>0:!1;return H(()=>{if(!(!r||!e))return ye.dispatch("PUSH",r,a),()=>ye.dispatch("POP",r,a)},[e,r]),i}function cn(e,r,a=()=>[document.body]){let n=Oe(e,"scroll-lock");dn(n,r,s=>{var i;return{containers:[...(i=s.containers)!=null?i:[],a]}})}function un(e=0){let[r,a]=d.useState(e),n=d.useCallback(l=>a(l),[]),s=d.useCallback(l=>a(m=>m|l),[]),i=d.useCallback(l=>(r&l)===l,[r]),c=d.useCallback(l=>a(m=>m&~l),[]),o=d.useCallback(l=>a(m=>m^l),[]);return{flags:r,setFlag:n,addFlag:s,hasFlag:i,removeFlag:c,toggleFlag:o}}var mn={},zt,Kt;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((zt=process==null?void 0:mn)==null?void 0:zt.NODE_ENV)==="test"&&typeof((Kt=Element?.prototype)==null?void 0:Kt.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var gn=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(gn||{});function fn(e){let r={};for(let a in e)e[a]===!0&&(r[`data-${a}`]="");return r}function hn(e,r,a,n){let[s,i]=d.useState(a),{hasFlag:c,addFlag:o,removeFlag:l}=un(e&&s?3:0),m=d.useRef(!1),h=d.useRef(!1),b=qe();return H(()=>{var u;if(e){if(a&&i(!0),!r){a&&o(3);return}return(u=n?.start)==null||u.call(n,a),xn(r,{inFlight:m,prepare(){h.current?h.current=!1:h.current=m.current,m.current=!0,!h.current&&(a?(o(3),l(4)):(o(4),l(2)))},run(){h.current?a?(l(3),o(4)):(l(4),o(3)):a?l(1):o(1)},done(){var p;h.current&&yn(r)||(m.current=!1,l(7),a||i(!1),(p=n?.end)==null||p.call(n,a))}})}},[e,a,r,b]),e?[s,{closed:c(1),enter:c(2),leave:c(4),transition:c(2)||c(4)}]:[a,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function xn(e,{prepare:r,run:a,done:n,inFlight:s}){let i=ce();return bn(e,{prepare:r,inFlight:s}),i.nextFrame(()=>{a(),i.requestAnimationFrame(()=>{i.add(pn(e,n))})}),i.dispose}function pn(e,r){var a,n;let s=ce();if(!e)return s.dispose;let i=!1;s.add(()=>{i=!0});let c=(n=(a=e.getAnimations)==null?void 0:a.call(e).filter(o=>o instanceof CSSTransition))!=null?n:[];return c.length===0?(r(),s.dispose):(Promise.allSettled(c.map(o=>o.finished)).then(()=>{i||r()}),s.dispose)}function bn(e,{inFlight:r,prepare:a}){if(r!=null&&r.current){a();return}let n=e.style.transition;e.style.transition="none",a(),e.offsetHeight,e.style.transition=n}function yn(e){var r,a;return((a=(r=e.getAnimations)==null?void 0:r.call(e))!=null?a:[]).some(n=>n instanceof CSSTransition&&n.playState!=="finished")}function wt(e,r){let a=d.useRef([]),n=F(e);d.useEffect(()=>{let s=[...a.current];for(let[i,c]of r.entries())if(a.current[i]!==c){let o=n(r,s);return a.current=r,o}},[n,...r])}let Ye=d.createContext(null);Ye.displayName="OpenClosedContext";var G=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(G||{});function Ge(){return d.useContext(Ye)}function vn({value:e,children:r}){return j.createElement(Ye.Provider,{value:e},r)}function jn({children:e}){return j.createElement(Ye.Provider,{value:null},e)}function kn(e){function r(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",r))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",r),r())}let ue=[];kn(()=>{function e(r){if(!ge(r.target)||r.target===document.body||ue[0]===r.target)return;let a=r.target;a=a.closest(ze),ue.unshift(a??r.target),ue=ue.filter(n=>n!=null&&n.isConnected),ue.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function yr(e){let r=F(e),a=d.useRef(!1);d.useEffect(()=>(a.current=!1,()=>{a.current=!0,Ke(()=>{a.current&&r()})}),[r])}let vr=d.createContext(!1);function wn(){return d.useContext(vr)}function qt(e){return j.createElement(vr.Provider,{value:e.force},e.children)}function Nn(e){let r=wn(),a=d.useContext(kr),[n,s]=d.useState(()=>{var i;if(!r&&a!==null)return(i=a.current)!=null?i:null;if(ee.isServer)return null;let c=e?.getElementById("headlessui-portal-root");if(c)return c;if(e===null)return null;let o=e.createElement("div");return o.setAttribute("id","headlessui-portal-root"),e.body.appendChild(o)});return d.useEffect(()=>{n!==null&&(e!=null&&e.body.contains(n)||e==null||e.body.appendChild(n))},[n,e]),d.useEffect(()=>{r||a!==null&&s(a.current)},[a,s,r]),n}let jr=d.Fragment,Sn=B(function(e,r){let{ownerDocument:a=null,...n}=e,s=d.useRef(null),i=te(Ca(u=>{s.current=u}),r),c=kt(s.current),o=a??c,l=Nn(o),m=d.useContext(xt),h=qe(),b=Y();return yr(()=>{var u;l&&l.childNodes.length<=0&&((u=l.parentElement)==null||u.removeChild(l))}),l?Ar.createPortal(j.createElement("div",{"data-headlessui-portal":"",ref:u=>{h.dispose(),m&&u&&h.add(m.register(u))}},b({ourProps:{ref:i},theirProps:n,slot:{},defaultTag:jr,name:"Portal"})),l):null});function Cn(e,r){let a=te(r),{enabled:n=!0,ownerDocument:s,...i}=e,c=Y();return n?j.createElement(Sn,{...i,ownerDocument:s,ref:a}):c({ourProps:{ref:a},theirProps:i,slot:{},defaultTag:jr,name:"Portal"})}let En=d.Fragment,kr=d.createContext(null);function $n(e,r){let{target:a,...n}=e,s={ref:te(r)},i=Y();return j.createElement(kr.Provider,{value:a},i({ourProps:s,theirProps:n,defaultTag:En,name:"Popover.Group"}))}let xt=d.createContext(null);function Fn(){let e=d.useContext(xt),r=d.useRef([]),a=F(i=>(r.current.push(i),e&&e.register(i),()=>n(i))),n=F(i=>{let c=r.current.indexOf(i);c!==-1&&r.current.splice(c,1),e&&e.unregister(i)}),s=d.useMemo(()=>({register:a,unregister:n,portals:r}),[a,n,r]);return[r,d.useMemo(()=>function({children:i}){return j.createElement(xt.Provider,{value:s},i)},[s])]}let Tn=B(Cn),wr=B($n),In=Object.assign(Tn,{Group:wr});function Dn(e,r=typeof document<"u"?document.defaultView:null,a){let n=Oe(e,"escape");br(r,"keydown",s=>{n&&(s.defaultPrevented||s.key===or.Escape&&a(s))})}function Pn(){var e;let[r]=d.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[a,n]=d.useState((e=r?.matches)!=null?e:!1);return H(()=>{if(!r)return;function s(i){n(i.matches)}return r.addEventListener("change",s),()=>r.removeEventListener("change",s)},[r]),a}function Rn({defaultContainers:e=[],portals:r,mainTreeNode:a}={}){let n=F(()=>{var s,i;let c=_e(a),o=[];for(let l of e)l!==null&&(fe(l)?o.push(l):"current"in l&&fe(l.current)&&o.push(l.current));if(r!=null&&r.current)for(let l of r.current)o.push(l);for(let l of(s=c?.querySelectorAll("html > *, body > *"))!=null?s:[])l!==document.body&&l!==document.head&&fe(l)&&l.id!=="headlessui-portal-root"&&(a&&(l.contains(a)||l.contains((i=a?.getRootNode())==null?void 0:i.host))||o.some(m=>l.contains(m))||o.push(l));return o});return{resolveContainers:n,contains:F(s=>n().some(i=>i.contains(s)))}}let Nr=d.createContext(null);function Yt({children:e,node:r}){let[a,n]=d.useState(null),s=Sr(r??a);return j.createElement(Nr.Provider,{value:s},e,s===null&&j.createElement(gt,{features:We.Hidden,ref:i=>{var c,o;if(i){for(let l of(o=(c=_e(i))==null?void 0:c.querySelectorAll("html > *, body > *"))!=null?o:[])if(l!==document.body&&l!==document.head&&fe(l)&&l!=null&&l.contains(i)){n(l);break}}}}))}function Sr(e=null){var r;return(r=d.useContext(Nr))!=null?r:e}function _n(){let e=typeof document>"u";return"useSyncExternalStore"in Ft?(r=>r.useSyncExternalStore)(Ft)(()=>()=>{},()=>!1,()=>!e):!1}function Xe(){let e=_n(),[r,a]=d.useState(ee.isHandoffComplete);return r&&ee.isHandoffComplete===!1&&a(!1),d.useEffect(()=>{r!==!0&&a(!0)},[r]),d.useEffect(()=>ee.handoff(),[]),e?!1:r}function Nt(){let e=d.useRef(!1);return H(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Te=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Te||{});function An(){let e=d.useRef(0);return pr(!0,"keydown",r=>{r.key==="Tab"&&(e.current=r.shiftKey?1:0)},!0),e}function Cr(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let r=new Set;for(let a of e.current)fe(a.current)&&r.add(a.current);return r}let On="div";var be=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(be||{});function Mn(e,r){let a=d.useRef(null),n=te(a,r),{initialFocus:s,initialFocusFallback:i,containers:c,features:o=15,...l}=e;Xe()||(o=0);let m=kt(a.current);Hn(o,{ownerDocument:m});let h=Bn(o,{ownerDocument:m,container:a,initialFocus:s,initialFocusFallback:i});Wn(o,{ownerDocument:m,container:a,containers:c,previousActiveElement:h});let b=An(),u=F(k=>{if(!ve(a.current))return;let N=a.current;(E=>E())(()=>{de(b.current,{[Te.Forwards]:()=>{Pe(N,le.First,{skipElements:[k.relatedTarget,i]})},[Te.Backwards]:()=>{Pe(N,le.Last,{skipElements:[k.relatedTarget,i]})}})})}),p=Oe(!!(o&2),"focus-trap#tab-lock"),f=qe(),y=d.useRef(!1),v={ref:n,onKeyDown(k){k.key=="Tab"&&(y.current=!0,f.requestAnimationFrame(()=>{y.current=!1}))},onBlur(k){if(!(o&4))return;let N=Cr(c);ve(a.current)&&N.add(a.current);let E=k.relatedTarget;ge(E)&&E.dataset.headlessuiFocusGuard!=="true"&&(Er(N,E)||(y.current?Pe(a.current,de(b.current,{[Te.Forwards]:()=>le.Next,[Te.Backwards]:()=>le.Previous})|le.WrapAround,{relativeTo:k.target}):ge(k.target)&&oe(k.target)))}},w=Y();return j.createElement(j.Fragment,null,p&&j.createElement(gt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:We.Focusable}),w({ourProps:v,theirProps:l,defaultTag:On,name:"FocusTrap"}),p&&j.createElement(gt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:We.Focusable}))}let Ln=B(Mn),Un=Object.assign(Ln,{features:be});function Vn(e=!0){let r=d.useRef(ue.slice());return wt(([a],[n])=>{n===!0&&a===!1&&Ke(()=>{r.current.splice(0)}),n===!1&&a===!0&&(r.current=ue.slice())},[e,ue,r]),F(()=>{var a;return(a=r.current.find(n=>n!=null&&n.isConnected))!=null?a:null})}function Hn(e,{ownerDocument:r}){let a=!!(e&8),n=Vn(a);wt(()=>{a||ma(r?.body)&&oe(n())},[a]),yr(()=>{a&&oe(n())})}function Bn(e,{ownerDocument:r,container:a,initialFocus:n,initialFocusFallback:s}){let i=d.useRef(null),c=Oe(!!(e&1),"focus-trap#initial-focus"),o=Nt();return wt(()=>{if(e===0)return;if(!c){s!=null&&s.current&&oe(s.current);return}let l=a.current;l&&Ke(()=>{if(!o.current)return;let m=r?.activeElement;if(n!=null&&n.current){if(n?.current===m){i.current=m;return}}else if(l.contains(m)){i.current=m;return}if(n!=null&&n.current)oe(n.current);else{if(e&16){if(Pe(l,le.First|le.AutoFocus)!==ht.Error)return}else if(Pe(l,le.First)!==ht.Error)return;if(s!=null&&s.current&&(oe(s.current),r?.activeElement===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=r?.activeElement})},[s,c,e]),i}function Wn(e,{ownerDocument:r,container:a,containers:n,previousActiveElement:s}){let i=Nt(),c=!!(e&4);br(r?.defaultView,"focus",o=>{if(!c||!i.current)return;let l=Cr(n);ve(a.current)&&l.add(a.current);let m=s.current;if(!m)return;let h=o.target;ve(h)?Er(l,h)?(s.current=h,oe(h)):(o.preventDefault(),o.stopPropagation(),oe(m)):oe(s.current)},!0)}function Er(e,r){for(let a of e)if(a.contains(r))return!0;return!1}function $r(e){var r;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Ie((r=e.as)!=null?r:Tr)||j.Children.count(e.children)===1}let Je=d.createContext(null);Je.displayName="TransitionContext";var zn=(e=>(e.Visible="visible",e.Hidden="hidden",e))(zn||{});function Kn(){let e=d.useContext(Je);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function qn(){let e=d.useContext(Qe);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Qe=d.createContext(null);Qe.displayName="NestingContext";function Ze(e){return"children"in e?Ze(e.children):e.current.filter(({el:r})=>r.current!==null).filter(({state:r})=>r==="visible").length>0}function Fr(e,r){let a=je(e),n=d.useRef([]),s=Nt(),i=qe(),c=F((p,f=me.Hidden)=>{let y=n.current.findIndex(({el:v})=>v===p);y!==-1&&(de(f,{[me.Unmount](){n.current.splice(y,1)},[me.Hidden](){n.current[y].state="hidden"}}),i.microTask(()=>{var v;!Ze(n)&&s.current&&((v=a.current)==null||v.call(a))}))}),o=F(p=>{let f=n.current.find(({el:y})=>y===p);return f?f.state!=="visible"&&(f.state="visible"):n.current.push({el:p,state:"visible"}),()=>c(p,me.Unmount)}),l=d.useRef([]),m=d.useRef(Promise.resolve()),h=d.useRef({enter:[],leave:[]}),b=F((p,f,y)=>{l.current.splice(0),r&&(r.chains.current[f]=r.chains.current[f].filter(([v])=>v!==p)),r?.chains.current[f].push([p,new Promise(v=>{l.current.push(v)})]),r?.chains.current[f].push([p,new Promise(v=>{Promise.all(h.current[f].map(([w,k])=>k)).then(()=>v())})]),f==="enter"?m.current=m.current.then(()=>r?.wait.current).then(()=>y(f)):y(f)}),u=F((p,f,y)=>{Promise.all(h.current[f].splice(0).map(([v,w])=>w)).then(()=>{var v;(v=l.current.shift())==null||v()}).then(()=>y(f))});return d.useMemo(()=>({children:n,register:o,unregister:c,onStart:b,onStop:u,wait:m,chains:h}),[o,c,n,b,u,h,m])}let Tr=d.Fragment,Ir=Be.RenderStrategy;function Yn(e,r){var a,n;let{transition:s=!0,beforeEnter:i,afterEnter:c,beforeLeave:o,afterLeave:l,enter:m,enterFrom:h,enterTo:b,entered:u,leave:p,leaveFrom:f,leaveTo:y,...v}=e,[w,k]=d.useState(null),N=d.useRef(null),E=$r(e),M=te(...E?[N,r,k]:r===null?[]:[r]),_=(a=v.unmount)==null||a?me.Unmount:me.Hidden,{show:P,appear:re,initial:ae}=Kn(),[D,z]=d.useState(P?"visible":"hidden"),I=qn(),{register:R,unregister:L}=I;H(()=>R(N),[R,N]),H(()=>{if(_===me.Hidden&&N.current){if(P&&D!=="visible"){z("visible");return}return de(D,{hidden:()=>L(N),visible:()=>R(N)})}},[D,N,R,L,P,_]);let x=Xe();H(()=>{if(E&&x&&D==="visible"&&N.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[N,D,x,E]);let T=ae&&!re,X=re&&P&&ae,A=d.useRef(!1),J=Fr(()=>{A.current||(z("hidden"),L(N))},I),ke=F(Ce=>{A.current=!0;let ne=Ce?"enter":"leave";J.onStart(N,ne,xe=>{xe==="enter"?i?.():xe==="leave"&&o?.()})}),Q=F(Ce=>{let ne=Ce?"enter":"leave";A.current=!1,J.onStop(N,ne,xe=>{xe==="enter"?c?.():xe==="leave"&&l?.()}),ne==="leave"&&!Ze(J)&&(z("hidden"),L(N))});d.useEffect(()=>{E&&s||(ke(P),Q(P))},[P,E,s]);let we=!(!s||!E||!x||T),[,S]=hn(we,w,P,{start:ke,end:Q}),Ne=pe({ref:M,className:((n=mt(v.className,X&&m,X&&h,S.enter&&m,S.enter&&S.closed&&h,S.enter&&!S.closed&&b,S.leave&&p,S.leave&&!S.closed&&f,S.leave&&S.closed&&y,!S.transition&&P&&u))==null?void 0:n.trim())||void 0,...fn(S)}),he=0;D==="visible"&&(he|=G.Open),D==="hidden"&&(he|=G.Closed),P&&D==="hidden"&&(he|=G.Opening),!P&&D==="visible"&&(he|=G.Closing);let tt=Y();return j.createElement(Qe.Provider,{value:J},j.createElement(vn,{value:he},tt({ourProps:Ne,theirProps:v,defaultTag:Tr,features:Ir,visible:D==="visible",name:"Transition.Child"})))}function Gn(e,r){let{show:a,appear:n=!1,unmount:s=!0,...i}=e,c=d.useRef(null),o=$r(e),l=te(...o?[c,r]:r===null?[]:[r]);Xe();let m=Ge();if(a===void 0&&m!==null&&(a=(m&G.Open)===G.Open),a===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[h,b]=d.useState(a?"visible":"hidden"),u=Fr(()=>{a||b("hidden")}),[p,f]=d.useState(!0),y=d.useRef([a]);H(()=>{p!==!1&&y.current[y.current.length-1]!==a&&(y.current.push(a),f(!1))},[y,a]);let v=d.useMemo(()=>({show:a,appear:n,initial:p}),[a,n,p]);H(()=>{a?b("visible"):!Ze(u)&&c.current!==null&&b("hidden")},[a,u]);let w={unmount:s},k=F(()=>{var M;p&&f(!1),(M=e.beforeEnter)==null||M.call(e)}),N=F(()=>{var M;p&&f(!1),(M=e.beforeLeave)==null||M.call(e)}),E=Y();return j.createElement(Qe.Provider,{value:u},j.createElement(Je.Provider,{value:v},E({ourProps:{...w,as:d.Fragment,children:j.createElement(Dr,{ref:l,...w,...i,beforeEnter:k,beforeLeave:N})},theirProps:{},defaultTag:d.Fragment,features:Ir,visible:h==="visible",name:"Transition"})))}function Xn(e,r){let a=d.useContext(Je)!==null,n=Ge()!==null;return j.createElement(j.Fragment,null,!a&&n?j.createElement(pt,{ref:r,...e}):j.createElement(Dr,{ref:r,...e}))}let pt=B(Gn),Dr=B(Yn),St=B(Xn),Jn=Object.assign(pt,{Child:St,Root:pt});var Qn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Qn||{}),Zn=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Zn||{});let es={0(e,r){return e.titleId===r.id?e:{...e,titleId:r.id}}},Ct=d.createContext(null);Ct.displayName="DialogContext";function et(e){let r=d.useContext(Ct);if(r===null){let a=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,et),a}return r}function ts(e,r){return de(r.type,es,e,r)}let Gt=B(function(e,r){let a=d.useId(),{id:n=`headlessui-dialog-${a}`,open:s,onClose:i,initialFocus:c,role:o="dialog",autoFocus:l=!0,__demoMode:m=!1,unmount:h=!1,...b}=e,u=d.useRef(!1);o=(function(){return o==="dialog"||o==="alertdialog"?o:(u.current||(u.current=!0,console.warn(`Invalid role [${o}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let p=Ge();s===void 0&&p!==null&&(s=(p&G.Open)===G.Open);let f=d.useRef(null),y=te(f,r),v=kt(f.current),w=s?0:1,[k,N]=d.useReducer(ts,{titleId:null,descriptionId:null,panelRef:d.createRef()}),E=F(()=>i(!1)),M=F(S=>N({type:0,id:S})),_=Xe()?w===0:!1,[P,re]=Fn(),ae={get current(){var S;return(S=k.panelRef.current)!=null?S:f.current}},D=Sr(),{resolveContainers:z}=Rn({mainTreeNode:D,portals:P,defaultContainers:[ae]}),I=p!==null?(p&G.Closing)===G.Closing:!1;Wa(m||I?!1:_,{allowed:F(()=>{var S,Ne;return[(Ne=(S=f.current)==null?void 0:S.closest("[data-headlessui-portal]"))!=null?Ne:null]}),disallowed:F(()=>{var S;return[(S=D?.closest("body > *:not(#headlessui-portal-root)"))!=null?S:null]})});let R=gr.get(null);H(()=>{if(_)return R.actions.push(n),()=>R.actions.pop(n)},[R,n,_]);let L=fr(R,d.useCallback(S=>R.selectors.isTop(S,n),[R,n]));rn(L,z,S=>{S.preventDefault(),E()}),Dn(L,v?.defaultView,S=>{S.preventDefault(),S.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),E()}),cn(m||I?!1:_,v,z),za(_,f,E);let[x,T]=Ea(),X=d.useMemo(()=>[{dialogState:w,close:E,setTitleId:M,unmount:h},k],[w,E,M,h,k]),A=Ae({open:w===0}),J={ref:y,id:n,role:o,tabIndex:-1,"aria-modal":m?void 0:w===0?!0:void 0,"aria-labelledby":k.titleId,"aria-describedby":x,unmount:h},ke=!Pn(),Q=be.None;_&&!m&&(Q|=be.RestoreFocus,Q|=be.TabLock,l&&(Q|=be.AutoFocus),ke&&(Q|=be.InitialFocus));let we=Y();return j.createElement(jn,null,j.createElement(qt,{force:!0},j.createElement(In,null,j.createElement(Ct.Provider,{value:X},j.createElement(wr,{target:f},j.createElement(qt,{force:!1},j.createElement(T,{slot:A},j.createElement(re,null,j.createElement(Un,{initialFocus:c,initialFocusFallback:f,containers:z,features:Q},j.createElement(Pa,{value:E},we({ourProps:J,theirProps:b,slot:A,defaultTag:rs,features:as,visible:w===0,name:"Dialog"})))))))))))}),rs="div",as=Be.RenderStrategy|Be.Static;function ns(e,r){let{transition:a=!1,open:n,...s}=e,i=Ge(),c=e.hasOwnProperty("open")||i!==null,o=e.hasOwnProperty("onClose");if(!c&&!o)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!c)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!o)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(n!==void 0||a)&&!s.static?j.createElement(Yt,null,j.createElement(Jn,{show:n,transition:a,unmount:s.unmount},j.createElement(Gt,{ref:r,...s}))):j.createElement(Yt,null,j.createElement(Gt,{ref:r,open:n,...s}))}let ss="div";function ls(e,r){let a=d.useId(),{id:n=`headlessui-dialog-panel-${a}`,transition:s=!1,...i}=e,[{dialogState:c,unmount:o},l]=et("Dialog.Panel"),m=te(r,l.panelRef),h=Ae({open:c===0}),b=F(v=>{v.stopPropagation()}),u={ref:m,id:n,onClick:b},p=s?St:d.Fragment,f=s?{unmount:o}:{},y=Y();return j.createElement(p,{...f},y({ourProps:u,theirProps:i,slot:h,defaultTag:ss,name:"Dialog.Panel"}))}let is="div";function os(e,r){let{transition:a=!1,...n}=e,[{dialogState:s,unmount:i}]=et("Dialog.Backdrop"),c=Ae({open:s===0}),o={ref:r,"aria-hidden":!0},l=a?St:d.Fragment,m=a?{unmount:i}:{},h=Y();return j.createElement(l,{...m},h({ourProps:o,theirProps:n,slot:c,defaultTag:is,name:"Dialog.Backdrop"}))}let ds="h2";function cs(e,r){let a=d.useId(),{id:n=`headlessui-dialog-title-${a}`,...s}=e,[{dialogState:i,setTitleId:c}]=et("Dialog.Title"),o=te(r);d.useEffect(()=>(c(n),()=>c(null)),[n,c]);let l=Ae({open:i===0}),m={ref:o,id:n};return Y()({ourProps:m,theirProps:s,slot:l,defaultTag:ds,name:"Dialog.Title"})}let us=B(ns),ms=B(ls);B(os);let gs=B(cs),ct=Object.assign(us,{Panel:ms,Title:gs,Description:Ia});function fs({isOpen:e,onClose:r,selectedForms:a,onSuccess:n}){const[s,i]=d.useState(!1),[c,o]=d.useState(!1),[l,m]=d.useState(!0),[h,b]=d.useState(""),[u,p]=d.useState(`ICS-212 Forms - ${a.length} Inspection${a.length>1?"s":""}`),[f,y]=d.useState(""),v=async()=>{const w=h.split(",").map(k=>k.trim()).filter(k=>k&&k.includes("@"));if(!c&&!l&&w.length===0){rt.error("Please specify at least one recipient");return}i(!0);try{const k=await fetch(`${ie}/api/ics212/forms/batch-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formIds:a.map(E=>E.form_id),recipientOptions:{sendToInspectors:c,sendToAdmins:l,customRecipients:w},emailTemplate:{subject:u,body:f||void 0}})}),N=await k.json();if(!k.ok)throw new Error(N.error||"Failed to send email");rt.success(`Email sent successfully to ${N.recipients} recipient(s)!`),n(),r()}catch(k){console.error("Email send error:",k),rt.error(k.message||"Failed to send email")}finally{i(!1)}};return t.jsx(bt,{children:e&&t.jsxs(ct,{static:!0,open:e,onClose:r,className:"relative z-50",children:[t.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50"}),t.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:t.jsxs(ct.Panel,{as:q.div,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-lg shadow-xl overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ar,{className:"w-6 h-6 text-blue-600"}),t.jsx(ct.Title,{className:"text-xl font-semibold",children:"Email ICS-212 Forms"})]}),t.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:t.jsx(vt,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"px-6 py-4 max-h-[70vh] overflow-y-auto space-y-4",children:[t.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:t.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[a.length," form",a.length>1?"s":""," will be emailed as PDF attachments"]})}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Recipients"}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:c,onChange:w=>o(w.target.checked),className:"w-4 h-4 rounded border-gray-300"}),t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Send to Inspectors (if email available)"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:l,onChange:w=>m(w.target.checked),className:"w-4 h-4 rounded border-gray-300"}),t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Send to Admins"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional Recipients (comma-separated)"}),t.jsx("input",{type:"text",value:h,onChange:w=>b(w.target.value),placeholder:"email1@example.com, email2@example.com",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subject"}),t.jsx("input",{type:"text",value:u,onChange:w=>p(w.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Custom Message (Optional)"}),t.jsx("textarea",{value:f,onChange:w=>y(w.target.value),placeholder:"Leave blank to use default template",rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"If left blank, a professional template with form details will be used"})]})]}),t.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[t.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",disabled:s,children:"Cancel"}),t.jsx("button",{onClick:v,disabled:s,className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:s?t.jsxs(t.Fragment,{children:[t.jsx(_t,{className:"w-4 h-4 animate-pulse"}),"Sending..."]}):t.jsxs(t.Fragment,{children:[t.jsx(_t,{className:"w-4 h-4"}),"Send Email"]})})]})]})})]})})}function hs(){const[e,r]=d.useState([]),[a,n]=d.useState(!0),[s,i]=d.useState(1),[c,o]=d.useState(1),[l,m]=d.useState(""),[h,b]=d.useState("all"),[u,p]=d.useState("all"),[f,y]=d.useState(""),[v,w]=d.useState(""),[k,N]=d.useState(null),[E,M]=d.useState(null),[_,P]=d.useState(!1),[re,ae]=d.useState(null),[D,z]=d.useState(null),[I,R]=d.useState([]),[L,x]=d.useState(!1),[T,X]=d.useState(!1),A=d.useCallback(async(g=1,$=!1)=>{$||n(!0);try{const W=[];if(h==="all"||h==="ICS212"){const U=new URLSearchParams({page:g.toString(),limit:"20",sortBy:"date",sortOrder:"desc"});l&&U.set("search",l),u!=="all"&&U.set("status",u),f&&U.set("from",f),v&&U.set("to",v),W.push(fetch(`${ie}/ics212/forms?${U}`).then(V=>V.ok?V.json():{forms:[]}).then(V=>V.forms.map(se=>({...se,formType:"ICS212"}))))}if(h==="all"||h==="ICS218"){const U=new URLSearchParams({limit:"20",offset:((g-1)*20).toString()});l&&U.set("incident",l),W.push(fetch(`${Ur.ics218Forms}?${U}`).then(V=>V.ok?V.json():{forms:[]}).then(V=>V.forms.map(se=>({...se,formType:"ICS218"}))))}const Ee=(await Promise.all(W)).flat();Ee.sort((U,V)=>new Date(V.created_at).getTime()-new Date(U.created_at).getTime()),r($?U=>[...U,...Ee]:Ee),o(Ee.length>=20?g+1:g),i(g)}catch(W){console.error("Error fetching forms:",W),O({message:"Failed to load forms",type:"error"})}finally{n(!1)}},[l,h,u,f,v]);d.useEffect(()=>{A(1,!1)},[l,h,u,f,v]);const J=async()=>{await A(1,!1)},ke=()=>{s<c&&!a&&A(s+1,!0)},Q=async g=>{if(!g.pdf_url){O({message:"PDF not available",type:"error"});return}window.open(g.pdf_url,"_blank")},we=(g,$)=>{N(g),M($)},S=g=>{ae(g),P(!0)},Ne=async g=>{z(g);try{const $=await fetch(`${ie}/ics212/forms/${g}/regenerate-pdf`,{method:"POST"});if(!$.ok){const W=await $.json();throw new Error(W.error||"Failed to regenerate PDF")}O({message:"PDF regenerated successfully",type:"success"}),await A(1,!1)}catch($){console.error("Error regenerating PDF:",$),O({message:$ instanceof Error?$.message:"Failed to regenerate PDF",type:"error"})}finally{z(null)}},he=async()=>{await A(1,!1)},tt=g=>{R($=>$.includes(g)?$.filter(W=>W!==g):[...$,g])},Ce=()=>{const g=e.filter($=>$.formType==="ICS212").map($=>$.form_id);g.length>50?(O({message:"Maximum 50 forms can be downloaded at once. First 50 selected.",type:"warning"}),R(g.slice(0,50))):R(g)},ne=()=>{R([])},xe=async()=>{if(I.length!==0){x(!0);try{const g=await fetch(`${ie}/ics212/forms/batch-download`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formIds:I})});if(!g.ok){const _r=await g.json();throw new Error(_r.error||"Failed to download forms")}const $=g.headers.get("X-Success-Count"),W=g.headers.get("X-Failure-Count"),Et=await g.blob(),U=g.headers.get("Content-Disposition")?.split("filename=")[1]?.replace(/"/g,"")||"ICS212_Forms.zip",V=window.URL.createObjectURL(Et),se=document.createElement("a");se.href=V,se.download=U,document.body.appendChild(se),se.click(),document.body.removeChild(se),window.URL.revokeObjectURL(V);let $t=`Downloaded ${$||I.length} forms`;W&&parseInt(W)>0&&($t+=` (${W} PDFs not available)`),O({message:$t,type:"success"}),ne()}catch(g){console.error("Batch download error:",g),O({message:g instanceof Error?g.message:"Failed to download forms",type:"error"})}finally{x(!1)}}},Pr=g=>g==="ICS212"?t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"ICS 212"}):t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"ICS 218"}),Rr=g=>g==="hold"?t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"ðŸ”´ HOLD"}):t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"ðŸŸ¢ RELEASED"});return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 space-y-4",children:[t.jsx("div",{children:t.jsx("input",{type:"search",placeholder:"Search by vehicle ID, incident, or inspector...",value:l,onChange:g=>m(g.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Form Type"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(C,{children:t.jsx("button",{onClick:()=>b("all"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${h==="all"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"All Forms"})}),t.jsx(C,{children:t.jsx("button",{onClick:()=>b("ICS212"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${h==="ICS212"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"ICS 212"})}),t.jsx(C,{children:t.jsx("button",{onClick:()=>b("ICS218"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${h==="ICS218"?"bg-orange-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"ICS 218"})})]})]}),(h==="all"||h==="ICS212")&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status (ICS 212)"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(C,{children:t.jsx("button",{onClick:()=>p("all"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${u==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"All"})}),t.jsx(C,{children:t.jsx("button",{onClick:()=>p("hold"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${u==="hold"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"HOLD"})}),t.jsx(C,{children:t.jsx("button",{onClick:()=>p("release"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${u==="release"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"RELEASED"})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"From Date"}),t.jsx("input",{type:"date",value:f,onChange:g=>y(g.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"To Date"}),t.jsx("input",{type:"date",value:v,onChange:g=>w(g.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]})]}),I.length>0&&t.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg shadow-sm p-4",children:t.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[I.length," form",I.length>1?"s":""," selected"]}),t.jsx(C,{children:t.jsx("button",{onClick:ne,className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Clear Selection"})})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(C,{children:t.jsx("button",{onClick:xe,disabled:L,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium text-sm",children:L?t.jsxs(t.Fragment,{children:[t.jsx(Rt,{className:"w-4 h-4 animate-spin"}),"Downloading..."]}):t.jsxs(t.Fragment,{children:[t.jsx(ea,{className:"w-4 h-4"}),"Download Selected (",I.length,")"]})})}),t.jsx(C,{children:t.jsxs("button",{onClick:()=>{if(I.length>10){O({message:"Maximum 10 forms can be emailed at once",type:"warning"});return}X(!0)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium text-sm",children:[t.jsx(ar,{className:"w-4 h-4"}),"Email Selected (",I.length,")"]})})]})]})}),!a&&e.filter(g=>g.formType==="ICS212").length>0&&t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-3",children:t.jsx(C,{children:t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:I.length>0&&I.length===e.filter(g=>g.formType==="ICS212").length,onChange:g=>g.target.checked?Ce():ne(),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 disabled:opacity-50"}),t.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Select All ICS-212 Forms (",e.filter(g=>g.formType==="ICS212").length,")"]})]})})}),!a&&t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",e.length," form",e.length!==1?"s":""]}),t.jsx(ia,{onRefresh:J,children:t.jsx("div",{className:"space-y-3",children:a&&s===1?Array.from({length:5}).map((g,$)=>t.jsx(yt,{type:"card"},$)):e.length===0?t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[t.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No forms found"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search or filter criteria"})]}):e.map(g=>t.jsx(la,{leftAction:{label:"View",color:"#3b82f6",onTrigger:()=>we(g.formType==="ICS212"?g.form_id:g.id,g.formType)},rightAction:{label:"Download",color:"#10b981",onTrigger:()=>Q(g)},children:t.jsx(C,{children:t.jsx("div",{onClick:()=>we(g.formType==="ICS212"?g.form_id:g.id,g.formType),className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 cursor-pointer hover:shadow-md transition-shadow",children:t.jsxs("div",{className:"flex items-start gap-3",children:[g.formType==="ICS212"&&t.jsx("div",{className:"flex-shrink-0 pt-1",onClick:$=>$.stopPropagation(),children:t.jsx(C,{children:t.jsx("input",{type:"checkbox",checked:I.includes(g.form_id),onChange:()=>tt(g.form_id),className:"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[Pr(g.formType),g.formType==="ICS212"&&t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:g.vehicle_type}),Rr(g.release_decision)]}),g.formType==="ICS218"&&t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:g.incident_name})]}),g.formType==="ICS212"&&t.jsxs("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["ðŸ“… ",new Date(g.inspector_date).toLocaleDateString()," at ",g.inspector_time,t.jsxs("span",{className:"ml-2 text-gray-500 dark:text-gray-400",children:["â€¢ ID: ",g.vehicle_id_no]})]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 truncate",children:g.formType==="ICS212"?g.incident_name:g.vehicle_category}),t.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-gray-500 dark:text-gray-400",children:[g.formType==="ICS212"&&t.jsxs(t.Fragment,{children:[t.jsxs("span",{children:["ðŸ” ",g.inspector_name_print]}),g.pass_count!==void 0&&g.fail_count!==void 0&&t.jsxs("span",{children:["âœ… ",g.pass_count," / âŒ ",g.fail_count]})]}),g.formType==="ICS218"&&t.jsxs(t.Fragment,{children:[t.jsxs("span",{children:["ðŸ‘¤ ",g.prepared_by_name]}),t.jsxs("span",{children:["ðŸ“… ",new Date(g.date_prepared).toLocaleDateString()]}),t.jsxs("span",{children:["ðŸš— ",g.vehicleCount," vehicle",g.vehicleCount!==1?"s":""]})]})]}),g.formType==="ICS212"&&t.jsxs("div",{className:"flex gap-2 mt-3",onClick:$=>$.stopPropagation(),children:[t.jsx(C,{children:t.jsxs("button",{onClick:()=>S(g),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[t.jsx(Hr,{className:"w-3 h-3"}),"Edit"]})}),t.jsx(C,{children:t.jsxs("button",{onClick:()=>Ne(g.form_id),disabled:D===g.form_id,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(Rt,{className:`w-3 h-3 ${D===g.form_id?"animate-spin":""}`}),D===g.form_id?"Regenerating...":"Regenerate PDF"]})})]})]}),t.jsx("svg",{className:"w-5 h-5 text-gray-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})})},`${g.formType}-${g.id}`))})}),s<c&&!a&&t.jsx(C,{children:t.jsx("button",{onClick:ke,className:"w-full py-3 bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 rounded-lg shadow-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Load More"})}),a&&s>1&&t.jsx("div",{className:"text-center py-4",children:t.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),k&&E==="ICS212"&&t.jsx(At,{isOpen:!0,onClose:()=>N(null),title:"Form Details",children:t.jsx(Mr,{formId:k})}),k&&E==="ICS218"&&t.jsx(At,{isOpen:!0,onClose:()=>N(null),title:"Form Details",children:t.jsx(Lr,{formId:k})}),_&&re&&t.jsx(oa,{isOpen:_,onClose:()=>{P(!1),ae(null)},submission:re,onSave:he}),t.jsx(fs,{isOpen:T,onClose:()=>X(!1),selectedForms:e.filter(g=>g.formType==="ICS212"&&I.includes(g.form_id)),onSuccess:()=>{ne(),A(1,!1)}})]})}function xs(){const[e,r]=d.useState(!0),[a,n]=d.useState(null);d.useEffect(()=>{s();const o=setInterval(s,6e4);return()=>clearInterval(o)},[]);const s=async()=>{try{const o=await fetch("http://localhost:8787/ics212/analytics");if(o.ok){const l=await o.json();n(l)}}catch(o){console.error("Error fetching ICS-212 analytics:",o)}finally{r(!1)}},i=()=>{if(!a)return;const o=[["Metric","Value"],["Total Forms",a.totalForms],["Forms This Month",a.formsThisMonth],["Hold Rate (%)",a.holdRate.toFixed(2)],["Release Rate (%)",a.releaseRate.toFixed(2)]].map(b=>b.join(",")).join(`
`),l=new Blob([o],{type:"text/csv"}),m=URL.createObjectURL(l),h=document.createElement("a");h.href=m,h.download=`ics212-analytics-${new Date().toISOString().split("T")[0]}.csv`,h.click()};if(e)return t.jsx("div",{className:"space-y-4",children:Array.from({length:4}).map((o,l)=>t.jsx(yt,{type:"card"},l))});if(!a)return t.jsxs("div",{className:"text-center p-8 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl",children:[t.jsx(He,{className:"w-12 h-12 text-red-600 dark:text-red-400 mx-auto mb-3"}),t.jsx("p",{className:"text-red-800 dark:text-red-200 font-semibold",children:"Failed to load analytics data"}),t.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:"Please try refreshing the page"})]});const c=[{name:"HOLD",value:Math.round(a.holdRate),color:"#ef4444"},{name:"RELEASED",value:Math.round(a.releaseRate),color:"#10b981"}];return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"ICS-212 Analytics"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Vehicle Safety Inspection Performance Metrics"})]}),t.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors shadow-sm",children:[t.jsx(Xr,{className:"w-4 h-4"}),"Export Data"]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl shadow-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-blue-100 text-sm font-medium",children:"Total Forms"}),t.jsx("div",{className:"text-2xl",children:"ðŸ“‹"})]}),t.jsx("p",{className:"text-4xl font-bold",children:a.totalForms}),t.jsx("p",{className:"text-blue-100 text-xs mt-2",children:"All-time submissions"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-xl shadow-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-green-100 text-sm font-medium",children:"This Month"}),t.jsx(Pt,{className:"w-6 h-6 text-green-100"})]}),t.jsx("p",{className:"text-4xl font-bold",children:a.formsThisMonth}),t.jsx("p",{className:"text-green-100 text-xs mt-2",children:"Current month activity"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white rounded-xl shadow-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-red-100 text-sm font-medium",children:"Hold Rate"}),t.jsx("div",{className:"text-2xl",children:"ðŸ”´"})]}),t.jsxs("p",{className:"text-4xl font-bold",children:[a.holdRate.toFixed(1),"%"]}),t.jsx("p",{className:"text-red-100 text-xs mt-2",children:"Vehicles held for safety"})]}),t.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white rounded-xl shadow-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-emerald-100 text-sm font-medium",children:"Release Rate"}),t.jsx("div",{className:"text-2xl",children:"âœ…"})]}),t.jsxs("p",{className:"text-4xl font-bold",children:[a.releaseRate.toFixed(1),"%"]}),t.jsx("p",{className:"text-emerald-100 text-xs mt-2",children:"Approved for operation"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[t.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-8 bg-gradient-to-b from-blue-500 to-cyan-500 rounded-full"}),"Release Decision Distribution"]}),t.jsx(Me,{width:"100%",height:300,children:t.jsxs(zr,{children:[t.jsx(Kr,{data:c,cx:"50%",cy:"50%",labelLine:!1,label:({name:o,value:l})=>`${o}: ${l}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:c.map((o,l)=>t.jsx(qr,{fill:o.color},`cell-${l}`))}),t.jsx(Le,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px",color:"#fff"}})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[t.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-8 bg-gradient-to-b from-green-500 to-emerald-500 rounded-full"}),"Inspection Activity (Last 30 Days)"]}),t.jsx(Me,{width:"100%",height:300,children:t.jsxs(Yr,{data:a.formsPerDay,children:[t.jsx(at,{strokeDasharray:"3 3",stroke:"#374151"}),t.jsx(nt,{dataKey:"date",stroke:"#9ca3af",tick:{fontSize:11},angle:-45,textAnchor:"end",height:60}),t.jsx(st,{stroke:"#9ca3af"}),t.jsx(Le,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),t.jsx(Gr,{type:"monotone",dataKey:"count",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",r:5,strokeWidth:2,stroke:"#fff"},activeDot:{r:7}})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[t.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-8 bg-gradient-to-b from-purple-500 to-pink-500 rounded-full"}),"Top 10 Inspected Vehicles"]}),t.jsx(Me,{width:"100%",height:300,children:t.jsxs(It,{data:a.topVehicles.slice(0,10),children:[t.jsx(at,{strokeDasharray:"3 3",stroke:"#374151"}),t.jsx(nt,{dataKey:"vehicleId",stroke:"#9ca3af",angle:-45,textAnchor:"end",height:90,tick:{fontSize:10}}),t.jsx(st,{stroke:"#9ca3af"}),t.jsx(Le,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),t.jsx(Dt,{dataKey:"count",fill:"#8b5cf6",radius:[8,8,0,0]})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[t.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-8 bg-gradient-to-b from-red-500 to-orange-500 rounded-full"}),"Top Safety Item Failures"]}),t.jsx(Me,{width:"100%",height:300,children:t.jsxs(It,{data:a.safetyItemFailures.slice(0,8),layout:"vertical",children:[t.jsx(at,{strokeDasharray:"3 3",stroke:"#374151"}),t.jsx(nt,{type:"number",stroke:"#9ca3af"}),t.jsx(st,{type:"category",dataKey:"item",stroke:"#9ca3af",width:140,tick:{fontSize:10}}),t.jsx(Le,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),t.jsx(Dt,{dataKey:"count",fill:"#ef4444",radius:[0,8,8,0]})]})})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-gray-800 dark:to-gray-900 border border-indigo-100 dark:border-gray-700 rounded-xl p-6",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"ðŸ“Š Key Insights"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:t.jsx(Pt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Activity Trend"}),t.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[a.formsThisMonth," inspections completed this month"]})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:t.jsx(He,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Safety Focus"}),t.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[a.safetyItemFailures[0]?.item||"N/A"," is the most common failure"]})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:t.jsx("div",{className:"w-5 h-5 text-green-600 dark:text-green-400 flex items-center justify-center font-bold text-xs",children:"âœ“"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Pass Rate"}),t.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[a.releaseRate.toFixed(1),"% of vehicles released"]})]})]})]})]})]})}function ps({isOpen:e,onClose:r,title:a,children:n}){return e?t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:r}),t.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:a}),t.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:t.jsx(vt,{className:"w-6 h-6"})})]}),t.jsx("div",{className:"p-6",children:n})]})]})}):null}function bs({isOpen:e,onClose:r,onConfirm:a,vehicleName:n,isDeleting:s}){return e?t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:r}),t.jsx("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",children:t.jsxs("div",{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Delete Vehicle"}),t.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete ",t.jsx("strong",{children:n}),"? This action cannot be undone."]}),t.jsxs("div",{className:"flex gap-3 justify-end",children:[t.jsx("button",{onClick:r,disabled:s,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),t.jsx("button",{onClick:a,disabled:s,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:s?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Deleting..."]}):t.jsxs(t.Fragment,{children:[t.jsx(rr,{className:"w-4 h-4"}),"Delete"]})})]})]})})]})}):null}function ys(){const[e,r]=d.useState([]),[a,n]=d.useState(!0),[s,i]=d.useState(""),[c,o]=d.useState(!1),[l,m]=d.useState("add"),[h,b]=d.useState(null),[u,p]=d.useState(!1),[f,y]=d.useState({regUnit:"",agency:"",vehicleMake:"",vehicleType:"",incidentId:"",vehicleId:"",features:"",licenseNumber:"",notes:"",vehicleStatus:"Active"}),[v,w]=d.useState({}),[k,N]=d.useState(!1),[E,M]=d.useState(!1);d.useEffect(()=>{_()},[]);const _=async()=>{try{const x=await fetch(`${ie}/vehicles`);if(!x.ok)throw new Error("Failed to fetch vehicles");const T=await x.json();r(T.vehicles||[])}catch(x){console.error("Error fetching vehicles:",x),O({message:"Failed to load vehicles",type:"error"})}finally{n(!1)}},P=()=>{y({regUnit:"",agency:"",vehicleMake:"",vehicleType:"",incidentId:"",vehicleId:"",features:"",licenseNumber:"",notes:"",vehicleStatus:"Active"}),w({})},re=()=>{P(),m("add"),b(null),o(!0)},ae=x=>{y({regUnit:x.regUnit||"",agency:x.agency||"",vehicleMake:x.vehicleMake||"",vehicleType:x.vehicleType||"",incidentId:x.incidentId||"",vehicleId:x.vehicleId||"",features:x.features||"",licenseNumber:x.licenseNumber||"",notes:x.notes||"",vehicleStatus:x.vehicleStatus||"Active"}),m("edit"),b(x),o(!0)},D=x=>{b(x),p(!0)},z=()=>{const x={};return f.regUnit.trim()?f.regUnit.length>100&&(x.regUnit="Registered Unit must be 100 characters or less"):x.regUnit="Registered Unit is required",f.vehicleMake.trim()||(x.vehicleMake="Vehicle Make is required"),[f.agency,f.vehicleType,f.incidentId,f.vehicleId,f.features,f.licenseNumber,f.notes].some(X=>X.trim())||(x.general="At least one additional field must be filled"),w(x),Object.keys(x).length===0},I=async x=>{if(x.preventDefault(),!z()){O({message:"Please fix the validation errors",type:"error"});return}N(!0);try{const T=l==="add"?`${ie}/vehicles`:`${ie}/vehicles/${h?.id}`,A=await fetch(T,{method:l==="add"?"POST":"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(!A.ok){const J=await A.json();throw new Error(J.message||"Failed to save vehicle")}O({message:l==="add"?"Vehicle created successfully":"Vehicle updated successfully",type:"success"}),o(!1),P(),await _()}catch(T){console.error("Error saving vehicle:",T),O({message:T instanceof Error?T.message:"Failed to save vehicle",type:"error"})}finally{N(!1)}},R=async()=>{if(h){M(!0);try{const x=await fetch(`${ie}/vehicles/${h.id}`,{method:"DELETE"});if(!x.ok){const T=await x.json();throw new Error(T.message||"Failed to delete vehicle")}O({message:"Vehicle deleted successfully",type:"success"}),p(!1),b(null),await _()}catch(x){console.error("Error deleting vehicle:",x),O({message:x instanceof Error?x.message:"Failed to delete vehicle",type:"error"})}finally{M(!1)}}},L=e.filter(x=>{const T=s.toLowerCase();return x.regUnit?.toLowerCase().includes(T)||x.vehicleMake?.toLowerCase().includes(T)||x.vehicleType?.toLowerCase().includes(T)||x.licenseNumber?.toLowerCase().includes(T)});return a?t.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((x,T)=>t.jsx(yt,{type:"card"},T))}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-stretch sm:items-center justify-between",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Vehicle Management"}),t.jsx(C,{children:t.jsxs("button",{onClick:re,className:"flex items-center justify-center gap-2 px-4 py-2 bg-[#0066FF] text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[t.jsx(Br,{className:"w-5 h-5"}),"Add New Vehicle"]})})]}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:t.jsx("input",{type:"search",placeholder:"Search vehicles by name, make, model, or license plate...",value:s,onChange:x=>i(x.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})}),t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",L.length," vehicle",L.length!==1?"s":""]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:L.length===0?t.jsxs("div",{className:"col-span-full bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[t.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No vehicles found"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:s?"Try a different search term":"Get started by adding a new vehicle"})]}):L.map(x=>t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("div",{className:"text-4xl",children:x.vehicleType?.toLowerCase().includes("truck")?"ðŸš›":"ðŸš—"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:x.regUnit}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[x.vehicleMake," ",x.vehicleType]})]})]}),t.jsxs("div",{className:"space-y-2 text-sm",children:[x.licenseNumber&&t.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[t.jsx("span",{className:"font-medium",children:"License:"}),t.jsx("span",{children:x.licenseNumber})]}),x.agency&&t.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[t.jsx("span",{className:"font-medium",children:"Agency:"}),t.jsx("span",{children:x.agency})]}),x.vehicleStatus&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Status:"}),t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${x.vehicleStatus==="Active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:x.vehicleStatus})]})]}),x.notes&&t.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 line-clamp-2",children:x.notes})}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-2",children:[t.jsx(C,{children:t.jsx("a",{href:`/?vehicle=${encodeURIComponent(x.regUnit)}`,className:"flex-1 py-2 px-4 bg-[#0066FF] text-white rounded-lg text-center text-sm font-medium hover:bg-blue-700 transition-colors",children:"ðŸ“‹ New Inspection"})}),t.jsx(C,{children:t.jsx("button",{onClick:()=>ae(x),className:"p-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:"Edit Vehicle",children:t.jsx(aa,{className:"w-4 h-4"})})}),t.jsx(C,{children:t.jsx("button",{onClick:()=>D(x),className:"p-2 border border-red-300 dark:border-red-600 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Delete Vehicle",children:t.jsx(rr,{className:"w-4 h-4"})})})]})]},x.id))}),t.jsx(ps,{isOpen:c,onClose:()=>o(!1),title:l==="add"?"Add New Vehicle":"Edit Vehicle",children:t.jsxs("form",{onSubmit:I,className:"space-y-4",children:[v.general&&t.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm",children:v.general}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Registered Unit ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:f.regUnit,onChange:x=>y({...f,regUnit:x.target.value}),className:`w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:text-white ${v.regUnit?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., USAR-01"}),v.regUnit&&t.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:v.regUnit})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Agency"}),t.jsx("input",{type:"text",value:f.agency,onChange:x=>y({...f,agency:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., FEMA"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Make ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:f.vehicleMake,onChange:x=>y({...f,vehicleMake:x.target.value}),className:`w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:text-white ${v.vehicleMake?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., Ford, Chevrolet, International"}),v.vehicleMake&&t.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:v.vehicleMake})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category/Type"}),t.jsx("input",{type:"text",value:f.vehicleType,onChange:x=>y({...f,vehicleType:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., Heavy Rescue Truck, Cargo Trailer"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Incident ID"}),t.jsx("input",{type:"text",value:f.incidentId,onChange:x=>y({...f,incidentId:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., INC-2024-001"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Classification"}),t.jsx("input",{type:"text",value:f.vehicleId,onChange:x=>y({...f,vehicleId:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., VEHICLE-001"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Features"}),t.jsx("textarea",{value:f.features,onChange:x=>y({...f,features:x.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"Describe special features, equipment, or capabilities"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"License Number"}),t.jsx("input",{type:"text",value:f.licenseNumber,onChange:x=>y({...f,licenseNumber:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"e.g., ABC-1234"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Insurance Status"}),t.jsxs("select",{value:f.vehicleStatus,onChange:x=>y({...f,vehicleStatus:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"Active",children:"Active"}),t.jsx("option",{value:"Inactive",children:"Inactive"}),t.jsx("option",{value:"Maintenance",children:"Maintenance"}),t.jsx("option",{value:"Deployed",children:"Deployed"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),t.jsx("textarea",{value:f.notes,onChange:x=>y({...f,notes:x.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",placeholder:"Additional notes or comments"})]}),t.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[t.jsx("button",{type:"button",onClick:()=>o(!1),disabled:k,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:k,className:"px-4 py-2 bg-[#0066FF] text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:k?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Saving..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Jr,{className:"w-4 h-4"}),l==="add"?"Create Vehicle":"Update Vehicle"]})})]})]})}),t.jsx(bs,{isOpen:u,onClose:()=>p(!1),onConfirm:R,vehicleName:h?.regUnit||"",isDeleting:E})]})}function Us(){const[e,r]=d.useState("list"),a=Or();return t.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[t.jsxs("header",{className:"sticky top-0 z-50 bg-white dark:bg-gray-800 shadow-md",children:[t.jsx("div",{className:"px-4 py-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:"/taskforce-io-logo.png",alt:"TASKFORCE IO",className:"w-10 h-10 object-contain"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"TASKFORCE IO Admin"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Vehicle Safety Inspections"})]}),t.jsx(C,{children:t.jsxs("button",{onClick:()=>a("/"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",title:"Return to Home",children:[t.jsx(Qr,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Home"})]})})]})}),t.jsxs("nav",{className:"flex border-t border-gray-200 dark:border-gray-700",children:[t.jsx(C,{children:t.jsx("button",{onClick:()=>r("list"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${e==="list"?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{children:"ðŸ“‹"}),t.jsx("span",{className:"hidden sm:inline",children:"Forms"})]})})}),t.jsx(C,{children:t.jsx("button",{onClick:()=>r("analytics"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${e==="analytics"?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{children:"ðŸ“Š"}),t.jsx("span",{className:"hidden sm:inline",children:"Analytics"})]})})}),t.jsx(C,{children:t.jsx("button",{onClick:()=>r("vehicles"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${e==="vehicles"?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{children:"ðŸš—"}),t.jsx("span",{className:"hidden sm:inline",children:"Vehicles"})]})})})]})]}),t.jsx("main",{className:"p-4 pb-20 md:p-6 lg:p-8",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[e==="list"&&t.jsx(hs,{}),e==="analytics"&&t.jsx(xs,{}),e==="vehicles"&&t.jsx(ys,{})]})})]})}export{Us as ICS212AdminDashboard};
//# sourceMappingURL=ICS212AdminDashboard-Dc4ZbExS.js.map
