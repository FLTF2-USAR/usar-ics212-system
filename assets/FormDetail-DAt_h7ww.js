import{j as e}from"./ui-D7Zc9tn1.js";import{r as a}from"./vendor-B7m-6-nt.js";import{A as d}from"./config-BPfxE8rv.js";import{T as l}from"./TouchFeedback-DCDl4U_0.js";import{s as h}from"./index-D3nijRmL.js";function j({formId:t}){const[n,o]=a.useState(!0),[r,c]=a.useState(null);a.useEffect(()=>{x()},[t]);const x=async()=>{try{const s=await fetch(`${d}/ics212/forms/${t}`);if(!s.ok)throw new Error("Failed to fetch form");const g=await s.json();c(g.form)}catch(s){console.error("Error fetching form detail:",s),h({message:"Failed to load form details",type:"error"})}finally{o(!1)}},m=()=>{const s=`${d}/ics212/pdf?formId=${t}`;window.open(s,"_blank")};if(n)return e.jsx("div",{className:"p-4 space-y-4",children:e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"})]})});if(!r)return e.jsx("div",{className:"p-4 text-center",children:e.jsx("p",{className:"text-red-500",children:"Form not found"})});const i=r.pdf_url?`${d}/ics212/pdf/preview?formId=${t}`:null;return e.jsxs("div",{className:"space-y-4 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white",children:r.vehicle_id_no}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r.incident_name}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${r.release_decision==="hold"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}`,children:r.release_decision==="hold"?"üî¥ HOLD":"üü¢ RELEASED"})})]}),i?e.jsxs("div",{className:"px-4",children:[e.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-900",children:e.jsx("iframe",{src:i,className:"w-full",style:{height:"400px"},title:"PDF Preview"})}),e.jsx(l,{children:e.jsx("button",{onClick:m,className:"w-full mt-2 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"üì• Download PDF"})})]}):e.jsx("div",{className:"px-4",children:e.jsx("div",{className:"border border-yellow-300 dark:border-yellow-600 rounded-lg p-4 bg-yellow-50 dark:bg-yellow-900/20",children:e.jsx("p",{className:"text-yellow-800 dark:text-yellow-200 text-sm",children:"‚ö†Ô∏è PDF not available. It may still be generating or there was an error during submission."})})}),e.jsxs("div",{className:"px-4 space-y-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Inspection Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Inspector:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:r.inspector_name_print})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Date:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:r.inspector_date})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Time:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:r.inspector_time})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Vehicle Type:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:r.vehicle_type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"License:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:r.vehicle_license_no})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Agency/Unit:"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:r.agency_reg_unit})]})]}),r.additional_comments&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Comments:"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:r.additional_comments})]}),r.github_issue_number&&e.jsx(l,{children:e.jsxs("a",{href:`https://github.com/pdarleyjr/mbfd-checkout-system/issues/${r.github_issue_number}`,target:"_blank",rel:"noopener noreferrer",className:"block w-full py-2 px-4 bg-gray-100 dark:bg-gray-700 text-blue-600 dark:text-blue-400 rounded-lg text-center font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:["View GitHub Issue #",r.github_issue_number," ‚Üí"]})})]})]})}export{j as FormDetail};
//# sourceMappingURL=FormDetail-DAt_h7ww.js.map
